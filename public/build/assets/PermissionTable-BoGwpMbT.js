import{m as _,o as e,c as o,b as s,f as p,v as m,g as l,e as n,F as u,r as f,d as g,t as d}from"./app-CDSPXogr.js";import{P as k}from"./Pagination-CbKJCuuj.js";const v={class:"row"},b={class:"col-12"},y={class:"input-group mb-3"},P={class:"form-floating"},w=s("label",{for:"search-permissions"},"Поиск по разрешениям",-1),C=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),$=[C],j={style:{"overflow-y":"auto"}},L={key:0,class:"table"},A={key:0},I=s("i",{class:"fa-solid fa-caret-down"},null,-1),S=[I],O={key:1},B=s("i",{class:"fa-solid fa-caret-up"},null,-1),V=[B],N={key:0},T=s("i",{class:"fa-solid fa-caret-down"},null,-1),D=[T],F={key:1},E=s("i",{class:"fa-solid fa-caret-up"},null,-1),G=[E],M={key:0},U=s("i",{class:"fa-solid fa-caret-down"},null,-1),q=[U],z={key:1},H=s("i",{class:"fa-solid fa-caret-up"},null,-1),J=[H],K={key:0},Q=s("i",{class:"fa-solid fa-caret-down"},null,-1),R=[Q],W={key:1},X=s("i",{class:"fa-solid fa-caret-up"},null,-1),Y=[X],Z={key:1,scope:"col",class:"text-center"},x={scope:"row"},ss=["onClick"],ts={key:0,class:"fa-solid fa-lock mr-2 color-danger"},es={class:"text-center"},os={key:0,class:"text-center"},ns={key:1,class:"text-center"},is={class:"dropdown"},as=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),rs={class:"dropdown-menu"},ls=["onClick"],ds=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),cs=["onClick"],us=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),hs={key:0,class:"alert alert-success rounded-0",role:"alert"},_s=s("h4",{class:"alert-heading"},"Разрешения пользователей",-1),ps=s("p",null,"К сожалению, раздел ролей пуст. Вы еще не добавили ни одной роли, которые можно отобразить на этой странице.",-1),ms=s("hr",null,null,-1),fs=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свою первую роль",-1),gs=[_s,ps,ms,fs],ks={key:1,class:"row mb-3"},vs={class:"col-12"},bs={props:["forSelect","selected"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0,variants:[]}]}},computed:{..._(["getPermissions","getPermissionsPaginateObject"])},mounted(){this.loadPermissions()},methods:{sortAndLoad(i){this.sort.column=i,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadPermissions(this.current_page)},loadPermissions(i=0){this.current_page=i,this.$store.dispatch("loadPermissions",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getPermissions,this.paginate_object=this.getPermissionsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(i){this.$emit("select",i)},duplicateItem(i){this.$store.dispatch("duplicatePermission",{permissionId:i}).then(()=>{this.sortAndLoad("id")})},removeItem(i){this.$store.dispatch("removePermission",{permissionId:i}).then(()=>{this.sortAndLoad("id")})}}},ws=Object.assign(bs,{__name:"PermissionTable",setup(i){return(t,r)=>(e(),o(u,null,[s("form",v,[s("div",b,[s("div",y,[s("div",P,[p(s("input",{type:"search","onUpdate:modelValue":r[0]||(r[0]=a=>t.search=a),class:"form-control",id:"search-permissions"},null,512),[[m,t.search]]),w]),s("button",{type:"button",onClick:r[1]||(r[1]=a=>t.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},$)])])]),s("div",j,[t.items.length>0?(e(),o("table",L,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:r[2]||(r[2]=a=>t.sortAndLoad("id"))},[l("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),o("span",A,S)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),o("span",O,V)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:r[3]||(r[3]=a=>t.sortAndLoad("name"))},[l("Название "),t.sort.direction==="desc"&&t.sort.column==="name"?(e(),o("span",N,D)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="name"?(e(),o("span",F,G)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:r[4]||(r[4]=a=>t.sortAndLoad("slug"))},[l("Идентификатор "),t.sort.direction==="desc"&&t.sort.column==="slug"?(e(),o("span",M,q)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="slug"?(e(),o("span",z,J)):n("",!0)]),i.forSelect?n("",!0):(e(),o("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:r[5]||(r[5]=a=>t.sortAndLoad("updated_at"))},[l(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),o("span",K,R)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),o("span",W,Y)):n("",!0)])),i.forSelect?n("",!0):(e(),o("th",Z,"Действие"))])]),s("tbody",null,[(e(!0),o(u,null,f(t.items,(a,h)=>(e(),o("tr",null,[s("th",x,d(a.id||h),1),s("td",{class:"text-center cursor-pointer",onClick:c=>t.selectItem(a)},[(i.selected||[]).indexOf(a.id)!==-1?(e(),o("i",ts)):n("",!0),l(" "+d(a.name||"-"),1)],8,ss),s("td",es,d(a.slug||"-"),1),i.forSelect?n("",!0):(e(),o("td",os,d(a.updated_at||"-"),1)),i.forSelect?n("",!0):(e(),o("td",ns,[s("div",is,[as,s("ul",rs,[s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.selectItem(a),href:"javascript:void(0)"},[ds,l("Редактировать")],8,ls)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:c=>t.removeItem(a.id),href:"javascript:void(0)"},[us,l("Удалить")],8,cs)])])])]))]))),256))])])):n("",!0)]),t.items.length===0?(e(),o("div",hs,gs)):n("",!0),t.items.length>0?(e(),o("div",ks,[s("div",vs,[t.paginate_object?(e(),g(k,{key:0,onPagination_page:t.loadPermissions,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):n("",!0)])])):n("",!0)],64))}});export{ws as _};
