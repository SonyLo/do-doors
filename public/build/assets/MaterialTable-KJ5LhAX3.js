import{m as u,o as a,c as i,b as t,d as p,v as m,e as r,f as l,F as h,r as g,g as f,t as d}from"./app-ClgqYLNi.js";import{P as v}from"./Pagination-C7Xg3IfL.js";const b={class:"row"},k={class:"col-12"},w={class:"input-group mb-3"},y={class:"form-floating"},$=t("label",{for:"search-materials"},"Поиск по материалам",-1),C=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),M=[C],j={style:{"overflow-y":"auto"}},I={key:0,class:"table"},L={key:0},A=t("i",{class:"fa-solid fa-caret-down"},null,-1),P=[A],V={key:1},B=t("i",{class:"fa-solid fa-caret-up"},null,-1),O=[B],D={key:0},N=t("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],F={key:1},E=t("i",{class:"fa-solid fa-caret-up"},null,-1),G=[E],S=t("th",{scope:"col",class:"text-center"},"Варианты двери",-1),U=t("th",{scope:"col",class:"text-center"},"Варианты контура вокруг",-1),W={key:0},q=t("i",{class:"fa-solid fa-caret-down"},null,-1),z=[q],H={key:1},J=t("i",{class:"fa-solid fa-caret-up"},null,-1),K=[J],Q=t("th",{scope:"col",class:"text-center"},"Действие",-1),R={scope:"row"},X=["onClick"],Y={class:"text-center"},Z={class:"text-center"},x={class:"text-center"},tt={class:"text-center"},st={class:"dropdown"},et=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),ot={class:"dropdown-menu"},at=["onClick"],it=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),nt=["onClick"],lt=t("i",{class:"fa-regular fa-copy mr-2"},null,-1),rt=["onClick"],dt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),ct={key:0,class:"alert alert-success",role:"alert"},ht=t("h4",{class:"alert-heading"},"Материалы",-1),_t=t("p",null,"К сожалению, раздел материалов пуст. Вы еще не добавили ни одного материала, который можно отобразить на этой странице.",-1),ut=t("hr",null,null,-1),pt=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый материал",-1),mt=[ht,_t,ut,pt],gt={key:1,class:"row mb-3"},ft={class:"col-12"},vt={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,wrapper_variants:[],door_variants:[]}]}},computed:{...u(["getMaterialsPaginateObject","getMaterials"])},mounted(){this.loadMaterials()},methods:{sortAndLoad(o){this.sort.column=o,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadMaterials(this.current_page)},loadMaterials(o=0){this.current_page=o,this.$store.dispatch("loadMaterials",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(s=>{this.items=this.getMaterials,this.paginate_object=this.getMaterialsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(o){this.$emit("select",o)},duplicateItem(o){this.$store.dispatch("duplicateMaterial",{materialId:o}).then(()=>{this.sortAndLoad("id")})},removeItem(o){this.$store.dispatch("removeMaterial",{materialId:o}).then(()=>{this.sortAndLoad("id")})},showWrapperVariants(o){this.$emit("show-wrapper-variants",o.wrapper_variants)},showDoorVariants(o){this.$emit("show-door-variants",o.door_variants)}}},wt=Object.assign(vt,{__name:"MaterialTable",setup(o){return(s,n)=>(a(),i(h,null,[t("form",b,[t("div",k,[t("div",w,[t("div",y,[p(t("input",{type:"search","onUpdate:modelValue":n[0]||(n[0]=e=>s.search=e),class:"form-control",id:"search-materials"},null,512),[[m,s.search]]),$]),t("button",{type:"button",onClick:n[1]||(n[1]=e=>s.sortAndLoad("id")),class:"btn btn-outline-primary"},M)])])]),t("div",j,[s.items.length>0?(a(),i("table",I,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=e=>s.sortAndLoad("id"))},[r("# "),s.sort.direction==="desc"&&s.sort.column==="id"?(a(),i("span",L,P)):l("",!0),s.sort.direction==="asc"&&s.sort.column==="id"?(a(),i("span",V,O)):l("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[3]||(n[3]=e=>s.sortAndLoad("title"))},[r("Название "),s.sort.direction==="desc"&&s.sort.column==="title"?(a(),i("span",D,T)):l("",!0),s.sort.direction==="asc"&&s.sort.column==="title"?(a(),i("span",F,G)):l("",!0)]),S,U,t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[4]||(n[4]=e=>s.sortAndLoad("updated_at"))},[r(" Дата изменения "),s.sort.direction==="desc"&&s.sort.column==="updated_at"?(a(),i("span",W,z)):l("",!0),s.sort.direction==="asc"&&s.sort.column==="updated_at"?(a(),i("span",H,K)):l("",!0)]),Q])]),t("tbody",null,[(a(!0),i(h,null,g(s.items,(e,_)=>(a(),i("tr",null,[t("th",R,d(e.id||_),1),t("td",{class:"text-center",onClick:c=>s.selectItem(e)},d(e.title||"-"),9,X),t("td",Y,d((e.door_variants||[]).length),1),t("td",Z,d((e.wrapper_variants||[]).length),1),t("td",x,d(e.updated_at||"-"),1),t("td",tt,[t("div",st,[et,t("ul",ot,[t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.selectItem(e),href:"javascript:void(0)"},[it,r("Редактировать")],8,at)]),t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.duplicateItem(e.id),href:"javascript:void(0)"},[lt,r("Дублировать")],8,nt)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:c=>s.removeItem(e.id),href:"javascript:void(0)"},[dt,r("Удалить")],8,rt)])])])])]))),256))])])):l("",!0)]),s.items.length===0?(a(),i("div",ct,mt)):l("",!0),s.items.length>0?(a(),i("div",gt,[t("div",ft,[s.paginate_object?(a(),f(v,{key:0,onPagination_page:s.loadMaterials,pagination:s.paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0)],64))}});export{wt as _};
