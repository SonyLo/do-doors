import{m as _,o as e,c as o,b as s,f as p,v as m,g as r,e as n,F as u,r as f,d as g,t as d}from"./app-IgJzOcEi.js";import{P as k}from"./Pagination-BIryTHWu.js";const v={class:"row"},b={class:"col-12"},y={class:"input-group mb-3"},w={class:"form-floating"},U=s("label",{for:"search-users"},"Поиск пользователя",-1),C=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),$=[C],j={style:{"overflow-y":"auto"}},L={key:0,class:"table"},A={key:0},I=s("i",{class:"fa-solid fa-caret-down"},null,-1),P=[I],S={key:1},B=s("i",{class:"fa-solid fa-caret-up"},null,-1),O=[B],V={key:0},N=s("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],D={key:1},F=s("i",{class:"fa-solid fa-caret-up"},null,-1),E=[F],G={key:0},M=s("i",{class:"fa-solid fa-caret-down"},null,-1),q=[M],z={key:1},H=s("i",{class:"fa-solid fa-caret-up"},null,-1),J=[H],K={key:0},Q=s("i",{class:"fa-solid fa-caret-down"},null,-1),R=[Q],W={key:1},X=s("i",{class:"fa-solid fa-caret-up"},null,-1),Y=[X],Z={key:1,scope:"col",class:"text-center"},x={scope:"row"},ss=["onClick"],ts={class:"text-center"},es={key:0,class:"text-center"},os={key:1,class:"text-center"},ns={class:"dropdown"},is=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),as={class:"dropdown-menu"},ls=["onClick"],rs=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),ds=["onClick"],cs=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),us={key:0,class:"alert alert-success",role:"alert"},hs=s("h4",{class:"alert-heading"},"Ручки",-1),_s=s("p",null,"К сожалению, раздел ручек пуст. Вы еще не добавили ни одной ручки, которые можно отобразить на этой странице.",-1),ps=s("hr",null,null,-1),ms=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свою первую ручку",-1),fs=[hs,_s,ps,ms],gs={key:1,class:"row mb-3"},ks={class:"col-12"},vs={props:["forSelect"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0,variants:[]}]}},computed:{..._(["getUsers","getUsersPaginateObject"])},mounted(){this.loadUsers()},methods:{sortAndLoad(i){this.sort.column=i,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadUsers(this.current_page)},loadUsers(i=0){this.current_page=i,this.$store.dispatch("loadUsers",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getUsers,this.paginate_object=this.getUsersPaginateObject}).catch(()=>{this.loading=!1})},selectItem(i){this.$emit("select",i)},duplicateItem(i){this.$store.dispatch("duplicateUser",{materialId:i}).then(()=>{this.sortAndLoad("id")})},removeItem(i){this.$store.dispatch("removeUser",{materialId:i}).then(()=>{this.sortAndLoad("id")})}}},ws=Object.assign(vs,{__name:"UserTable",setup(i){return(t,l)=>(e(),o(u,null,[s("form",v,[s("div",b,[s("div",y,[s("div",w,[p(s("input",{type:"search","onUpdate:modelValue":l[0]||(l[0]=a=>t.search=a),class:"form-control",id:"search-users"},null,512),[[m,t.search]]),U]),s("button",{type:"button",onClick:l[1]||(l[1]=a=>t.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},$)])])]),s("div",j,[t.items.length>0?(e(),o("table",L,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:l[2]||(l[2]=a=>t.sortAndLoad("id"))},[r("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),o("span",A,P)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),o("span",S,O)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:l[3]||(l[3]=a=>t.sortAndLoad("email"))},[r("Почта "),t.sort.direction==="desc"&&t.sort.column==="email"?(e(),o("span",V,T)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="email"?(e(),o("span",D,E)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:l[4]||(l[4]=a=>t.sortAndLoad("name"))},[r("Имя "),t.sort.direction==="desc"&&t.sort.column==="name"?(e(),o("span",G,q)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="name"?(e(),o("span",z,J)):n("",!0)]),i.forSelect?n("",!0):(e(),o("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:l[5]||(l[5]=a=>t.sortAndLoad("updated_at"))},[r(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),o("span",K,R)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),o("span",W,Y)):n("",!0)])),i.forSelect?n("",!0):(e(),o("th",Z,"Действие"))])]),s("tbody",null,[(e(!0),o(u,null,f(t.items,(a,h)=>(e(),o("tr",null,[s("th",x,d(a.id||h),1),s("td",{class:"text-center",onClick:c=>t.selectItem(a)},d(a.email||"-"),9,ss),s("td",ts,d(a.name||0),1),i.forSelect?n("",!0):(e(),o("td",es,d(a.updated_at||"-"),1)),i.forSelect?n("",!0):(e(),o("td",os,[s("div",ns,[is,s("ul",as,[s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.selectItem(a),href:"javascript:void(0)"},[rs,r("Редактировать")],8,ls)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:c=>t.removeItem(a.id),href:"javascript:void(0)"},[cs,r("Удалить")],8,ds)])])])]))]))),256))])])):n("",!0)]),t.items.length===0?(e(),o("div",us,fs)):n("",!0),t.items.length>0?(e(),o("div",gs,[s("div",ks,[t.paginate_object?(e(),g(k,{key:0,onPagination_page:t.loadUsers,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):n("",!0)])])):n("",!0)],64))}});export{ws as _};
