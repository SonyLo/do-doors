import{A as V}from"./ApplicationLogo-ByjkRnpv.js";import{B as M,D as I,G as C,x as j,o,c as a,b as t,I as w,f as _,S as E,a as y,w as d,q as k,T as B,d as u,u as F,Y as D,m as P,k as R,v as g,e as r,F as $,r as q,t as f,p as S,g as c,h as N,j as z,_ as O,$ as A}from"./app-DtRtPL8u.js";import{v as L}from"./vue-the-mask-CGRJZJyA.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"relative"},J={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(n){const s=n,e=v=>{h.value&&v.key==="Escape"&&(h.value=!1)};M(()=>document.addEventListener("keydown",e)),I(()=>document.removeEventListener("keydown",e));const m=C(()=>({48:"w-48"})[s.width.toString()]),i=C(()=>s.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":s.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),h=j(!1);return(v,l)=>(o(),a("div",Q,[t("div",{onClick:l[0]||(l[0]=T=>h.value=!h.value)},[w(v.$slots,"trigger")]),_(t("div",{class:"fixed inset-0 z-40",onClick:l[1]||(l[1]=T=>h.value=!1)},null,512),[[E,h.value]]),y(B,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:d(()=>[_(t("div",{class:k(["absolute z-50 mt-2 rounded-md shadow-lg",[m.value,i.value]]),style:{display:"none"},onClick:l[2]||(l[2]=T=>h.value=!1)},[t("div",{class:k(["rounded-md ring-1 ring-black ring-opacity-5",n.contentClasses])},[w(v.$slots,"content")],2)],2),[[E,h.value]])]),_:3})]))}},x={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(n){return(s,e)=>(o(),u(F(D),{href:n.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out"},{default:d(()=>[w(s.$slots,"default")]),_:3},8,["href"]))}},p={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(n){const s=n,e=C(()=>s.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(m,i)=>(o(),u(F(D),{href:n.href,class:k(e.value)},{default:d(()=>[w(m.$slots,"default")]),_:3},8,["href","class"]))}},b={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(n){const s=n,e=C(()=>s.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(m,i)=>(o(),u(F(D),{href:n.href,class:k(e.value)},{default:d(()=>[w(m.$slots,"default")]),_:3},8,["href","class"]))}},G={directives:{mask:L.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},watch:{"clientForm.current_payed":{handler(n){this.clientForm.payed_percent=Math.round(this.clientForm.current_payed/this.cartTotalPrice*100)},deep:!0}},data(){return{tab:0,step:0,discount:0,flgDays:!0,self_clients:[],clientForm:{id:null,name:null,phone:null,email:null,info:null,promo:null,work_with_nds:1,items:[],current_payed:0,payed_percent:0,delivery_terms:null,work_days:0}}},mounted(){this.loadSelfClients()},methods:{hasRoles(n){let s=!1;return typeof n=="object"?this.$page.props.auth.roles.forEach(e=>{s=s||n.includes(e)}):this.$page.props.auth.roles.includes(n),s},back(){this.$emit("back")},preparedLawStatus(n){let e=(this.getDictionary.statuses||[]).find(m=>m.value===n)||null;return e?e.title:null},selectInfo(n){if(n==null){this.clientForm.id=null,this.clientForm.name=null,this.clientForm.email=null,this.clientForm.phone=null;return}this.clientForm.id=n.id||null,this.clientForm.name=n.title||null,this.clientForm.email=n.email||null,this.clientForm.phone=n.phone||null},clearCart(){this.$store.dispatch("clearCart").then(n=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"})}).catch(n=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(n=>{this.discount=n.discount||0})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(n=>{this.self_clients=n.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let n=new FormData;Object.keys(this.clientForm).forEach(s=>{const e=this.clientForm[s]||"";typeof e=="object"?n.append(s,JSON.stringify(e)):n.append(s,e)}),n.append("total_price",this.cartTotalPrice),n.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:n}).then(s=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},K={class:"input-group mb-3"},Y={class:"form-floating"},H=t("label",{for:"checkout-name"},"Ваше Ф.И.О.",-1),W={key:0,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},X=t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"},null,-1),Z=[X],ee={class:"dropdown-menu dropdown-menu-end rounded-0"},te=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),se=["onClick"],oe={class:"form-floating mb-3"},ne=t("label",{for:"checkout-phone"},"Ваш номер телефона",-1),re={class:"form-floating mb-3"},ae=t("label",{for:"checkout-email"},"Ваш email",-1),ie={class:"form-floating"},le=t("label",{for:"checkout-info"},"Дополнительная информация",-1),ce={class:"row my-3"},de={class:"col-md-6"},ue={class:"form-check"},me=t("label",{class:"form-check-label",for:"work-with-nds"}," Для ООО ",-1),he={class:"col-md-6"},fe={class:"form-check"},pe=t("label",{class:"form-check-label",for:"work-without-nds"}," Для ИП ",-1),_e=t("hr",{class:"hr hr-blurry my-3"},null,-1),ve={class:"font-bold"},be={key:0},ye=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),ge=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),ke={class:"form-floating mb-3"},we=t("label",{for:"checkout-promo"},"Промокод",-1),$e={key:0},Ce={class:"form-floating mb-3"},Fe=t("label",{for:"checkout-name"},"Начальная внесенная покупателем сумма, руб",-1),De={class:"form-floating mb-3"},Te=t("label",{for:"checkout-name"},"Процент внесенной суммы от полной стоимости",-1),Pe={class:"form-check form-switch"},Ee=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Указать кол-во рабочих дней / Выбрать конкретную дату",-1),Se={key:0,class:"form-floating mb-3"},xe=t("label",{for:"checkout-name"},"Кол-во рабочих дней",-1),je={key:1,class:"form-floating mb-3"},qe=t("label",{for:"checkout-name"},"Срок передачи товара покупателю",-1),Le=t("button",{class:"btn btn-dark w-100 my-2 rounded-0"},"Отправить и скачать договор",-1),Ue={key:1,class:"btn btn-dark w-100 my-2 rounded-0"},Ve={key:1,class:"card rounded-0"},Me=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),Ie=[Me];function Be(n,s,e,m,i,h){const v=R("mask");return n.cartTotalCount>0?(o(),a("form",{key:0,onSubmit:s[16]||(s[16]=z((...l)=>h.submit&&h.submit(...l),["prevent"]))},[t("div",K,[t("div",Y,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=l=>i.clientForm.name=l),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.name]]),H]),i.self_clients.length>0?(o(),a("button",W,Z)):r("",!0),t("ul",ee,[t("li",null,[t("a",{class:"dropdown-item",onClick:s[1]||(s[1]=l=>h.selectInfo(null)),href:"javascript:void(0)"},"Не выбрано")]),te,t("li",null,[(o(!0),a($,null,q(i.self_clients,l=>(o(),a($,null,[l.status!="individual"?(o(),a("a",{key:0,class:"dropdown-item",href:"javascript:void(0)",onClick:T=>h.selectInfo(l)},f(l.title||null)+" ("+f(h.preparedLawStatus(l.status)||"Не указан")+")",9,se)):r("",!0)],64))),256))])])]),t("div",oe,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=l=>i.clientForm.phone=l),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[v,"+7(###)###-##-##"],[g,i.clientForm.phone]]),ne]),t("div",re,[_(t("input",{type:"email",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=l=>i.clientForm.email=l),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.email]]),ae]),t("div",ie,[_(t("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":s[4]||(s[4]=l=>i.clientForm.info=l),placeholder:"Оставьте свой комментарий",id:"checkout-info"},null,512),[[g,i.clientForm.info]]),le]),t("div",ce,[t("div",de,[t("div",ue,[_(t("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":s[5]||(s[5]=l=>i.clientForm.work_with_nds=l),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[S,i.clientForm.work_with_nds]]),me])]),t("div",he,[t("div",fe,[_(t("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":s[6]||(s[6]=l=>i.clientForm.work_with_nds=l),id:"work-without-nds"},null,512),[[S,i.clientForm.work_with_nds]]),pe])])]),_e,t("h6",ve,[c("Итого цена "+f(Math.round(n.cartTotalPrice*(1-i.discount/100)))+" ₽ ",1),i.discount>0?(o(),a("span",be,"(скидка "+f(i.discount)+"%)",1)):r("",!0)]),ye,ge,t("div",ke,[_(t("input",{type:"text",class:"form-control",onKeyup:s[7]||(s[7]=(...l)=>h.findPromo&&h.findPromo(...l)),"onUpdate:modelValue":s[8]||(s[8]=l=>i.clientForm.promo=l),id:"checkout-promo",placeholder:"name@example.com"},null,544),[[g,i.clientForm.promo]]),we]),h.hasRoles(["manager","administrator"])?(o(),a("div",$e,[c(f(i.clientForm.client)+" ",1),t("div",Ce,[_(t("input",{type:"text",disabled:"",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=l=>i.clientForm.current_payed=l),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.current_payed]]),Fe]),t("div",De,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=l=>i.clientForm.payed_percent=l),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.payed_percent]]),Te]),t("div",Pe,[_(t("input",{onClick:s[11]||(s[11]=l=>i.flgDays=!i.flgDays),"onUpdate:modelValue":s[12]||(s[12]=l=>i.flgDays=l),class:"form-check-input",type:"checkbox",role:"switch",id:""},null,512),[[N,i.flgDays]]),Ee]),i.flgDays?(o(),a("div",Se,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=l=>i.clientForm.work_days=l),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.work_days]]),xe])):(o(),a("div",je,[_(t("input",{type:"date",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=l=>i.clientForm.delivery_terms=l),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[g,i.clientForm.delivery_terms]]),qe])),Le])):(o(),a("button",Ue,"Отправить")),t("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0",onClick:s[15]||(s[15]=(...l)=>h.back&&h.back(...l))},"Назад ")],32)):(o(),a("div",Ve,Ie))}const Re=U(G,[["render",Be]]),Ne={props:["item"],methods:{editDoorItem(){window.dispatchEvent(new CustomEvent("select-door-item",{detail:{item:this.item}}))},removeProduct(){this.$store.dispatch("removeProduct",this.item.product.id)},changeQuantityProductInCart(n="increment"){let s=n==="increment"?this.item.quantity+1:this.item.quantity-1;if(s===0){this.$store.dispatch("removeProduct",this.item.product.id);return}this.$store.dispatch("setQuantity",{id:this.item.product.id,quantity:s})}}},ze={class:"card mb-2 rounded-0"},Oe={class:"card-body"},Ae={class:"row"},Qe={class:"col-md-12"},Je={class:"text-muted font-bold"},Ge={class:"text-black mb-0"},Ke={key:0},Ye={key:1,class:"ml-1"},He={key:2,class:"ml-1"},We={key:3},Xe={key:4,class:"ml-1"},Ze={key:5,class:"ml-1"},et={key:6,class:"ml-1"},tt={key:7,class:"ml-1"},st={key:8,class:"ml-1"},ot={key:9,class:"ml-1"},nt={key:10,class:"ml-1"},rt={key:11,class:"ml-1"},at={key:12,class:"ml-1"},it={key:13,class:"ml-1"},lt={key:14,class:"ml-1"},ct={key:15,class:"ml-1"},dt={key:16,class:"ml-1"},ut={class:"row d-flex align-items-center"},mt={class:"col-5 col-md-5 col-lg-5 col-xl-5 d-flex justify-content-center mt-2"},ht=t("i",{class:"fas fa-minus"},null,-1),ft=[ht],pt={class:"btn",style:{color:"black"}},_t=t("i",{class:"fas fa-plus"},null,-1),vt=[_t],bt={class:"col-5 col-md-5 col-lg-5 col-xl-5"},yt={class:"mb-0 text-center font-bold"},gt={class:"col-2 col-md-2 col-lg-2 col-xl-2 text-center"},kt=t("i",{class:"fas fa-times"},null,-1),wt=[kt],$t={class:"col-12"},Ct=t("i",{class:"fa-regular fa-pen-to-square mr-2"},null,-1);function Ft(n,s,e,m,i,h){return o(),a("div",ze,[t("div",Oe,[t("div",Ae,[t("div",Qe,[t("h6",Je,f(e.item.product.purpose||"-")+": "+f(e.item.product.door_type.title)+" "+f(e.item.product.width)+"x"+f(e.item.product.height)+"x"+f(e.item.product.depth),1),t("h6",Ge,[e.item.product.box_and_frame_color.title?(o(),a("span",Ke,"("+f(e.item.product.box_and_frame_color.title)+")",1)):r("",!0),c(" лицо "),e.item.product.front_side_finish.title?(o(),a("span",Ye,f(e.item.product.front_side_finish.title),1)):r("",!0),c("/ "),e.item.product.back_side_finish.title?(o(),a("span",He,f(e.item.product.back_side_finish.title)+",",1)):r("",!0),c(" петли "),e.item.product.loops.title?(o(),a("span",We,f(e.item.product.loops.title)+",",1)):r("",!0),e.item.product.hinge_manufacturer.title?(o(),a("span",Xe,f(e.item.product.hinge_manufacturer.title)+",",1)):r("",!0),e.item.product.fittings_color.title?(o(),a("span",Ze,"("+f(e.item.product.fittings_color.title)+"),",1)):r("",!0),e.item.product.opening_type.title?(o(),a("span",et,f(e.item.product.opening_type.title)+",",1)):r("",!0),e.item.product.handle_holes.title?(o(),a("span",tt,f(e.item.product.handle_holes.title)+",",1)):r("",!0),e.item.product.need_automatic_doorstep?(o(),a("span",st," автоматический порожек,")):r("",!0),e.item.product.need_upper_jumper?(o(),a("span",ot," верхняя перемычка,")):r("",!0),e.item.product.need_handle_holes?(o(),a("span",nt," дверная ручка,")):r("",!0),e.item.product.handle_holes_type.title?(o(),a("span",rt,f(e.item.product.handle_holes_type.title)+",",1)):r("",!0),e.item.product.handle_holes.title?(o(),a("span",at,f(e.item.product.handle_holes.title)+",",1)):r("",!0),e.item.product.need_hidden_door_closer?(o(),a("span",it," скрытый доводчик,")):r("",!0),e.item.product.need_hidden_skirting_board?(o(),a("span",lt," скрытый плинтус,")):r("",!0),e.item.product.need_hidden_stopper?(o(),a("span",ct," скрытый стопор,")):r("",!0),e.item.product.need_door_install?(o(),a("span",dt," установка двери")):r("",!0)])])]),t("div",ut,[t("div",mt,[t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:s[0]||(s[0]=v=>h.changeQuantityProductInCart("decrement"))},ft),t("span",pt,f(e.item.quantity),1),t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:s[1]||(s[1]=v=>h.changeQuantityProductInCart("increment"))},vt)]),t("div",bt,[t("h6",yt,f(e.item.quantity*(e.item.product.price||0))+" ₽",1)]),t("div",gt,[t("a",{href:"javascript:void(0)",onClick:s[2]||(s[2]=(...v)=>h.removeProduct&&h.removeProduct(...v)),class:"text-muted"},wt)]),t("div",$t,[t("button",{type:"button",style:{color:"black"},class:"btn btn-link",onClick:s[3]||(s[3]=(...v)=>h.editDoorItem&&h.editDoorItem(...v))},[Ct,c("Редактировать")])])])])])}const Dt=U(Ne,[["render",Ft]]),Tt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"cart","aria-labelledby":"cart"},Pt={class:"offcanvas-header"},Et={class:"offcanvas-title font-bold"},St={key:0},xt={key:1},jt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),qt={key:0,class:"offcanvas-body"},Lt=t("div",{class:"hr my-3"},null,-1),Ut={key:1,class:"card rounded-0"},Vt=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),Mt=[Vt],It={key:1,class:"offcanvas-body"},Bt={key:2,class:"offcanvas-footer p-3"},Rt={class:"card rounded-0"},Nt={class:"card-body"},zt={class:"font-bold"},Ot=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),At=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),Qt={key:0},Jt={directives:{mask:L.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},data(){return{tab:0,step:0,discount:0}},mounted(){},methods:{back(){this.step=0,this.tab=0},checkout(){this.step=1,this.tab=1},clearCart(){this.$store.dispatch("clearCart").then(n=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"}),window.dispatchEvent(new CustomEvent("clear-cart"))}).catch(n=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},downloadCartExcel(){let n=this.cartProducts,s=new FormData;s.append("items",JSON.stringify(n)),this.$store.dispatch("downloadExcel",{cardData:s}).then(e=>{var m=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.href=m,i.setAttribute("download","cart.xls"),document.body.appendChild(i),i.click(),this.$notify({title:"DoDoors",text:"Excel успешно скачан!",type:"success"})}).catch(e=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(n=>{this.self_clients=n.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let n=new FormData;Object.keys(this.clientForm).forEach(s=>{const e=this.clientForm[s]||"";typeof e=="object"?n.append(s,JSON.stringify(e)):n.append(s,e)}),n.append("total_price",this.cartTotalPrice),n.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:n}).then(s=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},Gt=Object.assign(Jt,{__name:"CalcCartSimple",setup(n){return(s,e)=>(o(),a("div",Tt,[t("div",Pt,[t("h5",Et,[s.tab===0?(o(),a("span",St,"Вы выбрали")):r("",!0),s.tab===1?(o(),a("span",xt,"Оформление заказа")):r("",!0)]),jt]),s.tab===0?(o(),a("div",qt,[s.cartProducts.length>0?(o(),a($,{key:0},[(o(!0),a($,null,q(s.cartProducts,m=>(o(),u(Dt,{item:m},null,8,["item"]))),256)),Lt,t("button",{onClick:e[0]||(e[0]=(...m)=>s.downloadCartExcel&&s.downloadCartExcel(...m)),class:"btn btn-dark rounded-0 w-100 mb-2"}," Скачать в виде Excel-файла "),t("button",{onClick:e[1]||(e[1]=(...m)=>s.clearCart&&s.clearCart(...m)),class:"btn btn-outline-secondary rounded-0 w-100 mb-2"}," Очистить корзину ")],64)):(o(),a("div",Ut,Mt))])):r("",!0),s.tab===1?(o(),a("div",It,[s.step===1?(o(),u(Re,{key:0,onBack:s.back},null,8,["onBack"])):r("",!0)])):r("",!0),s.cartProducts.length>0&&s.tab===0?(o(),a("div",Bt,[t("div",Rt,[t("div",Nt,[t("h6",zt,"Итого цена "+f(s.cartTotalPrice)+" ₽",1),Ot,At,s.step===0?(o(),a("div",Qt,[t("button",{class:"btn btn-dark rounded-0 w-100 mb-2",onClick:e[2]||(e[2]=(...m)=>s.checkout&&s.checkout(...m))},"Обсудить заказ с менеджером "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[3]||(e[3]=(...m)=>s.checkout&&s.checkout(...m))},"Получить цену на почту "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[4]||(e[4]=(...m)=>s.checkout&&s.checkout(...m))},"Получить цену в Telegram ")])):r("",!0)])])])):r("",!0)]))}}),Kt={class:"min-h-screen bg-gray-100"},Yt={class:"bg-white border-b border-gray-100"},Ht={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Wt={class:"flex justify-between h-16"},Xt={class:"flex"},Zt={class:"shrink-0 flex items-center"},es={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},ts={class:"badge bg-danger ml-1 rounded-full"},ss={class:"hidden sm:flex sm:items-center sm:ms-6"},os={class:"ms-3 relative"},ns={class:"inline-flex rounded-0"},rs={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-0 text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},as=t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),is={class:"-me-2 flex items-center sm:hidden"},ls={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},cs={class:"pt-2 pb-3 space-y-1"},ds={class:"pt-4 pb-1 border-t border-gray-200"},us={class:"px-4"},ms={class:"font-medium text-base text-gray-800"},hs={class:"font-medium text-sm text-gray-500"},fs={class:"mt-3 space-y-1"},ps=t("hr",null,null,-1),_s={class:"mt-3 space-y-1"},vs=t("i",{class:"fa-solid fa-lock"},null,-1),bs=t("i",{class:"fa-solid fa-lock"},null,-1),ys={key:0,class:"bg-white shadow"},gs={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},ks=A('<div class="container border-b border-gray-100"><footer class="py-3 my-4"><div class="d-flex justify-center"><img src="/images/logo.jpg" style="width:100px;" alt=""></div><p class="text-center text-muted">© 2024 DoDoors</p></footer></div>',1),ws={key:0,class:"cart-fixed-btn"},$s={class:"btn rounded-0 shadow-lg","data-bs-toggle":"offcanvas",href:"#cart",role:"button","aria-controls":"cart"},Cs=t("i",{class:"fa-solid fa-basket-shopping text-primary"},null,-1),Fs={class:"badge text-primary font-bold"},Ds={class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",tabindex:"-1",id:"main-side-admin-menu","aria-labelledby":"offcanvasExampleLabel"},Ts=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"}," DoDoors "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),Ps={class:"offcanvas-body"},Es={class:"row"},Ss={class:"col-md-6"},xs=t("i",{class:"fa-solid fa-user-tie mr-2"},null,-1),js={class:"col-md-6"},qs=t("i",{class:"fa-solid fa-screwdriver-wrench mr-2"},null,-1),Ls={class:"py-5"},Us={key:0,class:"d-flex flex-col align-items-center"},Vs={key:1,class:"d-flex flex-col align-items-center"},Ms={data(){return{menuTab:0}},computed:{...P(["getErrors","cartTotalCount","cartProducts"])},mounted(){},methods:{hasRoles(n){return(this.$page.props.auth.roles||[]).includes(n)},can(n){return(this.$page.props.auth.permissions||[]).includes(n)}}},zs=Object.assign(Ms,{__name:"AuthenticatedLayout",setup(n){const s=j(!1);return(e,m)=>{const i=O("notifications");return o(),a($,null,[t("div",null,[y(i,{position:"top right"}),t("div",Kt,[t("nav",Yt,[t("div",Ht,[t("div",Wt,[t("div",Xt,[t("div",Zt,[y(F(D),{href:e.route("dashboard")},{default:d(()=>[y(V,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),t("div",es,[e.can("manage-views-adminmenu")?(o(),u(p,{key:0,"data-bs-toggle":"offcanvas",href:"#main-side-admin-menu",role:"button","aria-controls":"main-side-admin-menu"},{default:d(()=>[c(" Админ.меню ")]),_:1})):r("",!0),y(p,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:d(()=>[c(" Главная ")]),_:1},8,["href","active"]),e.cartTotalCount>0?(o(),u(p,{key:1,href:e.route("basket"),active:e.route().current("basket")},{default:d(()=>[c(" Корзина "),t("span",ts,f(e.cartTotalCount),1)]),_:1},8,["href","active"])):r("",!0)])]),t("div",ss,[t("div",os,[y(J,{align:"right",width:"48"},{trigger:d(()=>[t("span",ns,[t("button",rs,[c(f(e.$page.props.auth.user.name)+" ",1),as])])]),content:d(()=>[y(x,{href:e.route("profile.edit")},{default:d(()=>[c(" Профиль")]),_:1},8,["href"]),y(x,{href:e.route("logout"),method:"post",as:"button"},{default:d(()=>[c(" Выход ")]),_:1},8,["href"])]),_:1})])]),t("div",is,[t("button",{onClick:m[0]||(m[0]=h=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(o(),a("svg",ls,[t("path",{class:k({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:k({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),t("div",{class:k([{block:s.value,hidden:!s.value},"sm:hidden"])},[t("div",cs,[y(b,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:d(()=>[c(" Главная страница ")]),_:1},8,["href","active"])]),t("div",ds,[t("div",us,[t("div",ms,f(e.$page.props.auth.user.name),1),t("div",hs,f(e.$page.props.auth.user.email),1)]),t("div",fs,[y(b,{href:e.route("profile.edit")},{default:d(()=>[c(" Профиль")]),_:1},8,["href"]),y(b,{href:e.route("logout"),method:"post",as:"button"},{default:d(()=>[c(" Выход ")]),_:1},8,["href"]),ps]),t("div",_s,[e.can("manage-users")?(o(),u(b,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:d(()=>[c(" Пользователи ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(o(),u(b,{key:1,class:"p-3"},{default:d(()=>[c(" Клиенты "),vs]),_:1})):r("",!0),e.can("manage-orders")?(o(),u(b,{key:2,class:"p-3"},{default:d(()=>[c(" Заказы "),bs]),_:1})):r("",!0),e.can("manage-materials")?(o(),u(b,{key:3,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:d(()=>[c(" Материалы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-handles")?(o(),u(b,{key:4,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:d(()=>[c(" Ручки ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-hinges")?(o(),u(b,{key:5,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:d(()=>[c(" Петли ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-door-variants")?(o(),u(b,{key:6,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:d(()=>[c(" Типы дверей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-colors")?(o(),u(b,{key:7,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:d(()=>[c(" Цвета ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-sizes")?(o(),u(b,{key:8,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:d(()=>[c(" Размеры ")]),_:1},8,["href","active"])):r("",!0)])])],2)]),e.$slots.header?(o(),a("header",ys,[t("div",gs,[w(e.$slots,"header")])])):r("",!0),t("main",null,[w(e.$slots,"default")])])]),ks,e.cartTotalCount>0?(o(),a("div",ws,[t("a",$s,[Cs,t("span",Fs,f(e.cartTotalCount)+" шт.",1)])])):r("",!0),y(Gt),t("div",Ds,[Ts,t("div",Ps,[t("div",Es,[t("div",Ss,[t("button",{class:k(["btn w-100 rounded-0",{"btn-dark":e.menuTab===0,"btn-outline-secondary":e.menuTab!==0}]),onClick:m[1]||(m[1]=h=>e.menuTab=0)},[xs,c("Общее ")],2)]),t("div",js,[t("button",{class:k(["btn w-100 rounded-0",{"btn-dark":e.menuTab===1,"btn-outline-secondary":e.menuTab!==1}]),onClick:m[2]||(m[2]=h=>e.menuTab=1)},[qs,c("Админ ")],2)])]),t("div",Ls,[e.menuTab===0?(o(),a("nav",Us,[e.can("manage-calc")?(o(),u(p,{key:0,class:"p-3",href:e.route("calc"),active:e.route().current("calc")},{default:d(()=>[c(" Калькулятор ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(o(),u(p,{key:1,class:"p-3",href:e.route("clients"),active:e.route().current("clients")},{default:d(()=>[c(" Клиенты ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(o(),u(p,{key:2,class:"p-3",href:e.route("documents"),active:e.route().current("documents")},{default:d(()=>[c(" Договора (Документы) ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-orders")?(o(),u(p,{key:3,class:"p-3",href:e.route("orders"),active:e.route().current("orders")},{default:d(()=>[c(" Заказы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-promo-codes")?(o(),u(p,{key:4,class:"p-3",href:e.route("promo-codes"),active:e.route().current("promo-codes")},{default:d(()=>[c(" Промокоды ")]),_:1},8,["href","active"])):r("",!0)])):r("",!0),e.menuTab===1?(o(),a("nav",Vs,[e.can("manage-users")?(o(),u(p,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:d(()=>[c(" Пользователи ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-roles")?(o(),u(p,{key:1,class:"p-3",href:e.route("roles"),active:e.route().current("roles")},{default:d(()=>[c(" Роли пользователей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-permissions")?(o(),u(p,{key:2,class:"p-3",href:e.route("permissions"),active:e.route().current("permissions")},{default:d(()=>[c(" Разрешения пользователей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-services")?(o(),u(p,{key:3,class:"p-3",href:e.route("services"),active:e.route().current("services")},{default:d(()=>[c(" Сервисы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-materials")?(o(),u(p,{key:4,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:d(()=>[c(" Материалы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-handles")?(o(),u(p,{key:5,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:d(()=>[c(" Ручки ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-hinges")?(o(),u(p,{key:6,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:d(()=>[c(" Петли ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-door-variants")?(o(),u(p,{key:7,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:d(()=>[c(" Типы дверей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-colors")?(o(),u(p,{key:8,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:d(()=>[c(" Цвета ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-sizes")?(o(),u(p,{key:9,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:d(()=>[c(" Размеры ")]),_:1},8,["href","active"])):r("",!0)])):r("",!0)])])])],64)}}});export{Re as C,zs as _};
