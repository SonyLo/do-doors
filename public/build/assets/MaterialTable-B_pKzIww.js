import{m as _,o as e,c as o,b as t,f as p,v as m,g as l,e as n,F as h,r as f,d as g,t as d}from"./app-CTwLR2lZ.js";import{P as k}from"./Pagination-BfJRwfEy.js";const v={class:"row"},y={class:"col-12"},b={class:"input-group mb-3"},w={class:"form-floating"},$=t("label",{for:"search-materials"},"Поиск по материалам",-1),C=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),M=[C],j={style:{"overflow-y":"auto"}},L={key:0,class:"table"},A={key:0},I=t("i",{class:"fa-solid fa-caret-down"},null,-1),P=[I],V={key:1},B=t("i",{class:"fa-solid fa-caret-up"},null,-1),O=[B],D={key:0},N=t("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],F={key:1},E=t("i",{class:"fa-solid fa-caret-up"},null,-1),G=[E],S={key:0},U=t("i",{class:"fa-solid fa-caret-down"},null,-1),W=[U],q={key:1},z=t("i",{class:"fa-solid fa-caret-up"},null,-1),H=[z],J={key:0},K=t("i",{class:"fa-solid fa-caret-down"},null,-1),Q=[K],R={key:1},X=t("i",{class:"fa-solid fa-caret-up"},null,-1),Y=[X],Z={key:1,scope:"col",class:"text-center"},x={key:2,scope:"col",class:"text-center"},tt={key:0},st=t("i",{class:"fa-solid fa-caret-down"},null,-1),et=[st],ot={key:1},it=t("i",{class:"fa-solid fa-caret-up"},null,-1),nt=[it],at={key:4,scope:"col",class:"text-center"},rt={scope:"row"},lt=["onClick"],dt={class:"text-center cursor-pointer"},ct={key:0,class:"text-center"},ht={key:1,class:"text-center"},ut={key:2,class:"text-center"},_t={key:3,class:"text-center"},pt={key:4,class:"text-center"},mt={class:"dropdown"},ft=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),gt={class:"dropdown-menu"},kt=["onClick"],vt=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),yt=["onClick"],bt=t("i",{class:"fa-regular fa-copy mr-2"},null,-1),wt=["onClick"],$t=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),Ct={key:0,class:"alert alert-success",role:"alert"},Mt=t("h4",{class:"alert-heading"},"Материалы",-1),jt=t("p",null,"К сожалению, раздел материалов пуст. Вы еще не добавили ни одного материала, который можно отобразить на этой странице.",-1),Lt=t("hr",null,null,-1),At=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый материал",-1),It=[Mt,jt,Lt,At],Pt={key:1,class:"row mb-3"},Vt={class:"col-12"},Bt={props:["simple"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,wrapper_variants:[],door_variants:[]}]}},computed:{..._(["getMaterialsPaginateObject","getMaterials"])},mounted(){this.loadMaterials()},methods:{sortAndLoad(i){this.sort.column=i,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadMaterials(this.current_page)},loadMaterials(i=0){this.current_page=i,this.$store.dispatch("loadMaterials",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(s=>{this.items=this.getMaterials,this.paginate_object=this.getMaterialsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(i){this.$emit("select",i)},duplicateItem(i){this.$store.dispatch("duplicateMaterial",{materialId:i}).then(()=>{this.sortAndLoad("id")})},removeItem(i){this.$store.dispatch("removeMaterial",{materialId:i}).then(()=>{this.sortAndLoad("id")})},showWrapperVariants(i){this.$emit("show-wrapper-variants",i.wrapper_variants)},showDoorVariants(i){this.$emit("show-door-variants",i.door_variants)}}},Nt=Object.assign(Bt,{__name:"MaterialTable",setup(i){return(s,r)=>(e(),o(h,null,[t("form",v,[t("div",y,[t("div",b,[t("div",w,[p(t("input",{type:"search","onUpdate:modelValue":r[0]||(r[0]=a=>s.search=a),class:"form-control",id:"search-materials"},null,512),[[m,s.search]]),$]),t("button",{type:"button",onClick:r[1]||(r[1]=a=>s.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},M)])])]),t("div",j,[s.items.length>0?(e(),o("table",L,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:r[2]||(r[2]=a=>s.sortAndLoad("id"))},[l("# "),s.sort.direction==="desc"&&s.sort.column==="id"?(e(),o("span",A,P)):n("",!0),s.sort.direction==="asc"&&s.sort.column==="id"?(e(),o("span",V,O)):n("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:r[3]||(r[3]=a=>s.sortAndLoad("title"))},[l("Название "),s.sort.direction==="desc"&&s.sort.column==="title"?(e(),o("span",D,T)):n("",!0),s.sort.direction==="asc"&&s.sort.column==="title"?(e(),o("span",F,G)):n("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:r[4]||(r[4]=a=>s.sortAndLoad("is_base"))},[l("База "),s.sort.direction==="desc"&&s.sort.column==="is_base"?(e(),o("span",S,W)):n("",!0),s.sort.direction==="asc"&&s.sort.column==="is_base"?(e(),o("span",q,H)):n("",!0)]),i.simple?n("",!0):(e(),o("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:r[5]||(r[5]=a=>s.sortAndLoad("order_position"))},[l("Позиция в выдаче "),s.sort.direction==="desc"&&s.sort.column==="order_position"?(e(),o("span",J,Q)):n("",!0),s.sort.direction==="asc"&&s.sort.column==="order_position"?(e(),o("span",R,Y)):n("",!0)])),i.simple?n("",!0):(e(),o("th",Z,"Варианты двери ")),i.simple?n("",!0):(e(),o("th",x,"Варианты контура вокруг ")),i.simple?n("",!0):(e(),o("th",{key:3,scope:"col",class:"text-center cursor-pointer",onClick:r[6]||(r[6]=a=>s.sortAndLoad("updated_at"))},[l(" Дата изменения "),s.sort.direction==="desc"&&s.sort.column==="updated_at"?(e(),o("span",tt,et)):n("",!0),s.sort.direction==="asc"&&s.sort.column==="updated_at"?(e(),o("span",ot,nt)):n("",!0)])),i.simple?n("",!0):(e(),o("th",at,"Действие "))])]),t("tbody",null,[(e(!0),o(h,null,f(s.items,(a,u)=>(e(),o("tr",null,[t("th",rt,d(a.id||u),1),t("td",{class:"text-center cursor-pointer",onClick:c=>s.selectItem(a)},d(a.title||"-"),9,lt),t("td",dt,d(a.is_base?"Да":"Нет"),1),i.simple?n("",!0):(e(),o("td",ct,d(a.order_position||0),1)),i.simple?n("",!0):(e(),o("td",ht,d((a.door_variants||[]).length),1)),i.simple?n("",!0):(e(),o("td",ut,d((a.wrapper_variants||[]).length),1)),i.simple?n("",!0):(e(),o("td",_t,d(a.updated_at||"-"),1)),i.simple?n("",!0):(e(),o("td",pt,[t("div",mt,[ft,t("ul",gt,[t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.selectItem(a),href:"javascript:void(0)"},[vt,l("Редактировать")],8,kt)]),t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.duplicateItem(a.id),href:"javascript:void(0)"},[bt,l("Дублировать")],8,yt)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:c=>s.removeItem(a.id),href:"javascript:void(0)"},[$t,l("Удалить")],8,wt)])])])]))]))),256))])])):n("",!0)]),s.items.length===0?(e(),o("div",Ct,It)):n("",!0),s.items.length>0?(e(),o("div",Pt,[t("div",Vt,[s.paginate_object?(e(),g(k,{key:0,onPagination_page:s.loadMaterials,pagination:s.paginate_object},null,8,["onPagination_page","pagination"])):n("",!0)])])):n("",!0)],64))}});export{Nt as _};
