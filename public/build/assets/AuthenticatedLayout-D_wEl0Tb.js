import{A as Q}from"./ApplicationLogo-34l6Pbbb.js";import{B as Z,D as G,G as j,x as N,o as n,c as m,b as t,I as P,f as T,S as U,a as D,w as f,q as x,T as J,d as v,u as M,Y as V,$ as K,m as q,k as X,v as E,e as c,F as L,r as O,t as _,p as I,g as h,j as Y,_ as H,a0 as W}from"./app-C8zytP-Q.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"relative"},te={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(l){const s=l,e=d=>{r.value&&d.key==="Escape"&&(r.value=!1)};Z(()=>document.addEventListener("keydown",e)),G(()=>document.removeEventListener("keydown",e));const a=j(()=>({48:"w-48"})[s.width.toString()]),o=j(()=>s.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":s.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),r=N(!1);return(d,i)=>(n(),m("div",ee,[t("div",{onClick:i[0]||(i[0]=y=>r.value=!r.value)},[P(d.$slots,"trigger")]),T(t("div",{class:"fixed inset-0 z-40",onClick:i[1]||(i[1]=y=>r.value=!1)},null,512),[[U,r.value]]),D(J,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:f(()=>[T(t("div",{class:x(["absolute z-50 mt-2 rounded-md shadow-lg",[a.value,o.value]]),style:{display:"none"},onClick:i[2]||(i[2]=y=>r.value=!1)},[t("div",{class:x(["rounded-md ring-1 ring-black ring-opacity-5",l.contentClasses])},[P(d.$slots,"content")],2)],2),[[U,r.value]])]),_:3})]))}},R={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(l){return(s,e)=>(n(),v(M(V),{href:l.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out"},{default:f(()=>[P(s.$slots,"default")]),_:3},8,["href"]))}},g={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(l){const s=l,e=j(()=>s.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(a,o)=>(n(),v(M(V),{href:l.href,class:x(e.value)},{default:f(()=>[P(a.$slots,"default")]),_:3},8,["href","class"]))}},F={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(l){const s=l,e=j(()=>s.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(a,o)=>(n(),v(M(V),{href:l.href,class:x(e.value)},{default:f(()=>[P(a.$slots,"default")]),_:3},8,["href","class"]))}};var z={exports:{}};(function(l,s){(function(e,a){l.exports=a()})(K,function(){return function(e){function a(r){if(o[r])return o[r].exports;var d=o[r]={i:r,l:!1,exports:{}};return e[r].call(d.exports,d,d.exports,a),d.l=!0,d.exports}var o={};return a.m=e,a.c=o,a.i=function(r){return r},a.d=function(r,d,i){a.o(r,d)||Object.defineProperty(r,d,{configurable:!1,enumerable:!0,get:i})},a.n=function(r){var d=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(d,"a",d),d},a.o=function(r,d){return Object.prototype.hasOwnProperty.call(r,d)},a.p=".",a(a.s=10)}([function(e,a){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(o){return o.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(o){return o.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,a,o){function r(u){var p=document.createEvent("Event");return p.initEvent(u,!0,!0),p}var d=o(2),i=o(0),y=o.n(i);a.a=function(u,p){var b=p.value;if((Array.isArray(b)||typeof b=="string")&&(b={mask:b,tokens:y.a}),u.tagName.toLocaleUpperCase()!=="INPUT"){var k=u.getElementsByTagName("input");if(k.length!==1)throw new Error("v-mask directive requires 1 input, found "+k.length);u=k[0]}u.oninput=function($){if($.isTrusted){var C=u.selectionEnd,S=u.value[C-1];for(u.value=o.i(d.a)(u.value,b.mask,!0,b.tokens);C<u.value.length&&u.value.charAt(C-1)!==S;)C++;u===document.activeElement&&(u.setSelectionRange(C,C),setTimeout(function(){u.setSelectionRange(C,C)},0)),u.dispatchEvent(r("input"))}};var w=o.i(d.a)(u.value,b.mask,!0,b.tokens);w!==u.value&&(u.value=w,u.dispatchEvent(r("input")))}},function(e,a,o){var r=o(6),d=o(5);a.a=function(i,y){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=arguments[3];return Array.isArray(y)?o.i(d.a)(r.a,y,p)(i,y,u,p):o.i(r.a)(i,y,u,p)}},function(e,a,o){function r(k){k.component(p.a.name,p.a),k.directive("mask",y.a)}Object.defineProperty(a,"__esModule",{value:!0});var d=o(0),i=o.n(d),y=o(1),u=o(7),p=o.n(u);o.d(a,"TheMask",function(){return p.a}),o.d(a,"mask",function(){return y.a}),o.d(a,"tokens",function(){return i.a}),o.d(a,"version",function(){return b});var b="0.11.1";a.default=r,typeof window<"u"&&window.Vue&&window.Vue.use(r)},function(e,a,o){Object.defineProperty(a,"__esModule",{value:!0});var r=o(1),d=o(0),i=o.n(d),y=o(2);a.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return i.a}}},directives:{mask:r.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(u){u!==this.lastValue&&(this.display=u)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(u){u.isTrusted||this.refresh(u.target.value)},refresh:function(p){this.display=p;var p=o.i(y.a)(p,this.mask,this.masked,this.tokens);p!==this.lastValue&&(this.lastValue=p,this.$emit("input",p))}}}},function(e,a,o){function r(d,i,y){return i=i.sort(function(u,p){return u.length-p.length}),function(u,p){for(var b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],k=0;k<i.length;){var w=i[k];k++;var $=i[k];if(!($&&d(u,$,!0,y).length>w.length))return d(u,w,b,y)}return""}}a.a=r},function(e,a,o){function r(d,i){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=arguments[3];d=d||"",i=i||"";for(var p=0,b=0,k="";p<i.length&&b<d.length;){var w=i[p],$=u[w],C=d[b];$&&!$.escape?($.pattern.test(C)&&(k+=$.transform?$.transform(C):C,p++),b++):($&&$.escape&&(p++,w=i[p]),y&&(k+=w),C===w&&b++,p++)}for(var S="";p<i.length&&y;){var w=i[p];if(u[w]){S="";break}S+=w,p++}return k+S}a.a=r},function(e,a,o){var r=o(8)(o(4),o(9),null,null);e.exports=r.exports},function(e,a){e.exports=function(o,r,d,i){var y,u=o=o||{},p=typeof o.default;p!=="object"&&p!=="function"||(y=o,u=o.default);var b=typeof u=="function"?u.options:u;if(r&&(b.render=r.render,b.staticRenderFns=r.staticRenderFns),d&&(b._scopeId=d),i){var k=b.computed||(b.computed={});Object.keys(i).forEach(function(w){var $=i[w];k[w]=function(){return $}})}return{esModule:y,exports:u,options:b}}},function(e,a){e.exports={render:function(){var o=this,r=o.$createElement;return(o._self._c||r)("input",{directives:[{name:"mask",rawName:"v-mask",value:o.config,expression:"config"}],attrs:{type:"text"},domProps:{value:o.display},on:{input:o.onInput}})},staticRenderFns:[]}},function(e,a,o){e.exports=o(3)}])})})(z);var B=z.exports;const se={directives:{mask:B.mask},computed:{...q(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},watch:{"clientForm.current_payed":{handler(l){this.clientForm.payed_percent=Math.round(this.clientForm.current_payed/this.cartTotalPrice*100)},deep:!0}},data(){return{tab:0,step:0,discount:0,self_clients:[],clientForm:{id:null,name:null,phone:null,email:null,info:null,promo:null,work_with_nds:1,items:[],current_payed:0,payed_percent:0,delivery_terms:null}}},mounted(){this.loadSelfClients()},methods:{hasRoles(l){let s=!1;return typeof l=="object"?this.$page.props.auth.roles.forEach(e=>{s=s||l.includes(e)}):this.$page.props.auth.roles.includes(l),s},back(){this.$emit("back")},preparedLawStatus(l){let e=(this.getDictionary.statuses||[]).find(a=>a.value===l)||null;return e?e.title:null},selectInfo(l){if(l==null){this.clientForm.id=null,this.clientForm.name=null,this.clientForm.email=null,this.clientForm.phone=null;return}this.clientForm.id=l.id||null,this.clientForm.name=l.title||null,this.clientForm.email=l.email||null,this.clientForm.phone=l.phone||null},clearCart(){this.$store.dispatch("clearCart").then(l=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"})}).catch(l=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(l=>{this.discount=l.discount||0})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(l=>{this.self_clients=l.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let l=new FormData;Object.keys(this.clientForm).forEach(s=>{const e=this.clientForm[s]||"";typeof e=="object"?l.append(s,JSON.stringify(e)):l.append(s,e)}),l.append("total_price",this.cartTotalPrice),l.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:l}).then(s=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},oe={class:"input-group mb-3"},ne={class:"form-floating"},re=t("label",{for:"checkout-name"},"Ваше Ф.И.О.",-1),ae={key:0,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ie=t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"},null,-1),le=[ie],ce={class:"dropdown-menu dropdown-menu-end rounded-0"},de=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ue=["onClick"],me={class:"form-floating mb-3"},he=t("label",{for:"checkout-phone"},"Ваш номер телефона",-1),fe={class:"form-floating mb-3"},pe=t("label",{for:"checkout-email"},"Ваш email",-1),ve={class:"form-floating"},_e=t("label",{for:"checkout-info"},"Дополнительная информация",-1),ye={class:"row my-3"},be={class:"col-md-6"},ge={class:"form-check"},ke=t("label",{class:"form-check-label",for:"work-with-nds"}," Для ООО ",-1),we={class:"col-md-6"},$e={class:"form-check"},Ce=t("label",{class:"form-check-label",for:"work-without-nds"}," Для ИП ",-1),Fe=t("hr",{class:"hr hr-blurry my-3"},null,-1),De={class:"font-bold"},Te={key:0},xe=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),Ee=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),Pe={class:"form-floating mb-3"},Se=t("label",{for:"checkout-promo"},"Промокод",-1),je={key:0},Le={class:"form-floating mb-3"},Me=t("label",{for:"checkout-name"},"Начальная внесенная покупателем сумма, руб",-1),Ve={class:"form-floating mb-3"},qe=t("label",{for:"checkout-name"},"Процент внесенной суммы от полной стоимости",-1),Ue={class:"form-floating mb-3"},Ie=t("label",{for:"checkout-name"},"Срок передачи товара покупателю",-1),Re=t("button",{class:"btn btn-dark w-100 my-2 rounded-0"},"Отправить и скачать договор",-1),Ne={key:1,class:"btn btn-dark w-100 my-2 rounded-0"},Oe={key:1,class:"card rounded-0"},Ae=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),ze=[Ae];function Be(l,s,e,a,o,r){const d=X("mask");return l.cartTotalCount>0?(n(),m("form",{key:0,onSubmit:s[13]||(s[13]=Y((...i)=>r.submit&&r.submit(...i),["prevent"]))},[t("div",oe,[t("div",ne,[T(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=i=>o.clientForm.name=i),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[E,o.clientForm.name]]),re]),o.self_clients.length>0?(n(),m("button",ae,le)):c("",!0),t("ul",ce,[t("li",null,[t("a",{class:"dropdown-item",onClick:s[1]||(s[1]=i=>r.selectInfo(null)),href:"javascript:void(0)"},"Не выбрано")]),de,t("li",null,[(n(!0),m(L,null,O(o.self_clients,i=>(n(),m("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:y=>r.selectInfo(i)},_(i.title||null)+" ("+_(r.preparedLawStatus(i.status)||"Не указан")+")",9,ue))),256))])])]),t("div",me,[T(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=i=>o.clientForm.phone=i),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[d,"+7(###)###-##-##"],[E,o.clientForm.phone]]),he]),t("div",fe,[T(t("input",{type:"email",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=i=>o.clientForm.email=i),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[E,o.clientForm.email]]),pe]),t("div",ve,[T(t("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":s[4]||(s[4]=i=>o.clientForm.info=i),placeholder:"Оставьте свой комментарий",id:"checkout-info"},null,512),[[E,o.clientForm.info]]),_e]),t("div",ye,[t("div",be,[t("div",ge,[T(t("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":s[5]||(s[5]=i=>o.clientForm.work_with_nds=i),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[I,o.clientForm.work_with_nds]]),ke])]),t("div",we,[t("div",$e,[T(t("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":s[6]||(s[6]=i=>o.clientForm.work_with_nds=i),id:"work-without-nds"},null,512),[[I,o.clientForm.work_with_nds]]),Ce])])]),Fe,t("h6",De,[h("Итого цена "+_(Math.round(l.cartTotalPrice*(1-o.discount/100)))+" ₽ ",1),o.discount>0?(n(),m("span",Te,"(скидка "+_(o.discount)+"%)",1)):c("",!0)]),xe,Ee,t("div",Pe,[T(t("input",{type:"text",class:"form-control",onKeyup:s[7]||(s[7]=(...i)=>r.findPromo&&r.findPromo(...i)),"onUpdate:modelValue":s[8]||(s[8]=i=>o.clientForm.promo=i),id:"checkout-promo",placeholder:"name@example.com"},null,544),[[E,o.clientForm.promo]]),Se]),r.hasRoles(["manager","administrator"])?(n(),m("div",je,[h(_(o.clientForm.client)+" ",1),t("div",Le,[T(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=i=>o.clientForm.current_payed=i),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[E,o.clientForm.current_payed]]),Me]),t("div",Ve,[T(t("input",{type:"text",disabled:"",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=i=>o.clientForm.payed_percent=i),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[E,o.clientForm.payed_percent]]),qe]),t("div",Ue,[T(t("input",{type:"date",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=i=>o.clientForm.delivery_terms=i),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[E,o.clientForm.delivery_terms]]),Ie]),Re])):(n(),m("button",Ne,"Отправить")),t("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0",onClick:s[12]||(s[12]=(...i)=>r.back&&r.back(...i))},"Назад ")],32)):(n(),m("div",Oe,ze))}const Qe=A(se,[["render",Be]]),Ze={props:["item"],methods:{editDoorItem(){window.dispatchEvent(new CustomEvent("select-door-item",{detail:{item:this.item}}))},removeProduct(){this.$store.dispatch("removeProduct",this.item.product.id)},changeQuantityProductInCart(l="increment"){let s=l==="increment"?this.item.quantity+1:this.item.quantity-1;if(s===0){this.$store.dispatch("removeProduct",this.item.product.id);return}this.$store.dispatch("setQuantity",{id:this.item.product.id,quantity:s})}}},Ge={class:"card mb-2 rounded-0"},Je={class:"card-body"},Ke={class:"row"},Xe={class:"col-md-12"},Ye={class:"text-muted font-bold"},He={class:"text-black mb-0"},We={key:0},et={key:1,class:"ml-1"},tt={key:2,class:"ml-1"},st={key:3},ot={key:4,class:"ml-1"},nt={key:5,class:"ml-1"},rt={key:6,class:"ml-1"},at={key:7,class:"ml-1"},it={key:8,class:"ml-1"},lt={key:9,class:"ml-1"},ct={key:10,class:"ml-1"},dt={key:11,class:"ml-1"},ut={key:12,class:"ml-1"},mt={key:13,class:"ml-1"},ht={key:14,class:"ml-1"},ft={key:15,class:"ml-1"},pt={key:16,class:"ml-1"},vt={class:"row d-flex align-items-center"},_t={class:"col-5 col-md-5 col-lg-5 col-xl-5 d-flex justify-content-center mt-2"},yt=t("i",{class:"fas fa-minus"},null,-1),bt=[yt],gt={class:"btn",style:{color:"black"}},kt=t("i",{class:"fas fa-plus"},null,-1),wt=[kt],$t={class:"col-5 col-md-5 col-lg-5 col-xl-5"},Ct={class:"mb-0 text-center font-bold"},Ft={class:"col-2 col-md-2 col-lg-2 col-xl-2 text-center"},Dt=t("i",{class:"fas fa-times"},null,-1),Tt=[Dt],xt={class:"col-12"},Et=t("i",{class:"fa-regular fa-pen-to-square mr-2"},null,-1);function Pt(l,s,e,a,o,r){return n(),m("div",Ge,[t("div",Je,[t("div",Ke,[t("div",Xe,[t("h6",Ye,_(e.item.product.purpose||"-")+": "+_(e.item.product.door_type.title)+" "+_(e.item.product.width)+"x"+_(e.item.product.height)+"x"+_(e.item.product.depth),1),t("h6",He,[e.item.product.box_and_frame_color.title?(n(),m("span",We,"("+_(e.item.product.box_and_frame_color.title)+")",1)):c("",!0),h(" лицо "),e.item.product.front_side_finish.title?(n(),m("span",et,_(e.item.product.front_side_finish.title),1)):c("",!0),h("/ "),e.item.product.back_side_finish.title?(n(),m("span",tt,_(e.item.product.back_side_finish.title)+",",1)):c("",!0),h(" петли "),e.item.product.loops.title?(n(),m("span",st,_(e.item.product.loops.title)+",",1)):c("",!0),e.item.product.hinge_manufacturer.title?(n(),m("span",ot,_(e.item.product.hinge_manufacturer.title)+",",1)):c("",!0),e.item.product.fittings_color.title?(n(),m("span",nt,"("+_(e.item.product.fittings_color.title)+"),",1)):c("",!0),e.item.product.opening_type.title?(n(),m("span",rt,_(e.item.product.opening_type.title)+",",1)):c("",!0),e.item.product.handle_holes.title?(n(),m("span",at,_(e.item.product.handle_holes.title)+",",1)):c("",!0),e.item.product.need_automatic_doorstep?(n(),m("span",it," автоматический порожек,")):c("",!0),e.item.product.need_upper_jumper?(n(),m("span",lt," верхняя перемычка,")):c("",!0),e.item.product.need_handle_holes?(n(),m("span",ct," дверная ручка,")):c("",!0),e.item.product.handle_holes_type.title?(n(),m("span",dt,_(e.item.product.handle_holes_type.title)+",",1)):c("",!0),e.item.product.handle_holes.title?(n(),m("span",ut,_(e.item.product.handle_holes.title)+",",1)):c("",!0),e.item.product.need_hidden_door_closer?(n(),m("span",mt," скрытый доводчик,")):c("",!0),e.item.product.need_hidden_skirting_board?(n(),m("span",ht," скрытый плинтус,")):c("",!0),e.item.product.need_hidden_stopper?(n(),m("span",ft," скрытый стопор,")):c("",!0),e.item.product.need_door_install?(n(),m("span",pt," установка двери")):c("",!0)])])]),t("div",vt,[t("div",_t,[t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:s[0]||(s[0]=d=>r.changeQuantityProductInCart("decrement"))},bt),t("span",gt,_(e.item.quantity),1),t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:s[1]||(s[1]=d=>r.changeQuantityProductInCart("increment"))},wt)]),t("div",$t,[t("h6",Ct,_(e.item.quantity*(e.item.product.price||0))+" ₽",1)]),t("div",Ft,[t("a",{href:"javascript:void(0)",onClick:s[2]||(s[2]=(...d)=>r.removeProduct&&r.removeProduct(...d)),class:"text-muted"},Tt)]),t("div",xt,[t("button",{type:"button",style:{color:"black"},class:"btn btn-link",onClick:s[3]||(s[3]=(...d)=>r.editDoorItem&&r.editDoorItem(...d))},[Et,h("Редактировать")])])])])])}const St=A(Ze,[["render",Pt]]),jt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"cart","aria-labelledby":"cart"},Lt={class:"offcanvas-header"},Mt={class:"offcanvas-title font-bold"},Vt={key:0},qt={key:1},Ut=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),It={key:0,class:"offcanvas-body"},Rt=t("div",{class:"hr my-3"},null,-1),Nt={key:1,class:"card rounded-0"},Ot=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),At=[Ot],zt={key:1,class:"offcanvas-body"},Bt={key:2,class:"offcanvas-footer p-3"},Qt={class:"card rounded-0"},Zt={class:"card-body"},Gt={class:"font-bold"},Jt=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),Kt=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),Xt={key:0},Yt={directives:{mask:B.mask},computed:{...q(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},data(){return{tab:0,step:0,discount:0}},mounted(){},methods:{back(){this.step=0,this.tab=0},checkout(){this.step=1,this.tab=1},clearCart(){this.$store.dispatch("clearCart").then(l=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"}),window.dispatchEvent(new CustomEvent("clear-cart"))}).catch(l=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},downloadCartExcel(){let l=this.cartProducts,s=new FormData;s.append("items",JSON.stringify(l)),this.$store.dispatch("downloadExcel",{cardData:s}).then(e=>{var a=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.href=a,o.setAttribute("download","cart.xls"),document.body.appendChild(o),o.click(),this.$notify({title:"DoDoors",text:"Excel успешно скачан!",type:"success"})}).catch(e=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(l=>{this.self_clients=l.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let l=new FormData;Object.keys(this.clientForm).forEach(s=>{const e=this.clientForm[s]||"";typeof e=="object"?l.append(s,JSON.stringify(e)):l.append(s,e)}),l.append("total_price",this.cartTotalPrice),l.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:l}).then(s=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},Ht=Object.assign(Yt,{__name:"CalcCartSimple",setup(l){return(s,e)=>(n(),m("div",jt,[t("div",Lt,[t("h5",Mt,[s.tab===0?(n(),m("span",Vt,"Вы выбрали")):c("",!0),s.tab===1?(n(),m("span",qt,"Оформление заказа")):c("",!0)]),Ut]),s.tab===0?(n(),m("div",It,[s.cartProducts.length>0?(n(),m(L,{key:0},[(n(!0),m(L,null,O(s.cartProducts,a=>(n(),v(St,{item:a},null,8,["item"]))),256)),Rt,t("button",{onClick:e[0]||(e[0]=(...a)=>s.downloadCartExcel&&s.downloadCartExcel(...a)),class:"btn btn-dark rounded-0 w-100 mb-2"}," Скачать в виде Excel-файла "),t("button",{onClick:e[1]||(e[1]=(...a)=>s.clearCart&&s.clearCart(...a)),class:"btn btn-outline-secondary rounded-0 w-100 mb-2"}," Очистить корзину ")],64)):(n(),m("div",Nt,At))])):c("",!0),s.tab===1?(n(),m("div",zt,[s.step===1?(n(),v(Qe,{key:0,onBack:s.back},null,8,["onBack"])):c("",!0)])):c("",!0),s.cartProducts.length>0&&s.tab===0?(n(),m("div",Bt,[t("div",Qt,[t("div",Zt,[t("h6",Gt,"Итого цена "+_(s.cartTotalPrice)+" ₽",1),Jt,Kt,s.step===0?(n(),m("div",Xt,[t("button",{class:"btn btn-dark rounded-0 w-100 mb-2",onClick:e[2]||(e[2]=(...a)=>s.checkout&&s.checkout(...a))},"Обсудить заказ с менеджером "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[3]||(e[3]=(...a)=>s.checkout&&s.checkout(...a))},"Получить цену на почту "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[4]||(e[4]=(...a)=>s.checkout&&s.checkout(...a))},"Получить цену в Telegram ")])):c("",!0)])])])):c("",!0)]))}}),Wt={class:"min-h-screen bg-gray-100"},es={class:"bg-white border-b border-gray-100"},ts={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ss={class:"flex justify-between h-16"},os={class:"flex"},ns={class:"shrink-0 flex items-center"},rs={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},as={class:"badge bg-danger ml-1 rounded-full"},is={class:"hidden sm:flex sm:items-center sm:ms-6"},ls={class:"ms-3 relative"},cs={class:"inline-flex rounded-0"},ds={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-0 text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},us=t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),ms={class:"-me-2 flex items-center sm:hidden"},hs={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},fs={class:"pt-2 pb-3 space-y-1"},ps={class:"pt-4 pb-1 border-t border-gray-200"},vs={class:"px-4"},_s={class:"font-medium text-base text-gray-800"},ys={class:"font-medium text-sm text-gray-500"},bs={class:"mt-3 space-y-1"},gs=t("hr",null,null,-1),ks={class:"mt-3 space-y-1"},ws=t("i",{class:"fa-solid fa-lock"},null,-1),$s=t("i",{class:"fa-solid fa-lock"},null,-1),Cs={key:0,class:"bg-white shadow"},Fs={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Ds=W('<div class="container border-b border-gray-100"><footer class="py-3 my-4"><div class="d-flex justify-center"><img src="/images/logo.jpg" style="width:100px;" alt=""></div><p class="text-center text-muted">© 2024 DoDoors</p></footer></div>',1),Ts={key:0,class:"cart-fixed-btn"},xs={class:"btn rounded-0 shadow-lg","data-bs-toggle":"offcanvas",href:"#cart",role:"button","aria-controls":"cart"},Es=t("i",{class:"fa-solid fa-basket-shopping text-primary"},null,-1),Ps={class:"badge text-primary font-bold"},Ss={class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",tabindex:"-1",id:"main-side-admin-menu","aria-labelledby":"offcanvasExampleLabel"},js=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"}," DoDoors "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),Ls={class:"offcanvas-body"},Ms={class:"row"},Vs={class:"col-md-6"},qs=t("i",{class:"fa-solid fa-user-tie mr-2"},null,-1),Us={class:"col-md-6"},Is=t("i",{class:"fa-solid fa-screwdriver-wrench mr-2"},null,-1),Rs={class:"py-5"},Ns={key:0,class:"d-flex flex-col align-items-center"},Os={key:1,class:"d-flex flex-col align-items-center"},As={data(){return{menuTab:0}},computed:{...q(["getErrors","cartTotalCount","cartProducts"])},mounted(){},methods:{hasRoles(l){return(this.$page.props.auth.roles||[]).includes(l)},can(l){return(this.$page.props.auth.permissions||[]).includes(l)}}},Zs=Object.assign(As,{__name:"AuthenticatedLayout",setup(l){const s=N(!1);return(e,a)=>{const o=H("notifications");return n(),m(L,null,[t("div",null,[D(o,{position:"top right"}),t("div",Wt,[t("nav",es,[t("div",ts,[t("div",ss,[t("div",os,[t("div",ns,[D(M(V),{href:e.route("dashboard")},{default:f(()=>[D(Q,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),t("div",rs,[e.can("manage-views-adminmenu")?(n(),v(g,{key:0,"data-bs-toggle":"offcanvas",href:"#main-side-admin-menu",role:"button","aria-controls":"main-side-admin-menu"},{default:f(()=>[h(" Админ.меню ")]),_:1})):c("",!0),D(g,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:f(()=>[h(" Главная ")]),_:1},8,["href","active"]),e.cartTotalCount>0?(n(),v(g,{key:1,href:e.route("basket"),active:e.route().current("basket")},{default:f(()=>[h(" Корзина "),t("span",as,_(e.cartTotalCount),1)]),_:1},8,["href","active"])):c("",!0)])]),t("div",is,[t("div",ls,[D(te,{align:"right",width:"48"},{trigger:f(()=>[t("span",cs,[t("button",ds,[h(_(e.$page.props.auth.user.name)+" ",1),us])])]),content:f(()=>[D(R,{href:e.route("profile.edit")},{default:f(()=>[h(" Профиль")]),_:1},8,["href"]),D(R,{href:e.route("logout"),method:"post",as:"button"},{default:f(()=>[h(" Выход ")]),_:1},8,["href"])]),_:1})])]),t("div",ms,[t("button",{onClick:a[0]||(a[0]=r=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(n(),m("svg",hs,[t("path",{class:x({hidden:s.value,"inline-flex":!s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:x({hidden:!s.value,"inline-flex":s.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),t("div",{class:x([{block:s.value,hidden:!s.value},"sm:hidden"])},[t("div",fs,[D(F,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:f(()=>[h(" Главная страница ")]),_:1},8,["href","active"])]),t("div",ps,[t("div",vs,[t("div",_s,_(e.$page.props.auth.user.name),1),t("div",ys,_(e.$page.props.auth.user.email),1)]),t("div",bs,[D(F,{href:e.route("profile.edit")},{default:f(()=>[h(" Профиль")]),_:1},8,["href"]),D(F,{href:e.route("logout"),method:"post",as:"button"},{default:f(()=>[h(" Выход ")]),_:1},8,["href"]),gs]),t("div",ks,[e.can("manage-users")?(n(),v(F,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:f(()=>[h(" Пользователи ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-clients")?(n(),v(F,{key:1,class:"p-3"},{default:f(()=>[h(" Клиенты "),ws]),_:1})):c("",!0),e.can("manage-orders")?(n(),v(F,{key:2,class:"p-3"},{default:f(()=>[h(" Заказы "),$s]),_:1})):c("",!0),e.can("manage-materials")?(n(),v(F,{key:3,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:f(()=>[h(" Материалы ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-handles")?(n(),v(F,{key:4,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:f(()=>[h(" Ручки ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-hinges")?(n(),v(F,{key:5,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:f(()=>[h(" Петли ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-door-variants")?(n(),v(F,{key:6,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:f(()=>[h(" Типы дверей ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-colors")?(n(),v(F,{key:7,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:f(()=>[h(" Цвета ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-sizes")?(n(),v(F,{key:8,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:f(()=>[h(" Размеры ")]),_:1},8,["href","active"])):c("",!0)])])],2)]),e.$slots.header?(n(),m("header",Cs,[t("div",Fs,[P(e.$slots,"header")])])):c("",!0),t("main",null,[P(e.$slots,"default")])])]),Ds,e.cartTotalCount>0?(n(),m("div",Ts,[t("a",xs,[Es,t("span",Ps,_(e.cartTotalCount)+" шт.",1)])])):c("",!0),D(Ht),t("div",Ss,[js,t("div",Ls,[t("div",Ms,[t("div",Vs,[t("button",{class:x(["btn w-100 rounded-0",{"btn-dark":e.menuTab===0,"btn-outline-secondary":e.menuTab!==0}]),onClick:a[1]||(a[1]=r=>e.menuTab=0)},[qs,h("Общее ")],2)]),t("div",Us,[t("button",{class:x(["btn w-100 rounded-0",{"btn-dark":e.menuTab===1,"btn-outline-secondary":e.menuTab!==1}]),onClick:a[2]||(a[2]=r=>e.menuTab=1)},[Is,h("Админ ")],2)])]),t("div",Rs,[e.menuTab===0?(n(),m("nav",Ns,[e.can("manage-calc")?(n(),v(g,{key:0,class:"p-3",href:e.route("calc"),active:e.route().current("calc")},{default:f(()=>[h(" Калькулятор ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-clients")?(n(),v(g,{key:1,class:"p-3",href:e.route("clients"),active:e.route().current("clients")},{default:f(()=>[h(" Клиенты ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-clients")?(n(),v(g,{key:2,class:"p-3",href:e.route("documents"),active:e.route().current("documents")},{default:f(()=>[h(" Договора (Документы) ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-orders")?(n(),v(g,{key:3,class:"p-3",href:e.route("orders"),active:e.route().current("orders")},{default:f(()=>[h(" Заказы ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-promo-codes")?(n(),v(g,{key:4,class:"p-3",href:e.route("promo-codes"),active:e.route().current("promo-codes")},{default:f(()=>[h(" Промокоды ")]),_:1},8,["href","active"])):c("",!0)])):c("",!0),e.menuTab===1?(n(),m("nav",Os,[e.can("manage-users")?(n(),v(g,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:f(()=>[h(" Пользователи ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-roles")?(n(),v(g,{key:1,class:"p-3",href:e.route("roles"),active:e.route().current("roles")},{default:f(()=>[h(" Роли пользователей ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-permissions")?(n(),v(g,{key:2,class:"p-3",href:e.route("permissions"),active:e.route().current("permissions")},{default:f(()=>[h(" Разрешения пользователей ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-services")?(n(),v(g,{key:3,class:"p-3",href:e.route("services"),active:e.route().current("services")},{default:f(()=>[h(" Сервисы ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-materials")?(n(),v(g,{key:4,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:f(()=>[h(" Материалы ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-handles")?(n(),v(g,{key:5,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:f(()=>[h(" Ручки ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-hinges")?(n(),v(g,{key:6,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:f(()=>[h(" Петли ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-door-variants")?(n(),v(g,{key:7,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:f(()=>[h(" Типы дверей ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-colors")?(n(),v(g,{key:8,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:f(()=>[h(" Цвета ")]),_:1},8,["href","active"])):c("",!0),e.can("manage-sizes")?(n(),v(g,{key:9,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:f(()=>[h(" Размеры ")]),_:1},8,["href","active"])):c("",!0)])):c("",!0)])])])],64)}}});export{Qe as C,Zs as _,B as v};
