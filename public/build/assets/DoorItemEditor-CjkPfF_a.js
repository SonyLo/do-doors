import{o as d,c as a,b as t,p as F,e as h,n as L,t as u,F as y,r as b,k as re,f as v,g as M,m as Z,i as k,C as oe,v as U,a as N,j as ue,h as I,d as R,w as E}from"./app-CXxydIrL.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as pe}from"./RalColorSelector-DQ3IU25n.js";import{H as _e}from"./HandleDetail-C8-IPKQN.js";const fe={key:0,class:"row"},me={class:"col-12 mb-2"},ve={key:1,class:"row"},ge={class:"col-12 col-md-8"},ye={key:0,class:"upper-jumper d-flex justify-content-center align-items-center"},be=t("div",{class:"door-upper-jumper d-flex justify-content-center align-items-center"},[t("p",{class:"text-center",style:{"font-size":"12px"}},"1")],-1),Fe=[be],ke={style:{position:"relative","z-index":"5"}},we={class:"door-header"},$e={class:"door"},Ce=["src"],Ve={class:"height"},Se={class:"width"},ze={class:"door-but"},Ie={class:"height"},De={class:"depth"},Me={class:"door-backstage"},Ue={key:0,class:"skirting-board",style:{"font-size":"12px"}},je=t("p",null,"3",-1),Re=[je],Le=t("div",{class:"center"},null,-1),Ee={key:1,class:"skirting-board",style:{"font-size":"12px"}},Pe=t("p",null,"3",-1),Te=[Pe],Ae={class:"door-footer"},He={key:0,class:"doorstep d-flex justify-content-center align-items-center",style:{"font-size":"12px"}},Oe={class:"col-md-4 col-12"},qe={class:"list-group list-group-numbered rounded-0 cursor-pointer"},Be=t("li",{class:"list-group-item bg-dark text-white"},"Петли",-1),Ne={props:["modelValue","disabled"],data(){return{side:0,door:null}},watch:{door:{handler(r){this.$emit("update:modelValue",this.door)},deep:!0}},mounted(){this.door=this.modelValue},computed:{sideColor(){return this.side===0?this.door.front_side_finish_color.code:this.door.back_side_finish_color.code},selectedSideFinishImageForDoor(){let r=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[r].door_variants)return null;let e=this.door[r].door_variants.findIndex(o=>o.selected);return e===-1?null:this.door[r].door_variants[e].image},selectedSideFinishImageForWrapper(){let r=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[r].wrapper_variants)return null;let e=this.door[r].wrapper_variants.findIndex(o=>o.selected);return e===-1?null:this.door[r].wrapper_variants[e].image}}},We=Object.assign(Ne,{__name:"DoorPreview",setup(r){return(e,o)=>{var i;return d(),a(y,null,[e.door?(d(),a("div",fe,[t("div",me,[t("button",{class:F(["btn mr-2 rounded-0",{"btn-dark":e.side===0,"btn-outline-secondary":e.side!==0}]),onClick:o[0]||(o[0]=l=>e.side=0)}," Лицевая сторона ",2),t("button",{class:F(["btn rounded-0",{"btn-dark":e.side===1,"btn-outline-secondary":e.side!==1}]),onClick:o[1]||(o[1]=l=>e.side=1)}," Внутренняя сторона ",2)])])):h("",!0),e.door?(d(),a("div",ve,[t("div",ge,[t("div",{class:"stage w-100",style:L({"background-image":"url("+e.selectedSideFinishImageForWrapper+")"})},[e.door.need_upper_jumper?(d(),a("div",ye,Fe)):h("",!0),t("div",ke,[t("div",we,[e.door.need_hidden_door_closer?(d(),a("div",{key:0,class:F(["door-closer d-flex justify-content-center align-items-center",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 5 ",2)):h("",!0)]),t("div",$e,[t("img",{src:e.doorImage?e.doorImage:"/images/door-1.jpg",class:"w-100 h-100",style:{"object-fit":"cover"},alt:""},null,8,Ce),t("div",{class:"door-color",style:L({"background-color":e.sideColor||"transparent"})},null,4),t("div",Ve,[t("span",null,u(e.door.height),1)]),t("div",Se,[t("span",null,u(e.door.width),1)]),e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(d(),a("div",{key:0,class:F(["handle",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:L([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(images/handle-left.png)":"url(images/handle-right.png)"}])},"6 ",6)):h("",!0),e.door.loops.type?(d(),a("div",{key:1,class:F(["loops",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}])},[(d(!0),a(y,null,b(e.door.loops_count,l=>(d(),a("span",null,"7"))),256))],2)):h("",!0)]),t("div",ze,[t("div",Ie,[t("span",null,u(e.door.height),1)]),t("div",De,[t("span",null,u(((i=e.door.opening_type)==null?void 0:i.depth)||0),1)])])]),t("div",Me,[e.door.need_hidden_skirting_board?(d(),a("div",Ue,Re)):h("",!0),Le,e.door.need_hidden_skirting_board?(d(),a("div",Ee,Te)):h("",!0)]),t("div",Ae,[e.door.need_automatic_doorstep?(d(),a("div",He," 2 ")):h("",!0),e.door.need_hidden_stopper?(d(),a("div",{key:1,class:F(["stopper d-flex justify-content-center align-items-center",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 4 ",2)):h("",!0)])],4)]),t("div",Oe,[t("ul",qe,[t("li",{onClick:o[2]||(o[2]=l=>r.disabled?null:e.door.need_upper_jumper=!e.door.need_upper_jumper),class:F([{"bg-dark text-white":e.door.need_upper_jumper},"list-group-item"])},"Верхняя перемычка",2),t("li",{onClick:o[3]||(o[3]=l=>r.disabled?null:e.door.need_automatic_doorstep=!e.door.need_automatic_doorstep),class:F([{"bg-dark text-white":e.door.need_automatic_doorstep},"list-group-item"])},"Скрытый порог",2),t("li",{onClick:o[4]||(o[4]=l=>r.disabled?null:e.door.need_hidden_skirting_board=!e.door.need_hidden_skirting_board),class:F([{"bg-dark text-white":e.door.need_hidden_skirting_board},"list-group-item"])},"Скрытый плинтус",2),t("li",{onClick:o[5]||(o[5]=l=>r.disabled?null:e.door.need_hidden_stopper=!e.door.need_hidden_stopper),class:F([{"bg-dark text-white":e.door.need_hidden_stopper},"list-group-item"])},"Скрытый стопор",2),t("li",{onClick:o[6]||(o[6]=l=>r.disabled?null:e.door.need_hidden_door_closer=!e.door.need_hidden_door_closer),class:F([{"bg-dark text-white":e.door.need_hidden_door_closer},"list-group-item"])},"Скрытый доводчик",2),t("li",{onClick:o[7]||(o[7]=l=>r.disabled?null:e.door.need_handle_holes=!e.door.need_handle_holes),class:F([{"bg-dark text-white":e.door.need_handle_holes&&e.door.loops.type},"list-group-item"])},"Дверная ручка",2),Be])])])):h("",!0)],64)}}}),Qe={props:["item"],data(){return{need_select_door_variant:!0,need_select_wrapper_variant:!0}},watch:{need_select_door_variant:{handler(r){this.need_select_door_variant||(this.item.door_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0},need_select_wrapper_variant:{handler(r){this.need_select_wrapper_variant||(this.item.wrapper_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0}},methods:{selectSideFinish(r,e){this.item[r][e].selected||!1||this.item[r].forEach(i=>{i.selected&&delete i.selected}),this.item[r][e].selected=!this.item[r][e].selected,this.$emit("update:item",this.item)}}},Ge={class:"font-bold my-2"},Je={class:"row"},Ke={class:"col-12"},Xe={class:"form-check form-switch"},Ye=t("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру дверей ",-1),Ze={key:0,class:"row mb-2"},xe=t("div",{class:"col-12"},[t("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов дверей")],-1),eo={class:"col-lg-4 col-md-4 col-12 mb-2"},oo=["onClick"],to={class:"card-img-top",alt:"..."},so={class:"card-body"},ro={key:0,class:"font-bold"},io={key:1,class:"card-text"},lo={class:"row"},no={class:"col-12"},ao={class:"form-check form-switch"},co=t("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру материала вокруг двери ",-1),ho={key:1,class:"row mb-2"},uo=t("div",{class:"col-12"},[t("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов текстуры материала вокруг дверей")],-1),po={class:"col-lg-4 col-md-4 col-12 mb-2"},_o=["onClick"],fo={class:"card-img-top",alt:"..."},mo={class:"card-body"},vo={key:0,class:"font-bold"},go={key:1,class:"card-text"};function yo(r,e,o,i,l,s){const n=re("lazy");return d(),a(y,null,[t("h3",Ge,'Выбранный материал "'+u(o.item.title||"не указан")+'"',1),t("div",Je,[t("div",Ke,[t("div",Xe,[v(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=p=>l.need_select_door_variant=p),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[M,l.need_select_door_variant]]),Ye])])]),o.item.door_variants&&l.need_select_door_variant?(d(),a("div",Ze,[xe,(d(!0),a(y,null,b(o.item.door_variants,(p,g)=>(d(),a("div",eo,[t("div",{class:F(["card cursor-pointer",{"border-secondary shadow-lg":p.selected}]),onClick:c=>s.selectSideFinish("door_variants",g)},[v(t("img",to,null,512),[[n,p.image]]),t("div",so,[p.title?(d(),a("h6",ro,u(p.title||"не указано"),1)):h("",!0),p.description?(d(),a("p",io,u(p.description||"не указано"),1)):h("",!0)])],10,oo)]))),256))])):h("",!0),t("div",lo,[t("div",no,[t("div",ao,[v(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=p=>l.need_select_wrapper_variant=p),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[M,l.need_select_wrapper_variant]]),co])])]),o.item.wrapper_variants&&l.need_select_wrapper_variant?(d(),a("div",ho,[uo,(d(!0),a(y,null,b(o.item.wrapper_variants,(p,g)=>(d(),a("div",po,[t("div",{class:F(["card cursor-pointer",{"border-secondary shadow-lg":p.selected}]),onClick:c=>s.selectSideFinish("wrapper_variants",g)},[v(t("img",fo,null,512),[[n,p.image]]),t("div",mo,[p.title?(d(),a("h6",vo,u(p.title||"не указано"),1)):h("",!0),p.description?(d(),a("p",go,u(p.description||"не указано"),1)):h("",!0)])],10,_o)]))),256))])):h("",!0)],64)}const te=ie(Qe,[["render",yo]]);var B,bo=new Uint8Array(16);function le(){if(!B&&(B=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(bo)}const Fo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function de(r){return typeof r=="string"&&Fo.test(r)}var w=[];for(var G=0;G<256;++G)w.push((G+256).toString(16).substr(1));function x(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(w[r[e+0]]+w[r[e+1]]+w[r[e+2]]+w[r[e+3]]+"-"+w[r[e+4]]+w[r[e+5]]+"-"+w[r[e+6]]+w[r[e+7]]+"-"+w[r[e+8]]+w[r[e+9]]+"-"+w[r[e+10]]+w[r[e+11]]+w[r[e+12]]+w[r[e+13]]+w[r[e+14]]+w[r[e+15]]).toLowerCase();if(!de(o))throw TypeError("Stringified UUID is invalid");return o}var se,J,K=0,X=0;function ko(r,e,o){var i=e&&o||0,l=e||new Array(16);r=r||{};var s=r.node||se,n=r.clockseq!==void 0?r.clockseq:J;if(s==null||n==null){var p=r.random||(r.rng||le)();s==null&&(s=se=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),n==null&&(n=J=(p[6]<<8|p[7])&16383)}var g=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:X+1,f=g-K+(c-X)/1e4;if(f<0&&r.clockseq===void 0&&(n=n+1&16383),(f<0||g>K)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");K=g,X=c,J=n,g+=122192928e5;var _=((g&268435455)*1e4+c)%4294967296;l[i++]=_>>>24&255,l[i++]=_>>>16&255,l[i++]=_>>>8&255,l[i++]=_&255;var m=g/4294967296*1e4&268435455;l[i++]=m>>>8&255,l[i++]=m&255,l[i++]=m>>>24&15|16,l[i++]=m>>>16&255,l[i++]=n>>>8|128,l[i++]=n&255;for(var z=0;z<6;++z)l[i+z]=s[z];return e||x(l)}function wo(r){if(!de(r))throw TypeError("Invalid UUID");var e,o=new Uint8Array(16);return o[0]=(e=parseInt(r.slice(0,8),16))>>>24,o[1]=e>>>16&255,o[2]=e>>>8&255,o[3]=e&255,o[4]=(e=parseInt(r.slice(9,13),16))>>>8,o[5]=e&255,o[6]=(e=parseInt(r.slice(14,18),16))>>>8,o[7]=e&255,o[8]=(e=parseInt(r.slice(19,23),16))>>>8,o[9]=e&255,o[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,o[11]=e/4294967296&255,o[12]=e>>>24&255,o[13]=e>>>16&255,o[14]=e>>>8&255,o[15]=e&255,o}function $o(r){r=unescape(encodeURIComponent(r));for(var e=[],o=0;o<r.length;++o)e.push(r.charCodeAt(o));return e}var Co="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ne(r,e,o){function i(l,s,n,p){if(typeof l=="string"&&(l=$o(l)),typeof s=="string"&&(s=wo(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+l.length);if(g.set(s),g.set(l,s.length),g=o(g),g[6]=g[6]&15|e,g[8]=g[8]&63|128,n){p=p||0;for(var c=0;c<16;++c)n[p+c]=g[c];return n}return x(g)}try{i.name=r}catch{}return i.DNS=Co,i.URL=Vo,i}function So(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var o=0;o<e.length;++o)r[o]=e.charCodeAt(o)}return zo(Io(Do(r),r.length*8))}function zo(r){for(var e=[],o=r.length*32,i="0123456789abcdef",l=0;l<o;l+=8){var s=r[l>>5]>>>l%32&255,n=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);e.push(n)}return e}function ae(r){return(r+64>>>9<<4)+14+1}function Io(r,e){r[e>>5]|=128<<e%32,r[ae(e)-1]=e;for(var o=1732584193,i=-271733879,l=-1732584194,s=271733878,n=0;n<r.length;n+=16){var p=o,g=i,c=l,f=s;o=$(o,i,l,s,r[n],7,-680876936),s=$(s,o,i,l,r[n+1],12,-389564586),l=$(l,s,o,i,r[n+2],17,606105819),i=$(i,l,s,o,r[n+3],22,-1044525330),o=$(o,i,l,s,r[n+4],7,-176418897),s=$(s,o,i,l,r[n+5],12,1200080426),l=$(l,s,o,i,r[n+6],17,-1473231341),i=$(i,l,s,o,r[n+7],22,-45705983),o=$(o,i,l,s,r[n+8],7,1770035416),s=$(s,o,i,l,r[n+9],12,-1958414417),l=$(l,s,o,i,r[n+10],17,-42063),i=$(i,l,s,o,r[n+11],22,-1990404162),o=$(o,i,l,s,r[n+12],7,1804603682),s=$(s,o,i,l,r[n+13],12,-40341101),l=$(l,s,o,i,r[n+14],17,-1502002290),i=$(i,l,s,o,r[n+15],22,1236535329),o=C(o,i,l,s,r[n+1],5,-165796510),s=C(s,o,i,l,r[n+6],9,-1069501632),l=C(l,s,o,i,r[n+11],14,643717713),i=C(i,l,s,o,r[n],20,-373897302),o=C(o,i,l,s,r[n+5],5,-701558691),s=C(s,o,i,l,r[n+10],9,38016083),l=C(l,s,o,i,r[n+15],14,-660478335),i=C(i,l,s,o,r[n+4],20,-405537848),o=C(o,i,l,s,r[n+9],5,568446438),s=C(s,o,i,l,r[n+14],9,-1019803690),l=C(l,s,o,i,r[n+3],14,-187363961),i=C(i,l,s,o,r[n+8],20,1163531501),o=C(o,i,l,s,r[n+13],5,-1444681467),s=C(s,o,i,l,r[n+2],9,-51403784),l=C(l,s,o,i,r[n+7],14,1735328473),i=C(i,l,s,o,r[n+12],20,-1926607734),o=V(o,i,l,s,r[n+5],4,-378558),s=V(s,o,i,l,r[n+8],11,-2022574463),l=V(l,s,o,i,r[n+11],16,1839030562),i=V(i,l,s,o,r[n+14],23,-35309556),o=V(o,i,l,s,r[n+1],4,-1530992060),s=V(s,o,i,l,r[n+4],11,1272893353),l=V(l,s,o,i,r[n+7],16,-155497632),i=V(i,l,s,o,r[n+10],23,-1094730640),o=V(o,i,l,s,r[n+13],4,681279174),s=V(s,o,i,l,r[n],11,-358537222),l=V(l,s,o,i,r[n+3],16,-722521979),i=V(i,l,s,o,r[n+6],23,76029189),o=V(o,i,l,s,r[n+9],4,-640364487),s=V(s,o,i,l,r[n+12],11,-421815835),l=V(l,s,o,i,r[n+15],16,530742520),i=V(i,l,s,o,r[n+2],23,-995338651),o=S(o,i,l,s,r[n],6,-198630844),s=S(s,o,i,l,r[n+7],10,1126891415),l=S(l,s,o,i,r[n+14],15,-1416354905),i=S(i,l,s,o,r[n+5],21,-57434055),o=S(o,i,l,s,r[n+12],6,1700485571),s=S(s,o,i,l,r[n+3],10,-1894986606),l=S(l,s,o,i,r[n+10],15,-1051523),i=S(i,l,s,o,r[n+1],21,-2054922799),o=S(o,i,l,s,r[n+8],6,1873313359),s=S(s,o,i,l,r[n+15],10,-30611744),l=S(l,s,o,i,r[n+6],15,-1560198380),i=S(i,l,s,o,r[n+13],21,1309151649),o=S(o,i,l,s,r[n+4],6,-145523070),s=S(s,o,i,l,r[n+11],10,-1120210379),l=S(l,s,o,i,r[n+2],15,718787259),i=S(i,l,s,o,r[n+9],21,-343485551),o=j(o,p),i=j(i,g),l=j(l,c),s=j(s,f)}return[o,i,l,s]}function Do(r){if(r.length===0)return[];for(var e=r.length*8,o=new Uint32Array(ae(e)),i=0;i<e;i+=8)o[i>>5]|=(r[i/8]&255)<<i%32;return o}function j(r,e){var o=(r&65535)+(e&65535),i=(r>>16)+(e>>16)+(o>>16);return i<<16|o&65535}function Mo(r,e){return r<<e|r>>>32-e}function W(r,e,o,i,l,s){return j(Mo(j(j(e,r),j(i,s)),l),o)}function $(r,e,o,i,l,s,n){return W(e&o|~e&i,r,e,l,s,n)}function C(r,e,o,i,l,s,n){return W(e&i|o&~i,r,e,l,s,n)}function V(r,e,o,i,l,s,n){return W(e^o^i,r,e,l,s,n)}function S(r,e,o,i,l,s,n){return W(o^(e|~i),r,e,l,s,n)}var Uo=ne("v3",48,So);const jo=Uo;function Ro(r,e,o){r=r||{};var i=r.random||(r.rng||le)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){o=o||0;for(var l=0;l<16;++l)e[o+l]=i[l];return e}return x(i)}function Lo(r,e,o,i){switch(r){case 0:return e&o^~e&i;case 1:return e^o^i;case 2:return e&o^e&i^o&i;case 3:return e^o^i}}function Y(r,e){return r<<e|r>>>32-e}function Eo(r){var e=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var i=unescape(encodeURIComponent(r));r=[];for(var l=0;l<i.length;++l)r.push(i.charCodeAt(l))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,n=Math.ceil(s/16),p=new Array(n),g=0;g<n;++g){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=r[g*64+f*4]<<24|r[g*64+f*4+1]<<16|r[g*64+f*4+2]<<8|r[g*64+f*4+3];p[g]=c}p[n-1][14]=(r.length-1)*8/Math.pow(2,32),p[n-1][14]=Math.floor(p[n-1][14]),p[n-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<n;++_){for(var m=new Uint32Array(80),z=0;z<16;++z)m[z]=p[_][z];for(var D=16;D<80;++D)m[D]=Y(m[D-3]^m[D-8]^m[D-14]^m[D-16],1);for(var T=o[0],A=o[1],H=o[2],O=o[3],Q=o[4],q=0;q<80;++q){var ee=Math.floor(q/20),he=Y(T,5)+Lo(ee,A,H,O)+Q+e[ee]+m[q]>>>0;Q=O,O=H,H=Y(A,30)>>>0,A=T,T=he}o[0]=o[0]+T>>>0,o[1]=o[1]+A>>>0,o[2]=o[2]+H>>>0,o[3]=o[3]+O>>>0,o[4]=o[4]+Q>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,o[0]&255,o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,o[1]&255,o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,o[2]&255,o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,o[3]&255,o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,o[4]&255]}var Po=ne("v5",80,Eo);const To=Po;var ce={v1:ko,v3:jo,v4:Ro,v5:To};const Ao={key:0,class:"mb-2"},Ho={key:0,class:"dropdown-center"},Oo=t("i",{class:"fa-solid fa-palette"},null,-1),qo={key:0,class:"mb-0"},Bo={class:"dropdown-menu rounded-0"},No=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Wo=["onClick"],Qo=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Go={key:1,class:"input-group mb-3"},Jo={class:"form-floating"},Ko={for:"select-color-input"},Xo=t("i",{class:"fa-solid fa-palette"},null,-1),Yo=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-auto-close":"true","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Zo={class:"dropdown-menu dropdown-menu-end rounded-0"},xo=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),et=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ot=["onClick"],tt=["id"],st={class:"modal-dialog"},rt={class:"modal-content rounded-0"},it=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор цвета RAL"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),lt={class:"modal-body"},dt={props:["modelValue","filter"],data(){return{id:null,color:null,colorModal:null,colors:[]}},watch:{getRalColors:{handler(r){this.colors=this.getRalColors},deep:!0},color:{handler(r){let e=(this.color.title||"").toLowerCase();e.indexOf("ral")!==-1&&(e=e.substring(e.indexOf("ral")+3).trim()),e.length===4&&Object.keys(this.colors).forEach(o=>{this.colors[o].code===e&&(this.color.code=this.colors[o].color.hex,this.color.title=this.colors[o].names.en)})},deep:!0}},computed:{...Z(["getDictionary","getRalColors"]),filteredColors(){return this.getDictionary.color_variants.filter(e=>e.type===this.filter||e.type==="all")}},mounted(){this.id=ce.v4(),this.color=this.modelValue},methods:{invertHex(r){if(!r)return"#000000";var e=r.replace(/#/,""),o=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),l=parseInt(e.substr(4,2),16),s=(.2126*o+.7152*i+.0722*l)/255;return s>.5?"#000000":"#ffffff"},isHex(r){return/^#[0-9A-F]{6}$/i.test(r)},alert(r){this.$emit("invalid",r)},callbackSelectColor(r){this.color.title=r.names.en,this.color.code=r.color.hex,this.colorModal.hide()},loadRalColors(){this.$store.dispatch("loadRalColors")},openRalModal(){this.loadRalColors(),this.colorModal=new bootstrap.Modal(document.getElementById("select-ral-color-"+this.id),{}),this.colorModal.show()},selectColor(r){let e=null;r!=null&&(e={title:r.title||r.code,code:r.code||null,sizes:r.sizes,is_ral:!1,excludes:r.excludes||[],type:r.type||"all",assign_with_size:r.assign_with_size||!1},r.title.toLowerCase()==="ral"&&(this.loadRalColors(),e={title:"RAL",code:"RAL",is_ral:!0,sizes:r.sizes,excludes:r.excludes||[],type:r.type||"all",assign_with_size:r.assign_with_size||!1})),this.color=e||{title:null},document.querySelectorAll(".dropdown-menu").forEach(i=>{i.classList.remove("show")}),this.$emit("change",this.color),this.$emit("update:modelValue",this.color)}}},P=Object.assign(dt,{__name:"ColorSelector",setup(r){return(e,o)=>(d(),a(y,null,[e.color?(d(),a("div",Ao,[(e.color.code||null)!=="RAL"?(d(),a("div",Ho,[t("button",{style:L({"background-color":e.color.code,color:e.invertHex(e.color.code)}),class:"btn btn-outline-secondary w-100 rounded-0 custom-dropdown-btn text-left",type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},[t("span",{class:F([{"font-size-10":e.color.title},"mr-2"])},[Oo,k(),oe(e.$slots,"name")],2),e.color.title?(d(),a("p",qo,u(e.color.title),1)):h("",!0)],4),t("ul",Bo,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[0]||(o[0]=i=>e.selectColor(null))},"Не выбрано")]),No,t("li",null,[(d(!0),a(y,null,b(e.filteredColors,i=>(d(),a("a",{class:F(["dropdown-item",{"bg-primary text-white":e.color.title===i.title}]),onClick:l=>e.selectColor(i),href:"javascript:void(0)"},u(i.title),11,Wo))),256))]),Qo,t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[1]||(o[1]=(...i)=>e.openRalModal&&e.openRalModal(...i))},"Справочник цветов")])])])):h("",!0),(e.color.code||"").toLowerCase()==="ral"?(d(),a("div",Go,[e.isHex(e.color.title)?(d(),a("span",{key:0,class:"input-group-text border-secondary",style:L([{"background-color":e.color.title},{width:"40px","border-radius":"0px"}]),id:"basic-addon1"},null,4)):h("",!0),t("div",Jo,[v(t("input",{type:"text",onInvalid:o[2]||(o[2]=i=>e.alert("Вы не выбрали цвет")),"onUpdate:modelValue":o[3]||(o[3]=i=>e.color.title=i),class:"form-control",id:"select-color-input",required:""},null,544),[[U,e.color.title]]),t("label",Ko,[Xo,oe(e.$slots,"name")])]),Yo,t("ul",Zo,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[4]||(o[4]=i=>e.color={title:null})},"Не выбрано")]),xo,t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[5]||(o[5]=(...i)=>e.openRalModal&&e.openRalModal(...i))},"Выбор цвета RAL")]),et,t("li",null,[(d(!0),a(y,null,b(e.filteredColors,i=>(d(),a("a",{class:F(["dropdown-item",{"bg-primary text-white":e.color.title===i.title}]),onClick:l=>e.selectColor(i),href:"javascript:void(0)"},u(i.title),11,ot))),256))])])])):h("",!0)])):h("",!0),t("div",{class:"modal fade",id:"select-ral-color-"+e.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",st,[t("div",rt,[it,t("div",lt,[N(pe,{onSelect:e.callbackSelectColor},null,8,["onSelect"])])])])],8,tt)],64))}}),nt={props:["modelValue"],data(){return{door:null,searchQuery:""}},watch:{door:{handler(r){this.$emit("update:modelValue",this.door)},deep:!0}},computed:{...Z(["getDictionary"]),filteredItems(){return this.getDictionary.handle_holes_type_variants.filter(r=>r.title.toLowerCase().includes(this.searchQuery.toLowerCase()))}},mounted(){this.door=this.modelValue},methods:{reset(){this.door.handle_holes_type={title:null},this.searchQuery=""}}},at={"data-bs-toggle":"modal","data-bs-target":"#handlers-filter-modal",class:"card rounded-0 border-black cursor-pointer"},ct={class:"card-body px-2 py-1"},ht=t("label",{class:"font-size-10"},[t("i",{class:"fa-solid fa-ruler-vertical"}),k(" Выбор ручки")],-1),ut={key:0},pt={class:"modal fade",id:"handlers-filter-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_t={class:"modal-dialog modal-lg"},ft={class:"modal-content"},mt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Варианты ручек"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vt={key:0,class:"modal-body"},gt={class:"form-floating mb-3"},yt=t("label",{for:"searchInput"},"Поиск...",-1),bt={class:"list-group"},Ft=["onClick"];function kt(r,e,o,i,l,s){var n;return d(),a(y,null,[t("div",at,[t("div",ct,[ht,l.door?(d(),a("p",ut,u(((n=l.door.handle_holes_type)==null?void 0:n.title)||"не выбрано"),1)):h("",!0)])]),t("div",pt,[t("div",_t,[t("div",ft,[mt,l.door?(d(),a("div",vt,[t("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0 p-3 mb-2",onClick:e[0]||(e[0]=(...p)=>s.reset&&s.reset(...p))},"Не выбрано "),t("div",gt,[v(t("input",{type:"search",class:"form-control",id:"searchInput",placeholder:"Поиск...","onUpdate:modelValue":e[1]||(e[1]=p=>l.searchQuery=p)},null,512),[[U,l.searchQuery]]),yt]),t("div",bt,[(d(!0),a(y,null,b(s.filteredItems,p=>(d(),a("div",{key:p.title,class:F(["list-group-item cursor-pointer",{"list-group-item-primary":l.door.handle_holes_type===p}]),onClick:g=>l.door.handle_holes_type=p},u(p.title),11,Ft))),128))])])):h("",!0)])])])],64)}const wt=ie(nt,[["render",kt]]),$t={class:"col-md-6"},Ct={class:"row"},Vt={class:"col-md-6 col-12 mb-2"},St={class:"col-md-6 col-12"},zt={class:"input-group mb-2"},It={class:"form-floating"},Dt=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-signs-post"}),k(" Назначение двери")],-1),Mt=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Ut={class:"dropdown-menu dropdown-menu-end rounded-0"},jt=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Rt=["onClick"],Lt={class:"col-md-6 col-12"},Et={class:"input-group mb-2"},Pt={class:"form-floating"},Tt=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-ruler-vertical"}),k(" Высота, мм")],-1),At=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Ht={class:"dropdown-menu dropdown-menu-end rounded-0"},Ot=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),qt={class:"p-1"},Bt={class:"form-floating"},Nt=t("label",{for:"filtered-height"},"Фильтр высоты",-1),Wt=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Qt={class:"scrollable-menu p-2"},Gt=["onClick"],Jt={key:0,class:"text-center"},Kt={class:"col-md-6 col-12"},Xt={class:"input-group mb-2"},Yt={class:"form-floating"},Zt=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-ruler-horizontal"}),k(" Ширина, мм")],-1),xt=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),es={class:"dropdown-menu dropdown-menu-end rounded-0"},os=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ts={class:"p-1"},ss={class:"form-floating"},rs=t("label",{for:"filtered-height"},"Фильтр ширины",-1),is=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ls={class:"scrollable-menu p-2"},ds=["onClick"],ns={key:0,class:"text-center"},as={class:"col-md-6 col-12"},cs={class:"form-floating mb-2"},hs=t("option",{value:{title:null}},"Выберите один из вариантов",-1),us=["value"],ps=t("label",{for:"floatingSelect"},[t("i",{class:"fa-brands fa-openid"}),k(" Тип открытия двери и толщина")],-1),_s={class:"col-md-6 col-12"},fs={class:"form-floating mb-2"},ms=["value"],vs=t("label",{for:"door-type"},[t("i",{class:"fa-solid fa-door-open"}),k(" Выберите тип двери")],-1),gs={class:"col-md-6 col-12"},ys={class:"form-floating mb-2"},bs=["value"],Fs=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-industry"}),k(" Производитель петель")],-1),ks={class:"col-md-6 col-12"},ws={class:"form-floating mb-2"},$s=["value"],Cs=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-angles-left"}),k(" Сторона петель")],-1),Vs={class:"col-md-6 col-12 mb-2"},Ss={class:"input-group"},zs={class:"form-floating"},Is=t("option",{value:{title:null}},"Выберите один из вариантов",-1),Ds=["value"],Ms=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-paint-roller"}),k(" Отделка первой стороны ")],-1),Us=t("i",{class:"fa-solid fa-images"},null,-1),js=[Us],Rs={key:0,style:{"line-height":"100%"}},Ls=t("small",null,[t("em",null,[t("strong",{class:"text-danger"},"Внимание!"),k(" сочетание размера и материала не доступно для заказа!")])],-1),Es=[Ls],Ps={class:"col-md-6 col-12 mb-2"},Ts={key:1,class:"card rounded-0"},As=t("div",{class:"card-body p-3 disabled-element"},[t("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Hs=[As],Os={class:"col-md-6 col-12 mb-2"},qs={class:"input-group"},Bs={class:"form-floating"},Ns=t("option",{value:{title:null}},"Выберите один из вариантов",-1),Ws=["value"],Qs=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-paint-roller"}),k(" Отделка второй стороны")],-1),Gs=t("i",{class:"fa-solid fa-images"},null,-1),Js=[Gs],Ks={key:0,style:{"line-height":"100%"}},Xs=t("small",null,[t("em",null,[t("strong",{class:"text-danger"},"Внимание!"),k(" сочетание размера и материала не доступно для заказа!")])],-1),Ys=[Xs],Zs={class:"col-md-6 col-12 mb-2"},xs={key:1,class:"card rounded-0"},er=t("div",{class:"card-body p-3 disabled-element"},[t("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),or=[er],tr={class:"col-md-6 col-12"},sr={class:"col-md-6 col-12"},rr={class:"col-md-6 col-12"},ir={key:0,class:"col-md-6 col-12"},lr={class:"form-floating w-100"},dr=["value"],nr=t("label",{for:"door-service-painting"},"Выберите вариант",-1),ar={class:"col-12"},cr={class:"form-floating"},hr=t("label",{for:"door-comment"},"Комментарий к двери",-1),ur={key:0,class:"row py-3"},pr={class:"col-12 d-flex align-items-center"},_r={class:"form-check form-switch"},fr=t("label",{class:"form-check-label",for:"need-handle-holes"}," Нужна ручка \\ не нужна ручка ",-1),mr={key:0,class:"col-md-6 col-12"},vr={class:"form-floating mb-2"},gr=["value"],yr=t("label",{for:"floatingSelect"},"Отверстия под ручку",-1),br={key:1,class:"col-md-6 col-12"},Fr={key:2,class:"col-12 d-flex align-items-center"},kr={key:3,class:"col-12"},wr={class:"row"},$r={class:"col-12 d-flex justify-content-between"},Cr={class:"mb-2"},Vr={class:"col-lg-3 col-md-3 col-12 mb-2"},Sr=["href"],zr={style:{"min-height":"200px",display:"flex","justify-content":"center","align-items":"center"},class:"card-img-top object-fit-contain",alt:"..."},Ir={key:0,class:"card-body"},Dr={key:0,class:"font-bold"},Mr={key:1,class:"card-text"},Ur={key:4,class:"col-12"},jr=t("div",{class:"alert alert-warning rounded-0",role:"alert"},[t("p",null,"Вариантов изображений ручки нет")],-1),Rr=[jr],Lr={class:"col-12 d-flex align-items-center"},Er={class:"form-check form-switch"},Pr=t("label",{class:"form-check-label",for:"need-upper-jumper"}," Нужна верхняя перемычка ",-1),Tr={class:"col-12 d-flex align-items-center"},Ar={class:"form-check form-switch"},Hr=t("label",{class:"form-check-label",for:"need-automatic-doorstep"}," Нужен автоматический порог \\ не нужен ",-1),Or={key:5,class:"col-12 d-flex align-items-center"},qr={class:"form-floating w-100 my-3"},Br=["value"],Nr=t("label",{for:"door-service-doorstep"},"Выберите вариант",-1),Wr={class:"col-12 d-flex align-items-center"},Qr={class:"form-check form-switch"},Gr=t("label",{class:"form-check-label",for:"need-hidden-stopper"}," Нужен скрытый стопор \\ не нужен ",-1),Jr={key:6,class:"col-12 d-flex align-items-center"},Kr={class:"form-floating w-100 my-3"},Xr=["value"],Yr=t("label",{for:"door-service-stopper"},"Выберите вариант",-1),Zr={class:"col-12 d-flex align-items-center"},xr={class:"form-check form-switch"},ei=t("label",{class:"form-check-label",for:"need-hidden-door-closer"}," Нужен скрытый доводчик \\ не нужен ",-1),oi={key:7,class:"col-12 d-flex align-items-center"},ti={class:"form-floating w-100 my-3"},si=["value"],ri=t("label",{for:"door-service-door_closer"},"Выберите вариант",-1),ii={class:"col-12 d-flex align-items-center"},li={class:"form-check form-switch"},di=t("label",{class:"form-check-label",for:"need-hidden-skirting-board"}," Нужен скрытый плинтус \\ не нужен ",-1),ni={class:"col-12 d-flex align-items-center"},ai={class:"form-check form-switch"},ci=t("label",{class:"form-check-label",for:"need-door-install"}," Нужна установка двери \\ не нужна ",-1),hi={class:"col-12 d-flex align-items-center"},ui={class:"form-check form-switch"},pi=t("label",{class:"form-check-label",for:"need-door-wrapper"}," Нужна упаковка двери \\ не нужна ",-1),_i={class:"col-md-6"},fi={class:"preview"},mi={class:"card rounded-0 mt-3"},vi={class:"card-body"},gi=t("h6",null,"Характеристики",-1),yi={class:"text-muted font-bold"},bi={class:"text-black mb-0"},Fi={key:0,class:"mr-1"},ki={key:1,class:"mr-1"},wi={key:2,class:"mr-1"},$i={key:3,class:"mr-1"},Ci={key:4,class:"mr-1"},Vi={key:5,class:"mr-1"},Si={key:6,class:"mr-1"},zi={key:7,class:"mr-1"},Ii={key:1,class:"card rounded-0 mt-3"},Di={class:"card-body"},Mi={class:"table"},Ui=t("br",null,null,-1),ji={key:0},Ri=t("br",null,null,-1),Li={class:"col-12 mt-2"},Ei={class:"row bg-white"},Pi={class:"form-floating"},Ti=["value"],Ai=t("label",{for:"door-type"},"Тип цены",-1),Hi={key:0,class:"col-md-2"},Oi={class:"form-floating"},qi=t("label",{for:"floatingInput"},"Процент дилера",-1),Bi={class:"col-md-4 d-flex justify-between"},Ni=t("i",{class:"fa-solid fa-minus"},null,-1),Wi=[Ni],Qi={class:"input-group"},Gi=t("i",{class:"fa-solid fa-plus"},null,-1),Ji=[Gi],Ki={class:"col-md-2 d-flex justify-center align-items-center"},Xi={class:"text-center text-primary font-bold text-black",style:{"font-size":"16px"}},Yi={class:"col-md-2 d-flex"},Zi=["disabled"],xi=t("i",{class:"fa-solid fa-floppy-disk"},null,-1),el={class:"col-12"},ol=["onClick"],tl=t("strong",null,"Внимание!",-1),sl={key:1,class:"row"},rl=t("div",{class:"col-12"},[t("div",{class:"d-flex justify-content-center align-items-center flex-column",style:{"min-height":"500px"}},[t("h5",null,"Загружаем страничку...."),t("div",{class:"spinner-border my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])],-1),il=[rl],ll={class:"modal fade",id:"editor-confirm-dialog-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},dl={class:"modal-dialog modal-dialog-centered"},nl={class:"modal-content rounded-0"},al={class:"modal-body"},cl=t("div",{class:"d-flex justify-center p-3"},[t("img",{src:"/images/logo.png",style:{width:"100px"},alt:""})],-1),hl={class:"font-bold text-center py-3"},ul={class:"text-center pb-3"},pl={class:"row"},_l={class:"col-6"},fl={class:"col-6"},ml=["id"],vl={class:"modal-dialog modal-lg"},gl={class:"modal-content"},yl=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для первый стороны"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),bl={class:"modal-body"},Fl=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),kl=["id"],wl={class:"modal-dialog modal-lg"},$l={class:"modal-content"},Cl=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для второй стороны"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),Vl={class:"modal-body"},Sl=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),zl={class:"modal fade",id:"show-current-handle-details",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Il={class:"modal-dialog"},Dl={class:"modal-content"},Ml=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Просмотр деталей"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ul={class:"modal-body"},jl={name:"MyComponent",props:["door","editOrder"],data(){return{loaded:!1,selectedHandle:null,type_dictionary:{size:"Петли",handle_holes_type:"Ручка",opening_type:"Тип открытия двери и толщина",box_and_frame_color:"Цвет короба и каркаса",door_type:"Тип двери",front_side_finish_color:"Цвет отделки внешней стороны",back_side_finish_color:"Цвет отделки внутренней стороны",seal_color:"Цвет уплотнителя",fittings_color:"Цвет фурнитуры",hinge_manufacturer:"Производитель петель",front_side_finish:"Отделка внешней стороны",back_side_finish:"Отделка внутренней стороны",base:"База (под покраску)",service_doorstep:"Работа с порогом",service_painting:"Покраска фурнитуры",service_door_closer:"Работа с доводчиком",service_handle:"Услуги по монтажу ручки",service_stopper:"Работа со стопором"},tmp_prices:[],need_addition:!0,messages:[],filterHeight:null,filterWidth:null,selectedColorParam:null,loadedParams:!0,confirmModal:null,finishFrontVariantModal:null,finishBackVariantModal:null,colors:[],confirm:{title:null,message:null},color_sync_update:!1,doorForm:{id:null,width:0,height:0,depth:0,count:1,price:0,size:null,purpose:null,comment:null,dealer_percent:0,opening_type:{title:null},box_and_frame_color:{title:null},door_type:{title:null},front_side_finish:{title:null},back_side_finish:{title:null},front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:{title:null},loops_count:0,price_type:{title:null},hinge_manufacturer:{title:null},handle_holes:{title:null},handle_holes_type:{title:null},need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}}}},computed:{...Z(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"]),resultPrice(){return this.doorForm.price_type.id!==3?this.summaryPrice:this.summaryPriceWithDealer},summaryPriceWithDealer(){return Math.round((this.summaryPrice||0)*(1+(this.doorForm.dealer_percent||0)/100))},summaryPrice(){let r=0,e=null;this.tmp_prices=[];let o=this.doorForm.price_type.key;Object.keys(this.doorForm).forEach(c=>{let f=!1;if(c&&typeof this.doorForm[c]=="object"&&this.doorForm[c]!=null&&c!=="door_type"){if(c==="opening_type"&&this.doorForm[c].sizes){f=!0;let _=this.doorForm[c].sizes.findIndex(z=>z.width==this.doorForm.width&&z.height==this.doorForm.height),m=_===-1?0:this.doorForm[c].sizes[_].price[o];r+=parseInt(m||0),console.log("opening_type",m,c),this.tmp_prices.push({type:c,price:m})}if(c.indexOf("_color")!==-1&&this.doorForm[c].sizes&&!f){f=!0;let _=(this.doorForm[c]||{excludes:[]}).excludes.indexOf(c.substring(0,c.indexOf("_color")))!==-1,m=0;if(!this.doorForm[c].assign_with_size)m=_?0:this.doorForm[c].sizes[0].price[o];else{let z=this.doorForm[c].sizes.findIndex(D=>D.width==this.doorForm.width&&D.height==this.doorForm.height);m=z===-1||_?0:this.doorForm[c].sizes[z].price[o]}r+=parseInt(m||0),this.tmp_prices.push({type:c,price:m})}if(c==="hinge_manufacturer"&&this.doorForm[c].title!=null&&!f){f=!0;let _=this.doorForm[c].price[o],m=0;this.doorForm.size&&(m=this.doorForm.size.loops.count*_),r+=parseInt(m||0),this.tmp_prices.push({type:c,price:_,full_price:m})}if(c==="size"&&this.doorForm[c].loops.price&&!f){f=!0;let _=this.doorForm[c].loops.price[o];r+=parseInt(_||0),this.tmp_prices.push({type:c,price:_})}if(c==="service_painting"&&this.doorForm[c].title!=null&&!f){f=!0;let _=this.doorForm.fittings_color.is_ral?this.doorForm[c].price[o]:0,m=0;this.doorForm.size&&(m=(this.doorForm.size.loops.count+1)*_),r+=m||0,this.tmp_prices.push({type:c,price:_,full_price:m})}if(this.doorForm[c].price&&!f){let _=typeof this.doorForm[c].price=="object"?this.doorForm[c].price[o]||0:this.doorForm[c].price||0;r+=parseInt(_||0),this.tmp_prices.push({type:c,price:_})}}});let i=this.getDictionary.prices,l=0,s=!1,n=null;i.forEach(c=>{c.width===this.doorForm.width&&c.height===this.doorForm.height&&(s=!0,n=c)});let p=c=>{let f=typeof this.doorForm.door_type.price=="object"?this.doorForm.door_type.price[o]:this.doorForm.door_type.price,_=this.doorForm.door_type.id!==3?1:.8,m=this.doorForm.door_type.need_percent_price?c*f/100:c*_+f;return this.tmp_prices.push({type:"door_type",price:(m||0)>0?m:c}),(m||0)>0?m:c};if(s){e=n.materials.find(f=>f.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let c=typeof e.price=="object"?e.price[o]:e.price;this.tmp_prices.push({type:"base",price:c}),l=parseInt(p(c)),n.materials.forEach(f=>{if(f.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let _=typeof f.price=="object"?f.price[o]:f.price;l+=_,this.tmp_prices.push({type:"front_side_finish",price:_})}if(f.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let _=typeof f.price=="object"?f.price[o]:f.price;l+=_,this.tmp_prices.push({type:"back_side_finish",price:_})}})}else for(let c=0;c<i.length;c++)if(i[c].width>=this.doorForm.width&&i[c].height>=this.doorForm.height){e=i[c].materials.find(_=>_.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let f=typeof e.price=="object"?e.price[o]:e.price;this.tmp_prices.push({type:"base",price:f}),l=parseInt(p(f)),i[c].materials.forEach(_=>{if(_.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let m=typeof _.price=="object"?_.price[o]:_.price;l+=m,this.tmp_prices.push({type:"front_side_finish",price:m})}}),i[c].materials.forEach(_=>{if(_.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let m=typeof _.price=="object"?_.price[o]:_.price;l+=m,this.tmp_prices.push({type:"back_side_finish",price:m})}});break}return(c=>Math.round(parseInt(c)/10)*10)(r+l)},filteredHeight(){return this.getDictionary?this.filterHeight?this.getDictionary.size_variants.filter(r=>(""+r.height).indexOf(this.filterHeight)!==-1):this.getDictionary.size_variants:[]},filteredWidth(){return this.getDictionary?this.filterWidth?this.getDictionary.size_variants.filter(r=>(""+r.width).indexOf(this.filterWidth)!==-1):this.getDictionary.size_variants:[]}},watch:{doorForm:{handler(r){console.log("doorForm",this.doorForm),this.loadedParams=!1,this.$nextTick(()=>{this.loadedParams=!0})},deep:!0},"doorForm.fittings_color":{handler(r){if(this.doorForm.fittings_color.title==null)this.doorForm.service_painting={title:null};else{let e=this.getServiceByType("service_painting");this.doorForm.service_painting=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_stopper":{handler(r){if(!this.doorForm.need_hidden_stopper)this.doorForm.service_stopper={title:null};else{let e=this.getServiceByType("service_stopper");this.doorForm.service_stopper=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_door_closer":{handler(r){if(!this.doorForm.need_hidden_door_closer)this.doorForm.service_door_closer={title:null};else{let e=this.getServiceByType("service_door_closer");this.doorForm.service_door_closer=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_automatic_doorstep":{handler(r){if(!this.doorForm.need_automatic_doorstep)this.doorForm.service_doorstep={title:null};else{let e=this.getServiceByType("service_doorstep");this.doorForm.service_doorstep=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_handle_holes":{handler(r){this.doorForm.need_handle_holes||(this.doorForm.handle_holes=this.getDictionary.handle_holes_variants[0],this.doorForm.handle_holes_type={title:null})},deep:!0},"doorForm.opening_type":{handler(r){if(this.doorForm.opening_type){let e=this.getDictionary.opening_variants.find(o=>o.id===this.doorForm.opening_type.id);e&&(this.doorForm.depth=e.depth||0)}},deep:!0},summaryPriceWithDealer:{handler(r){this.doorForm.price=this.summaryPriceWithDealer},deep:!0},summaryPrice:{handler(r){this.doorForm.price=this.summaryPrice},deep:!0}},mounted(){this.detailsModal=new bootstrap.Modal(document.getElementById("show-current-handle-details"),{}),window.addEventListener("clear-cart",r=>{this.$store.dispatch("loadFormattedSizes").then(e=>{this.clearForm(),this.loaded=!0}).catch(()=>{})}),this.confirmModal=new bootstrap.Modal(document.getElementById("editor-confirm-dialog-modal"),{}),this.door?this.$store.dispatch("loadFormattedSizes").then(r=>{this.loaded=!1,this.$nextTick(()=>{let e=this.door.product?this.door.product:this.door.door;console.log(e),this.doorForm.id=this.editOrder?this.door.id:this.door.product.id,this.doorForm.width=e.width,this.doorForm.height=e.height,this.doorForm.depth=e.depth,this.doorForm.count=this.editOrder?this.door.count:e.quantity,this.doorForm.size=e.size,this.doorForm.purpose=e.purpose||"Входная",this.doorForm.handle_holes=e.handle_holes||{title:null},this.doorForm.handle_holes_type=e.handle_holes_type||{title:null},this.doorForm.opening_type=e.opening_type||{title:null},this.doorForm.box_and_frame_color=e.box_and_frame_color||{title:null},this.doorForm.door_type=e.door_type||{title:null},this.doorForm.front_side_finish=e.front_side_finish||{title:null},this.doorForm.back_side_finish=e.back_side_finish||{title:null},this.doorForm.front_side_finish_color=e.front_side_finish_color||{title:null},this.doorForm.back_side_finish_color=e.back_side_finish_color||{title:null},this.doorForm.seal_color=e.seal_color||{title:null},this.doorForm.fittings_color=e.fittings_color||{title:null},this.doorForm.loops=e.loops||{title:null},this.doorForm.loops_count=e.loops_count||0,this.doorForm.price_type=e.price_type||{title:null},this.doorForm.hinge_manufacturer=e.hinge_manufacturer||{title:null},this.doorForm.need_handle_holes=e.need_handle_holes||!0,this.doorForm.need_upper_jumper=e.need_upper_jumper||!0,this.doorForm.need_automatic_doorstep=e.need_automatic_doorstep||!1,this.doorForm.need_hidden_stopper=e.need_hidden_stopper||!1,this.doorForm.need_hidden_door_closer=e.need_hidden_door_closer||!1,this.doorForm.need_hidden_skirting_board=e.need_hidden_skirting_board||!1,this.doorForm.need_door_install=e.need_door_install||!1,this.doorForm.need_wrapper=e.need_wrapper||!0,this.doorForm.service_doorstep=e.service_doorstep||{title:null},this.doorForm.service_painting=e.service_painting||{title:null},this.doorForm.service_stopper=e.service_stopper||{title:null},this.doorForm.service_door_closer=e.service_door_closer||{title:null},this.doorForm.service_handle=e.service_handle||{title:null},this.loaded=!0})}).catch(()=>{}):this.$store.dispatch("loadFormattedSizes").then(r=>{this.clearForm(),this.loaded=!0}).catch(()=>{})},methods:{showDetails(r){this.selectedHandle=null,this.$nextTick(()=>{this.selectedHandle=r,this.detailsModal.show()})},loadRalColors(){this.$store.dispatch("loadRalColors")},openConfirmModal(r,e){this.confirm.title=r||null,this.confirm.message=e||null,this.confirmModal.show()},selectSideFinish(r,e,o){this.doorForm[r][e][o].selected||!1||this.doorForm[r][e].forEach(l=>{l.selected&&delete l.selected}),this.doorForm[r][e][o].selected=!this.doorForm[r][e][o].selected},priceForSide(r){let e=this.doorForm.price_type.key,o=0,i=null,l=this.getDictionary.prices;return this.doorForm.width===0&&this.doorForm.height===0?0:(l.forEach(s=>{this.doorForm.width===s.width&&this.doorForm.height===s.height&&(i=s)}),i&&i.materials&&i.materials.forEach(s=>{s.id===this.doorForm[r].id&&(s.price,o=typeof s.price=="object"?s.price[e]:s.price)}),o)},clearForm(){this.loaded=!1,this.confirmModal.hide(),this.$nextTick(()=>{const r={purpose:"Дверь "+(this.cartProducts.length+1),id:ce.v1(),count:1,width:this.getDictionary.size_variants[0].width,height:this.getDictionary.size_variants[0].height,size:this.getDictionary.size_variants[0],loops_count:this.getDictionary.size_variants[0].loops.count,handle_holes:this.getDictionary.handle_holes_variants[0],handle_holes_type:{title:null},opening_type:this.getDictionary.opening_variants[0],box_and_frame_color:{title:null},door_type:this.getDictionary.door_variants[0],front_side_finish:this.getDictionary.finishes_variants[0],back_side_finish:this.getDictionary.finishes_variants[0],front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:this.getDictionary.loops_variants[0],price_type:this.getDictionary.price_type_variants[1],hinge_manufacturer:this.getDictionary.hinge_manufacturer_variants[0],need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}};this.doorForm=r,this.loaded=!0})},selectDoorSize(r){if(r==null){this.doorForm.width=0,this.doorForm.height=0,this.doorForm.size=null,this.doorForm.loops_count=0;return}this.doorForm.width=r.width,this.doorForm.height=r.height,this.doorForm.size=r,this.doorForm.loops_count=r.loops.count},changeDoorCount(r){r==="add"&&this.doorForm.count++,r==="sub"&&this.doorForm.count>0&&this.doorForm.count--},selectFrontSideFinish(){(this.doorForm.front_side_finish.door_variants||[]).length!==0&&(this.finishFrontVariantModal=new bootstrap.Modal(document.getElementById("finish-front-variant-modal-"+this.doorForm.id),{}),this.finishFrontVariantModal.show())},selectBackSideFinish(){(this.doorForm.back_side_finish.door_variants||[]).length!==0&&(this.finishBackVariantModal=new bootstrap.Modal(document.getElementById("finish-back-variant-modal-"+this.doorForm.id),{}),this.finishBackVariantModal.show())},getServiceByType(r){if((this.getDictionary.services||[]).length===0)return[];let e=this.getDictionary.services.filter(o=>o.type===r&&o.is_active);return e.length>0?e.sort((o,i)=>i.order_position-o.order_position):[]},alert(r){this.messages.push(r)},removeMessage(r){this.messages.splice(r,1)},syncColors(r,e){if(e.title=="RAL")return;const o=[{color:"Silver",box_and_frame_color:{title:"Серебро",code:"#c0c0c0"},seal_color:{title:"Серый",code:"#808080"},fittings_color:{title:"Серебро",code:"#c0c0c0"}},{color:"Black",box_and_frame_color:{title:"Черный",code:"#000000"},seal_color:{title:"Черный",code:"#000000"},fittings_color:{title:"Черный",code:"#000000"}},{color:"Gold",box_and_frame_color:{title:"Золотой",code:"#ffd700"},seal_color:{title:"Бежевый",code:"#f5f5dc"},fittings_color:{title:"Золотой",code:"#ffd700"}}];this.color_sync_update=!0,this.$nextTick(()=>{this.color_sync_update=!1;let i=o.find(l=>l.color===e.title);this.doorForm.box_and_frame_color={assign_with_size:e.assign_with_size,code:i?i.box_and_frame_color.code:e.code,title:i?i.box_and_frame_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.seal_color={assign_with_size:e.assign_with_size,code:i?i.seal_color.code:e.code,title:i?i.seal_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.fittings_color={assign_with_size:e.assign_with_size,code:i?i.fittings_color.code:e.code,title:i?i.fittings_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type}})},submitForm(){if(this.messages=[],this.editOrder){let r=new FormData;Object.keys(this.doorForm).forEach(e=>{const o=this.doorForm[e]||"";typeof o=="object"?r.append(e,JSON.stringify(o)):r.append(e,o)}),this.$store.dispatch("editDoorInOrder",{doorForm:r}).then(e=>{this.$emit("callback"),this.resetForm()}).catch(e=>{});return}this.$store.dispatch("addProductToCart",{product:this.doorForm,price:this.summaryPrice}).then(()=>{this.confirm.title="Товар успешно добавлен в корзину",this.confirm.message="Очистить форму?",this.confirmModal.show(),this.$notify({title:"DoDoors",text:"Дверь успешно добавлена в корзину",type:"success"})})}}},Tl=Object.assign(jl,{setup(r){return(e,o)=>{var l;const i=re("lazy");return d(),a(y,null,[e.loaded?(d(),a("form",{key:0,class:"row",onSubmit:o[62]||(o[62]=ue((...s)=>e.submitForm&&e.submitForm(...s),["prevent"]))},[t("div",$t,[t("div",Ct,[t("div",Vt,[t("button",{type:"button",onClick:o[0]||(o[0]=s=>e.openConfirmModal("Внимание!","Вы очищает текущую работу в калькуляторе! Продолжить?")),class:"btn rounded-0 w-100 btn-dark p-3"},"Очистить форму ")]),t("div",St,[t("div",zt,[t("div",It,[v(t("input",{type:"text",min:"0","onUpdate:modelValue":o[1]||(o[1]=s=>e.doorForm.purpose=s),class:"form-control",id:"floatingInput"},null,512),[[U,e.doorForm.purpose]]),Dt]),Mt,t("ul",Ut,[t("li",null,[t("a",{class:"dropdown-item",onClick:o[2]||(o[2]=s=>e.doorForm.purpose=null),href:"javascript:void(0)"},"Не выбрано")]),jt,t("li",null,[(d(!0),a(y,null,b(e.getDictionary.purpose_variants,s=>(d(),a("a",{class:F(["dropdown-item",{"bg-primary text-white":e.doorForm.purpose===s}]),onClick:n=>e.doorForm.purpose=s,href:"javascript:void(0)"},u(s),11,Rt))),256))])])])]),t("div",Lt,[t("div",Et,[t("div",Pt,[v(t("input",{type:"number",min:"0",onInvalid:o[3]||(o[3]=s=>e.alert("Вы не выбрали  ввели высоту двери!")),"onUpdate:modelValue":o[4]||(o[4]=s=>e.doorForm.height=s),class:"form-control",id:"floatingInput",required:""},null,544),[[U,e.doorForm.height]]),Tt]),At,t("ul",Ht,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[5]||(o[5]=s=>e.selectDoorSize(null))},"Не выбрано")]),Ot,t("li",qt,[t("div",Bt,[v(t("input",{type:"search","onUpdate:modelValue":o[6]||(o[6]=s=>e.filterHeight=s),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[U,e.filterHeight]]),Nt])]),Wt,t("li",Qt,[(d(!0),a(y,null,b(e.filteredHeight,s=>(d(),a("a",{class:F(["dropdown-item",{"bg-primary":e.doorForm.width===s.width&&e.doorForm.width===s.height}]),onClick:n=>e.selectDoorSize(s),href:"javascript:void(0)"},u(s.height)+"x"+u(s.width),11,Gt))),256)),e.filteredHeight.length===0?(d(),a("p",Jt,"Ничего не найдено")):h("",!0)])])])]),t("div",Kt,[t("div",Xt,[t("div",Yt,[v(t("input",{type:"number",min:"0",onInvalid:o[7]||(o[7]=s=>e.alert("Вы не выбрали  ввели ширину двери!")),"onUpdate:modelValue":o[8]||(o[8]=s=>e.doorForm.width=s),class:"form-control",id:"floatingInput",required:""},null,544),[[U,e.doorForm.width]]),Zt]),xt,t("ul",es,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[9]||(o[9]=s=>e.selectDoorSize(null))},"Не выбрано")]),os,t("li",ts,[t("div",ss,[v(t("input",{type:"search","onUpdate:modelValue":o[10]||(o[10]=s=>e.filterWidth=s),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[U,e.filterWidth]]),rs])]),is,t("li",ls,[(d(!0),a(y,null,b(e.filteredWidth,s=>(d(),a("a",{class:F(["dropdown-item",{"bg-primary text-white":e.doorForm.width===s.width&&e.doorForm.width===s.height}]),onClick:n=>e.selectDoorSize(s),href:"javascript:void(0)"},u(s.height)+"x"+u(s.width),11,ds))),256)),e.filteredWidth.length===0?(d(),a("p",ns,"Ничего не найдено")):h("",!0)])])])]),t("div",as,[t("div",cs,[v(t("select",{class:"form-select","onUpdate:modelValue":o[11]||(o[11]=s=>e.doorForm.opening_type=s),onInvalid:o[12]||(o[12]=s=>e.alert("Вы не выбрали вариант открывания и толщину двери!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[hs,(d(!0),a(y,null,b(e.getDictionary.opening_variants,s=>(d(),a("option",{value:s},u(s.title)+" (толщина "+u(s.depth)+" мм) ",9,us))),256))],544),[[I,e.doorForm.opening_type]]),ps])]),t("div",_s,[t("div",fs,[v(t("select",{class:"form-select","onUpdate:modelValue":o[13]||(o[13]=s=>e.doorForm.door_type=s),onInvalid:o[14]||(o[14]=s=>e.alert("Вы не выбрали тип двери!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(y,null,b(e.getDictionary.door_variants,s=>(d(),a("option",{value:s},u(s.title),9,ms))),256))],544),[[I,e.doorForm.door_type]]),vs])]),t("div",gs,[t("div",ys,[v(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=s=>e.doorForm.hinge_manufacturer=s),onInvalid:o[16]||(o[16]=s=>e.alert("Вы не выбрали расположение петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(y,null,b(e.getDictionary.hinge_manufacturer_variants,s=>(d(),a("option",{value:s},u(s.title),9,bs))),256))],544),[[I,e.doorForm.hinge_manufacturer]]),Fs])]),t("div",ks,[t("div",ws,[v(t("select",{class:"form-select","onUpdate:modelValue":o[17]||(o[17]=s=>e.doorForm.loops=s),onInvalid:o[18]||(o[18]=s=>e.alert("Вы не выбрали сторону петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(y,null,b(e.getDictionary.loops_variants,s=>(d(),a("option",{value:s},u(s.title),9,$s))),256))],544),[[I,e.doorForm.loops]]),Cs])]),t("div",Vs,[t("div",Ss,[t("div",zs,[v(t("select",{class:"form-select",onInvalid:o[19]||(o[19]=s=>e.alert("Вы не выбрали отделку первой стороны двери!")),"onUpdate:modelValue":o[20]||(o[20]=s=>e.doorForm.front_side_finish=s),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Is,(d(!0),a(y,null,b(e.getDictionary.finishes_variants,s=>(d(),a("option",{value:s},u(s.title),9,Ds))),256))],544),[[I,e.doorForm.front_side_finish]]),Ms]),(e.doorForm.front_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:o[21]||(o[21]=(...s)=>e.selectFrontSideFinish&&e.selectFrontSideFinish(...s)),class:"btn btn-outline-secondary rounded-0",type:"button"},js)):h("",!0)]),e.priceForSide("front_side_finish")===0?(d(),a("p",Rs,Es)):h("",!0)]),t("div",Ps,[e.doorForm.front_side_finish.title!=="Под покраску"?(d(),R(P,{key:0,filter:"front_side_finish_color",onInvalid:o[22]||(o[22]=s=>e.alert("Вы не выбрали цвет отделки первой стороны")),modelValue:e.doorForm.front_side_finish_color,"onUpdate:modelValue":o[23]||(o[23]=s=>e.doorForm.front_side_finish_color=s)},{name:E(()=>[k(" Цвет отделки первой стороны ")]),_:1},8,["modelValue"])):(d(),a("div",Ts,Hs))]),t("div",Os,[t("div",qs,[t("div",Bs,[v(t("select",{class:"form-select",onInvalid:o[24]||(o[24]=s=>e.alert("Вы не выбрали отделку второй стороны двери!")),"onUpdate:modelValue":o[25]||(o[25]=s=>e.doorForm.back_side_finish=s),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Ns,(d(!0),a(y,null,b(e.getDictionary.finishes_variants,s=>(d(),a("option",{value:s},u(s.title),9,Ws))),256))],544),[[I,e.doorForm.back_side_finish]]),Qs]),(e.doorForm.back_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:o[26]||(o[26]=(...s)=>e.selectBackSideFinish&&e.selectBackSideFinish(...s)),class:"btn btn-outline-secondary rounded-0",type:"button"},Js)):h("",!0)]),e.priceForSide("back_side_finish")===0?(d(),a("p",Ks,Ys)):h("",!0)]),t("div",Zs,[e.doorForm.back_side_finish.title!=="Под покраску"?(d(),R(P,{key:0,filter:"back_side_finish_color",onInvalid:o[27]||(o[27]=s=>e.alert("Вы не выбрали цвет отделки второй стороны")),modelValue:e.doorForm.back_side_finish_color,"onUpdate:modelValue":o[28]||(o[28]=s=>e.doorForm.back_side_finish_color=s)},{name:E(()=>[k(" Цвет отделки второй стороны ")]),_:1},8,["modelValue"])):(d(),a("div",xs,or))]),t("div",tr,[e.color_sync_update?h("",!0):(d(),R(P,{key:0,filter:"box_and_frame_color",onChange:o[29]||(o[29]=s=>e.syncColors("box_and_frame_color",s)),onInvalid:o[30]||(o[30]=s=>e.alert("Вы не выбрали цвет короба и каркаса")),modelValue:e.doorForm.box_and_frame_color,"onUpdate:modelValue":o[31]||(o[31]=s=>e.doorForm.box_and_frame_color=s)},{name:E(()=>[k(" Цвет короба и каркаса ")]),_:1},8,["modelValue"]))]),t("div",sr,[e.color_sync_update?h("",!0):(d(),R(P,{key:0,filter:"seal_color",onInvalid:o[32]||(o[32]=s=>e.alert("Вы не выбрали цвет уплотнителя")),modelValue:e.doorForm.seal_color,"onUpdate:modelValue":o[33]||(o[33]=s=>e.doorForm.seal_color=s)},{name:E(()=>[k(" Цвет уплотнителя ")]),_:1},8,["modelValue"]))]),t("div",rr,[e.color_sync_update?h("",!0):(d(),R(P,{key:0,filter:"fittings_color",onInvalid:o[34]||(o[34]=s=>e.alert("Вы не выбрали цвет фурнитуры")),modelValue:e.doorForm.fittings_color,"onUpdate:modelValue":o[35]||(o[35]=s=>e.doorForm.fittings_color=s)},{name:E(()=>[k(" Цвет фурнитуры ")]),_:1},8,["modelValue"]))]),e.doorForm.fittings_color.title!=null&&e.doorForm.fittings_color.is_ral?(d(),a("div",ir,[t("div",lr,[v(t("select",{class:"form-select","onUpdate:modelValue":o[36]||(o[36]=s=>e.doorForm.service_painting=s),id:"door-service-painting","aria-label":"Floating label select example"},[(d(!0),a(y,null,b(e.getServiceByType("service_painting"),s=>(d(),a("option",{value:s},u(s.title||"-"),9,dr))),256))],512),[[I,e.doorForm.service_painting]]),nr])])):h("",!0),t("div",ar,[t("div",cr,[v(t("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":o[37]||(o[37]=s=>e.doorForm.comment=s),style:{"min-height":"100px"},placeholder:"Оставьте комментарий",id:"door-comment"},null,512),[[U,e.doorForm.comment]]),hr])])]),e.need_addition?(d(),a("div",ur,[t("div",pr,[t("div",_r,[v(t("input",{class:"form-check-input","onUpdate:modelValue":o[38]||(o[38]=s=>e.doorForm.need_handle_holes=s),type:"checkbox",role:"switch",id:"need-handle-holes",checked:""},null,512),[[M,e.doorForm.need_handle_holes]]),fr])]),e.doorForm.need_handle_holes?(d(),a("div",mr,[t("div",vr,[v(t("select",{class:"form-select",onInvalid:o[39]||(o[39]=s=>e.alert("Вы не выбрали отверстие под ручку!")),"onUpdate:modelValue":o[40]||(o[40]=s=>e.doorForm.handle_holes=s),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(y,null,b(e.getDictionary.handle_holes_variants,s=>(d(),a("option",{value:s},u(s.title),9,gr))),256))],544),[[I,e.doorForm.handle_holes]]),yr])])):h("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",br,[N(wt,{modelValue:e.doorForm,"onUpdate:modelValue":o[41]||(o[41]=s=>e.doorForm=s)},null,8,["modelValue"])])):h("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",Fr)):h("",!0),(e.doorForm.handle_holes_type.variants||[]).length>0&&e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",kr,[t("div",wr,[t("div",$r,[t("p",Cr,[k('Цвет ручки "'+u(e.doorForm.handle_holes_type.color||"не указан")+'" ',1),e.doorForm.handle_holes_type.color?(d(),a("span",{key:0,class:"d-inline-block",style:L([{"background-color":e.doorForm.handle_holes_type.color},{width:"50px",height:"10px"}])},null,4)):h("",!0)]),t("a",{onClick:o[42]||(o[42]=s=>e.showDetails(e.doorForm.handle_holes_type)),href:"javascript:void(0)",class:"fst-italic cursor-pointer btn btn-link p-0"},"Дополнительные параметры ручки")]),(d(!0),a(y,null,b(e.doorForm.handle_holes_type.variants,(s,n)=>(d(),a("div",Vr,[t("div",{class:F(["card rounded-0 border-black",{"border-secondary shadow-lg":s.selected}])},[t("a",{href:s.image,target:"_blank"},[v(t("img",zr,null,512),[[i,s.image]])],8,Sr),s.title||s.description?(d(),a("div",Ir,[s.title?(d(),a("h6",Dr,u(s.title||"не указано"),1)):h("",!0),s.description?(d(),a("p",Mr,u(s.description||"не указано"),1)):h("",!0)])):h("",!0)],2)]))),256))])])):h("",!0),(e.doorForm.handle_holes_type.variants||[]).length===0&&e.doorForm.need_handle_holes?(d(),a("div",Ur,Rr)):h("",!0),t("div",Lr,[t("div",Er,[v(t("input",{class:"form-check-input","onUpdate:modelValue":o[43]||(o[43]=s=>e.doorForm.need_upper_jumper=s),type:"checkbox",role:"switch",id:"need-upper-jumper",checked:""},null,512),[[M,e.doorForm.need_upper_jumper]]),Pr])]),t("div",Tr,[t("div",Ar,[v(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[44]||(o[44]=s=>e.doorForm.need_automatic_doorstep=s),role:"switch",id:"need-automatic-doorstep",checked:""},null,512),[[M,e.doorForm.need_automatic_doorstep]]),Hr])]),e.doorForm.need_automatic_doorstep?(d(),a("div",Or,[t("div",qr,[v(t("select",{class:"form-select","onUpdate:modelValue":o[45]||(o[45]=s=>e.doorForm.service_doorstep=s),id:"door-service-doorstep","aria-label":"Floating label select example"},[(d(!0),a(y,null,b(e.getServiceByType("service_doorstep"),s=>(d(),a("option",{value:s},u(s.title||"-"),9,Br))),256))],512),[[I,e.doorForm.service_doorstep]]),Nr])])):h("",!0),t("div",Wr,[t("div",Qr,[v(t("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":o[46]||(o[46]=s=>e.doorForm.need_hidden_stopper=s),id:"need-hidden-stopper",checked:""},null,512),[[M,e.doorForm.need_hidden_stopper]]),Gr])]),e.doorForm.need_hidden_stopper?(d(),a("div",Jr,[t("div",Kr,[v(t("select",{class:"form-select","onUpdate:modelValue":o[47]||(o[47]=s=>e.doorForm.service_stopper=s),id:"door-service-stopper","aria-label":"Floating label select example"},[(d(!0),a(y,null,b(e.getServiceByType("service_stopper"),s=>(d(),a("option",{value:s},u(s.title||"-"),9,Xr))),256))],512),[[I,e.doorForm.service_stopper]]),Yr])])):h("",!0),t("div",Zr,[t("div",xr,[v(t("input",{class:"form-check-input","onUpdate:modelValue":o[48]||(o[48]=s=>e.doorForm.need_hidden_door_closer=s),type:"checkbox",role:"switch",id:"need-hidden-door-closer",checked:""},null,512),[[M,e.doorForm.need_hidden_door_closer]]),ei])]),e.doorForm.need_hidden_door_closer?(d(),a("div",oi,[t("div",ti,[v(t("select",{class:"form-select","onUpdate:modelValue":o[49]||(o[49]=s=>e.doorForm.service_door_closer=s),id:"door-service-door_closer","aria-label":"Floating label select example"},[(d(!0),a(y,null,b(e.getServiceByType("service_door_closer"),s=>(d(),a("option",{value:s},u(s.title||"-"),9,si))),256))],512),[[I,e.doorForm.service_door_closer]]),ri])])):h("",!0),t("div",ii,[t("div",li,[v(t("input",{class:"form-check-input","onUpdate:modelValue":o[50]||(o[50]=s=>e.doorForm.need_hidden_skirting_board=s),type:"checkbox",role:"switch",id:"need-hidden-skirting-board",checked:""},null,512),[[M,e.doorForm.need_hidden_skirting_board]]),di])]),t("div",ni,[t("div",ai,[v(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[51]||(o[51]=s=>e.doorForm.need_door_install=s),role:"switch",id:"need-door-install",checked:""},null,512),[[M,e.doorForm.need_door_install]]),ci])]),t("div",hi,[t("div",ui,[v(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[52]||(o[52]=s=>e.doorForm.need_wrapper=s),role:"switch",id:"need-door-wrapper",checked:""},null,512),[[M,e.doorForm.need_wrapper]]),pi])])])):h("",!0)]),t("div",_i,[t("div",fi,[e.loadedParams?(d(),R(We,{key:0,modelValue:e.doorForm,"onUpdate:modelValue":o[53]||(o[53]=s=>e.doorForm=s)},null,8,["modelValue"])):h("",!0),t("div",mi,[t("div",vi,[gi,t("h6",yi,u(e.doorForm.door_type.title)+" "+u(e.doorForm.width)+"x"+u(e.doorForm.height)+"x"+u(((l=e.doorForm.opening_type)==null?void 0:l.depth)||0),1),t("h6",bi,[e.doorForm.box_and_frame_color.title?(d(),a("span",Fi,"("+u(e.doorForm.box_and_frame_color.title)+"),",1)):h("",!0),e.doorForm.front_side_finish.title?(d(),a("span",ki,"первая сторона "+u(e.doorForm.front_side_finish.title)+", ",1)):h("",!0),e.doorForm.back_side_finish.title?(d(),a("span",wi,"/вторая сторона "+u(e.doorForm.back_side_finish.title)+",",1)):h("",!0),e.doorForm.loops.title?(d(),a("span",$i,"петли "+u(e.doorForm.loops.title),1)):h("",!0),e.doorForm.hinge_manufacturer.title?(d(),a("span",Ci,u(e.doorForm.hinge_manufacturer.title),1)):h("",!0),e.doorForm.fittings_color.title?(d(),a("span",Vi,"("+u(e.doorForm.fittings_color.title)+"),",1)):h("",!0),e.doorForm.opening_type.title?(d(),a("span",Si,u(e.doorForm.opening_type.title)+",",1)):h("",!0),e.doorForm.handle_holes.title?(d(),a("span",zi,u(e.doorForm.handle_holes.title),1)):h("",!0)])])]),e.tmp_prices.length>0?(d(),a("div",Ii,[t("div",Di,[t("table",Mi,[t("tbody",null,[(d(!0),a(y,null,b(e.tmp_prices,s=>(d(),a("tr",null,[t("td",null,[k(u(e.type_dictionary[s.type]||s.type)+" ",1),e.doorForm[s.type]?(d(),a(y,{key:0},[Ui,e.doorForm[s.type].description?(d(),a("small",ji,"("+u(e.doorForm[s.type].description)+")",1)):h("",!0)],64)):h("",!0)]),t("td",null,[k(u(s.price||0)+" руб. ",1),s.full_price?(d(),a(y,{key:0},[Ri,t("small",null,"("+u(s.full_price||0)+" руб.)",1)],64)):h("",!0)])]))),256))])])])])):h("",!0)])]),t("div",Li,[t("div",Ei,[t("div",{class:F({"col-md-2":e.doorForm.price_type.id===3,"col-md-4":e.doorForm.price_type.id!==3})},[t("div",Pi,[v(t("select",{class:"form-select","onUpdate:modelValue":o[54]||(o[54]=s=>e.doorForm.price_type=s),onInvalid:o[55]||(o[55]=s=>e.alert("Вы не выбрали тип цены!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(y,null,b(e.getDictionary.price_type_variants,s=>(d(),a("option",{value:s},u(s.title),9,Ti))),256))],544),[[I,e.doorForm.price_type]]),Ai])],2),e.doorForm.price_type.id===3?(d(),a("div",Hi,[t("div",Oi,[v(t("input",{type:"number",min:"0",onInvalid:o[56]||(o[56]=s=>e.alert("Вы не ввели процент дилера!")),"onUpdate:modelValue":o[57]||(o[57]=s=>e.doorForm.dealer_percent=s),class:"form-control text-center",id:"floatingInput",required:""},null,544),[[U,e.doorForm.dealer_percent]]),qi])])):h("",!0),t("div",Bi,[t("button",{type:"button",onClick:o[58]||(o[58]=s=>e.changeDoorCount("sub")),class:"btn btn-dark rounded-0 mr-2 px-3"},Wi),t("div",Qi,[v(t("input",{type:"number",onInvalid:o[59]||(o[59]=s=>e.alert("Вы не указали количество дверей")),"onUpdate:modelValue":o[60]||(o[60]=s=>e.doorForm.count=s),min:"1",value:"1",class:"form-control rounded-0 text-center"},null,544),[[U,e.doorForm.count]])]),t("button",{type:"button",onClick:o[61]||(o[61]=s=>e.changeDoorCount("add")),class:"btn btn-dark rounded-0 ml-2 px-3"},Ji)]),t("div",Ki,[t("p",Xi,u(e.resultPrice)+"х"+u(e.doorForm.count)+"="+u(e.resultPrice*e.doorForm.count)+"₽",1)]),t("div",Yi,[t("button",{disabled:!e.doorForm.price_type.key,class:"btn btn-dark rounded-0 w-100"},[xi,k(" Сохранить ")],8,Zi)])])]),t("div",el,[e.messages.length>0?(d(!0),a(y,{key:0},b(e.messages,(s,n)=>(d(),a("div",{onClick:p=>e.removeMessage(n),class:"alert alert-danger alert-dismissible fade show my-2",role:"alert"},[tl,k(" "+u(s||"Ошибка"),1)],8,ol))),256)):h("",!0)])],32)):(d(),a("div",sl,il)),t("div",ll,[t("div",dl,[t("div",nl,[t("div",al,[cl,t("h3",hl,u(e.confirm.title||"-"),1),t("p",ul,u(e.confirm.message||"-"),1),t("div",pl,[t("div",_l,[t("button",{class:"btn btn-dark rounded-0 w-100",type:"button",onClick:o[63]||(o[63]=(...s)=>e.clearForm&&e.clearForm(...s))},"Да, очистить ")]),t("div",fl,[t("button",{class:"btn btn-outline-secondary rounded-0 w-100",onClick:o[64]||(o[64]=s=>e.confirmModal.hide())},"Нет, не очищать ")])])])])])]),t("div",{class:"modal fade",id:"finish-front-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",vl,[t("div",gl,[yl,t("div",bl,[N(te,{item:e.doorForm.front_side_finish,"onUpdate:item":o[65]||(o[65]=s=>e.doorForm.front_side_finish=s)},null,8,["item"])]),Fl])])],8,ml),t("div",{class:"modal fade",id:"finish-back-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",wl,[t("div",$l,[Cl,t("div",Vl,[N(te,{item:e.doorForm.back_side_finish,"onUpdate:item":o[66]||(o[66]=s=>e.doorForm.back_side_finish=s)},null,8,["item"])]),Sl])])],8,kl),t("div",zl,[t("div",Il,[t("div",Dl,[Ml,t("div",Ul,[e.selectedHandle?(d(),R(_e,{key:0,"selected-handle":e.selectedHandle},null,8,["selected-handle"])):h("",!0)])])])])],64)}}});export{We as _,Tl as a,ce as u};
