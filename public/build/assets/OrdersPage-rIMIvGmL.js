import{_ as C}from"./AuthenticatedLayout-DBgM4VQ5.js";import{m as v,o as e,c as n,b as s,f as h,v as $,g as d,e as l,F as _,r as m,t as r,d as p,l as O,a as f,w as k,u as g,p as b,q as L,Z as j}from"./app-NdxZFBuQ.js";import{P as y}from"./Pagination-B0hBMUy8.js";import{E as w}from"./main-_oJDduGy.js";import"./ApplicationLogo-BwtCGJ6R.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-the-mask-D9zh-Vm5.js";const A={class:"row"},D={class:"col-12"},I={class:"input-group mb-3"},V={class:"form-floating"},P=s("label",{for:"search-orderDetails"},"Поиск по деталям заказа",-1),M=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),z=[M],E={class:"d-flex scrollable-area"},T={key:0,class:"table"},B={key:0},U=s("i",{class:"fa-solid fa-caret-down"},null,-1),N=[U],F={key:1},R=s("i",{class:"fa-solid fa-caret-up"},null,-1),S=[R],K={key:0},q=s("i",{class:"fa-solid fa-caret-down"},null,-1),G=[q],Z={key:1},H=s("i",{class:"fa-solid fa-caret-up"},null,-1),J=[H],Q={key:0},W=s("i",{class:"fa-solid fa-caret-down"},null,-1),X=[W],Y={key:1},x=s("i",{class:"fa-solid fa-caret-up"},null,-1),tt=[x],st={key:0},et=s("i",{class:"fa-solid fa-caret-down"},null,-1),ot=[et],nt={key:1},lt=s("i",{class:"fa-solid fa-caret-up"},null,-1),at=[lt],it={key:0},dt=s("i",{class:"fa-solid fa-caret-down"},null,-1),rt=[dt],ct={key:1},ut=s("i",{class:"fa-solid fa-caret-up"},null,-1),_t=[ut],ht={key:0},pt=s("i",{class:"fa-solid fa-caret-down"},null,-1),mt=[pt],ft={key:1},kt=s("i",{class:"fa-solid fa-caret-up"},null,-1),bt=[kt],vt={key:0},$t=s("i",{class:"fa-solid fa-caret-down"},null,-1),gt=[$t],yt={key:1},wt=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ct=[wt],Ot={key:0},Lt=s("i",{class:"fa-solid fa-caret-down"},null,-1),jt=[Lt],At={key:1},Dt=s("i",{class:"fa-solid fa-caret-up"},null,-1),It=[Dt],Vt=s("th",{scope:"col",class:"text-center"},"Действие",-1),Pt={scope:"row"},Mt=["onClick"],zt={class:"text-center"},Et={class:"text-center"},Tt={class:"text-center"},Bt={class:"text-center"},Ut={class:"text-center"},Nt={class:"text-center"},Ft={class:"text-center"},Rt={class:"dropdown"},St=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),Kt={class:"dropdown-menu"},qt=["onClick"],Gt=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),Zt=["onClick"],Ht=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),Jt={key:0,class:"alert alert-success",role:"alert"},Qt=s("h4",{class:"alert-heading"},"Детали заказа",-1),Wt=s("p",null,"К сожалению,в данном заказе нет деталей заказа",-1),Xt=[Qt,Wt],Yt={key:1,class:"row mb-3"},xt={class:"col-12"},ts={props:["orderId"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0,variants:[]}]}},computed:{...v(["getOrderDetails","getOrderDetailsPaginateObject"])},mounted(){this.loadOrderDetails()},methods:{sortAndLoad(i){this.sort.column=i,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadOrderDetails(this.current_page)},loadOrderDetails(i=0){this.current_page=i,this.$store.dispatch("loadOrderDetails",{dataObject:{order_id:this.orderId,search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getOrderDetails,this.paginate_object=this.getOrderDetailsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(i){this.$emit("select",i)},duplicateItem(i){this.$store.dispatch("duplicateOrderDetail",{orderDetailId:i}).then(()=>{this.sortAndLoad("id")})},removeItem(i){this.$store.dispatch("removeOrderDetail",{orderDetailId:i}).then(()=>{this.sortAndLoad("id")})}}},ss=Object.assign(ts,{__name:"OrderDetailTable",setup(i){return(t,a)=>(e(),n(_,null,[s("form",A,[s("div",D,[s("div",I,[s("div",V,[h(s("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=o=>t.search=o),class:"form-control",id:"search-orderDetails"},null,512),[[$,t.search]]),P]),s("button",{type:"button",onClick:a[1]||(a[1]=o=>t.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},z)])])]),s("div",E,[t.items.length>0?(e(),n("table",T,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=o=>t.sortAndLoad("id"))},[d("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),n("span",B,N)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),n("span",F,S)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[3]||(a[3]=o=>t.sortAndLoad("door_type"))},[d("Тип двери "),t.sort.direction==="desc"&&t.sort.column==="door_type"?(e(),n("span",K,G)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="door_type"?(e(),n("span",Z,J)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[4]||(a[4]=o=>t.sortAndLoad("count"))},[d("Кол-во "),t.sort.direction==="desc"&&t.sort.column==="count"?(e(),n("span",Q,X)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="count"?(e(),n("span",Y,tt)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[5]||(a[5]=o=>t.sortAndLoad("price"))},[d("Цена "),t.sort.direction==="desc"&&t.sort.column==="price"?(e(),n("span",st,ot)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="price"?(e(),n("span",nt,at)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[6]||(a[6]=o=>t.sortAndLoad("comment"))},[d("Комментарий "),t.sort.direction==="desc"&&t.sort.column==="comment"?(e(),n("span",it,rt)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="comment"?(e(),n("span",ct,_t)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[7]||(a[7]=o=>t.sortAndLoad("purpose"))},[d("Назначение двери "),t.sort.direction==="desc"&&t.sort.column==="purpose"?(e(),n("span",ht,mt)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="purpose"?(e(),n("span",ft,bt)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[8]||(a[8]=o=>t.sortAndLoad("door"))},[d("Параметры двери "),t.sort.direction==="desc"&&t.sort.column==="door"?(e(),n("span",vt,gt)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="door"?(e(),n("span",yt,Ct)):l("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[9]||(a[9]=o=>t.sortAndLoad("updated_at"))},[d(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),n("span",Ot,jt)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),n("span",At,It)):l("",!0)]),Vt])]),s("tbody",null,[(e(!0),n(_,null,m(t.items,(o,u)=>(e(),n("tr",null,[s("th",Pt,r(o.id||u),1),s("td",{class:"text-center",onClick:c=>t.selectItem(o)},r(o.door_type||"-"),9,Mt),s("td",zt,r(o.count||0),1),s("td",Et,r(o.price||0),1),s("td",Tt,r(o.comment||"-"),1),s("td",Bt,r(o.purpose||"-"),1),s("td",Ut,r(o.door||"-"),1),s("td",Nt,r(o.updated_at||"-"),1),s("td",Ft,[s("div",Rt,[St,s("ul",Kt,[s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.selectItem(o),href:"javascript:void(0)"},[Gt,d("Редактировать")],8,qt)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:c=>t.removeItem(o.id),href:"javascript:void(0)"},[Ht,d("Удалить")],8,Zt)])])])])]))),256))])])):l("",!0)]),t.items.length===0?(e(),n("div",Jt,Xt)):l("",!0),t.items.length>0?(e(),n("div",Yt,[s("div",xt,[t.paginate_object?(e(),p(y,{key:0,onPagination_page:t.loadOrderDetails,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0)],64))}}),es={class:"row"},os={class:"col-12"},ns={class:"input-group mb-3"},ls={class:"form-floating"},as=s("label",{for:"search-orders"},"Поиск по заказам",-1),is={class:"dropdown"},ds=s("button",{class:"btn btn-outline-secondary rounded-0 h-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),rs={class:"dropdown-menu"},cs=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),us=s("i",{class:"fa-regular fa-file-excel"},null,-1),_s={class:"col-12"},hs={class:"action-row"},ps=["onClick"],ms=["onClick"],fs={class:"col-12"},ks=["onClick"],bs=s("i",{class:"fa-solid fa-retweet"},null,-1),vs=[bs],$s=s("i",{class:"fa-solid fa-xmark"},null,-1),gs=[$s],ys={key:0,class:"my-2 small italic"},ws={class:"d-flex scrollable-area"},Cs={key:0,class:"table"},Os={key:0},Ls=s("i",{class:"fa-solid fa-caret-down"},null,-1),js=[Ls],As={key:1},Ds=s("i",{class:"fa-solid fa-caret-up"},null,-1),Is=[Ds],Vs={key:0},Ps=s("i",{class:"fa-solid fa-caret-down"},null,-1),Ms=[Ps],zs={key:1},Es=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ts=[Es],Bs={key:0},Us=s("i",{class:"fa-solid fa-caret-down"},null,-1),Ns=[Us],Fs={key:1},Rs=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ss=[Rs],Ks={key:0},qs=s("i",{class:"fa-solid fa-caret-down"},null,-1),Gs=[qs],Zs={key:1},Hs=s("i",{class:"fa-solid fa-caret-up"},null,-1),Js=[Hs],Qs={key:0},Ws=s("i",{class:"fa-solid fa-caret-down"},null,-1),Xs=[Ws],Ys={key:1},xs=s("i",{class:"fa-solid fa-caret-up"},null,-1),te=[xs],se={key:0},ee=s("i",{class:"fa-solid fa-caret-down"},null,-1),oe=[ee],ne={key:1},le=s("i",{class:"fa-solid fa-caret-up"},null,-1),ae=[le],ie={key:0},de=s("i",{class:"fa-solid fa-caret-down"},null,-1),re=[de],ce={key:1},ue=s("i",{class:"fa-solid fa-caret-up"},null,-1),_e=[ue],he={key:0},pe=s("i",{class:"fa-solid fa-caret-down"},null,-1),me=[pe],fe={key:1},ke=s("i",{class:"fa-solid fa-caret-up"},null,-1),be=[ke],ve={key:0},$e=s("i",{class:"fa-solid fa-caret-down"},null,-1),ge=[$e],ye={key:1},we=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ce=[we],Oe={key:0},Le=s("i",{class:"fa-solid fa-caret-down"},null,-1),je=[Le],Ae={key:1},De=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ie=[De],Ve={key:0},Pe=s("i",{class:"fa-solid fa-caret-down"},null,-1),Me=[Pe],ze={key:1},Ee=s("i",{class:"fa-solid fa-caret-up"},null,-1),Te=[Ee],Be={key:0},Ue=s("i",{class:"fa-solid fa-caret-down"},null,-1),Ne=[Ue],Fe={key:1},Re=s("i",{class:"fa-solid fa-caret-up"},null,-1),Se=[Re],Ke={key:0},qe=s("i",{class:"fa-solid fa-caret-down"},null,-1),Ge=[qe],Ze={key:1},He=s("i",{class:"fa-solid fa-caret-up"},null,-1),Je=[He],Qe={key:0},We=s("i",{class:"fa-solid fa-caret-down"},null,-1),Xe=[We],Ye={key:1},xe=s("i",{class:"fa-solid fa-caret-up"},null,-1),to=[xe],so={key:0},eo=s("i",{class:"fa-solid fa-caret-down"},null,-1),oo=[eo],no={key:1},lo=s("i",{class:"fa-solid fa-caret-up"},null,-1),ao=[lo],io=s("th",{scope:"col",class:"text-center"},"Действие",-1),ro={scope:"row"},co=["onClick"],uo=["onClick"],_o={key:2,class:"text-center"},ho={key:3,class:"text-center"},po={key:4,class:"text-center"},mo={key:0},fo={key:1},ko={key:5,class:"text-center"},bo={key:6,class:"text-center"},vo={key:7,class:"text-center"},$o={key:8,class:"text-center"},go={key:9,class:"text-center"},yo={key:10,class:"text-center"},wo={key:11,class:"text-center"},Co={key:12,class:"text-center"},Oo={class:"text-center"},Lo={class:"text-center"},jo={class:"dropdown"},Ao=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),Do={class:"dropdown-menu"},Io=["href"],Vo=s("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),Po=["onClick"],Mo=s("i",{class:"fa-solid fa-file-signature mr-2"},null,-1),zo=["onClick"],Eo=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),To=["onClick"],Bo=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),Uo={key:1,class:"alert alert-success rounded-0",role:"alert"},No=s("h4",{class:"alert-heading"},"Заказы",-1),Fo=s("p",null,"К сожалению, раздел заказов пуст.",-1),Ro=[No,Fo],So={key:2,class:"row mb-3"},Ko={class:"col-12"},qo={class:"modal fade",id:"order-details",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Go={class:"modal-dialog modal-fullscreen"},Zo={class:"modal-content"},Ho=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Детали заказа"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[s("i",{class:"fa-solid fa-xmark"})])],-1),Jo={class:"modal-body"},Qo=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-0","data-bs-dismiss":"modal"},"Закрыть ")],-1),Wo={class:"modal fade",id:"confirm-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Xo={class:"modal-dialog modal-dialog-centered"},Yo={class:"modal-content rounded-0"},xo={class:"modal-body"},tn=s("div",{class:"d-flex justify-center p-3"},[s("img",{src:"/images/logo.png",style:{width:"100px"},alt:""})],-1),sn={class:"font-bold text-center py-3"},en={class:"text-center pb-3"},on={class:"row mb-3"},nn={class:"col-md-6 d-flex justify-center"},ln={class:"form-check"},an=s("label",{class:"form-check-label",for:"work-with-nds"}," Работаю с НДС ",-1),dn={class:"col-md-6 d-flex justify-center"},rn={class:"form-check"},cn=s("label",{class:"form-check-label",for:"work-without-nds"}," Работаю без НДС ",-1),un={class:"row"},_n={class:"col-6"},hn={class:"col-6"},pn={components:{VueDatePicker:w},data(){return{table:{contract_number:{title:"Номер договора",value:!0},contract_date:{title:"Дата договора",value:!0},completion_at:{title:"Дата закрытия",value:!0},client_id:{title:"Идентификатор клиента",value:!0},status:{title:"Статус",value:!0},source:{title:"Источник",value:!0},contact_person:{title:"Контактное лицо",value:!0},phone:{title:"Номер телефона",value:!0},organizational_form:{title:"Организационная форма",value:!0},contract_amount:{title:"Сумма договора",value:!0},paid:{title:"Оплачено",value:!0},debt:{title:"Остаток",value:!0},profit:{title:"Доход",value:!0}},sort:{column:null,date:null,direction:"desc"},selected_order:null,order_detail_modal:null,order_status:["Новый заказ","В работе","Завершен"],search:null,current_page:0,paginate_object:null,loading:!1,confirm_modal:null,confirm:{title:null,message:null,work_with_nds:1,item:null},items:[{id:null,contract_number:null,contract_date:null,completion_at:null,client_id:null,status:null,source:null,contact_person:null,phone:null,organizational_form:null,contract_amount:null,paid:null,debt:null,profit:null}]}},computed:{...v(["getOrders","getOrdersPaginateObject"])},mounted(){this.loadOrders(),this.order_detail_modal=new bootstrap.Modal(document.getElementById("order-details"),{}),this.confirm_modal=new bootstrap.Modal(document.getElementById("confirm-modal"),{})},methods:{resetColumns(){Object.keys(this.table).forEach(i=>{this.table[i].value=!0})},changeColumns(i){i?this.table[i].value=!this.table[i].value:Object.keys(this.table).forEach(t=>{this.table[t].value=!this.table[t].value})},openConfirmModal(i,t,a){this.confirm.title=i||null,this.confirm.message=t||null,this.confirm.item=a||null,this.confirm_modal.show()},sortAndLoad(i){this.sort.column=i,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadOrders(this.current_page)},filteredDownload(){let i=this.sort,t=(i.date||[]).length>0?new Date(i.date[0]).getTime():null,a=(i.date||[]).length>1?new Date(i.date[1]).getTime():null,o="/orders/download-filtered-orders?order=id";t&&a&&(o+=`&df=${t}&dt=${a}`),this.search&&(o+=`&search=${this.search||null}`),window.open(o,"_blank").focus()},downloadDocument(){let i=this.confirm.item;window.open(`/orders/download-contract?c=${i.client_id}&o=${i.id}&nds=${this.confirm.work_with_nds}`,"_blank").focus(),this.confirm_modal.hide()},loadOrders(i=0){this.current_page=i;let t=this.sort,a=(t.date||[]).length>0?t.date[0]:null,o=(t.date||[]).length>1?t.date[1]:null;this.$store.dispatch("loadOrders",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction,df:a||null,dt:o||null},page:this.current_page}).then(u=>{this.items=this.getOrders,this.paginate_object=this.getOrdersPaginateObject}).catch(()=>{this.loading=!1})},selectItem(i){this.loading=!0,this.selected_order=i,this.$nextTick(()=>{this.loading=!1,this.order_detail_modal.show()})},duplicateItem(i){this.$store.dispatch("duplicateOrder",{materialId:i}).then(()=>{this.sortAndLoad("id")})},removeItem(i){this.$store.dispatch("removeOrder",{materialId:i}).then(()=>{this.sortAndLoad("id")})}}},mn=Object.assign(pn,{__name:"OrderTable",setup(i){return(t,a)=>(e(),n(_,null,[s("div",es,[s("div",os,[s("div",ns,[s("div",ls,[h(s("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=o=>t.search=o),onKeydown:a[1]||(a[1]=O(o=>t.sortAndLoad("id"),["enter"])),class:"form-control",id:"search-orders"},null,544),[[$,t.search]]),as]),s("div",is,[ds,s("ul",rs,[s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:a[2]||(a[2]=o=>t.sortAndLoad("id"))},[cs,d(" Искать")])]),s("li",null,[s("a",{class:"dropdown-item",onClick:a[3]||(a[3]=(...o)=>t.filteredDownload&&t.filteredDownload(...o)),href:"javascript:void(0)"},[us,d(" Скачать в Excel ")])])])])])]),s("div",_s,[f(g(w),{class:"rounded-0",locale:"ru",range:"","multi-calendars":"",modelValue:t.sort.date,"onUpdate:modelValue":a[4]||(a[4]=o=>t.sort.date=o)},{"action-row":k(({internalModelValue:o,selectDate:u,closePicker:c})=>[s("div",hs,[s("button",{class:"btn btn-dark rounded-0 mr-2",onClick:u},"Выбрать",8,ps),s("button",{class:"btn btn-outline-secondary rounded-0",onClick:c},"Закрыть",8,ms)])]),_:1},8,["modelValue"])]),s("div",fs,[(e(!0),n(_,null,m(Object.keys(t.table),o=>(e(),n("span",{class:L(["badge mr-1 rounded-0 cursor-pointer",{"bg-dark":t.table[o].value===!0,"bg-secondary":t.table[o].value===!1}]),onClick:u=>t.changeColumns(o)},r(t.table[o].title||"-"),11,ks))),256)),s("span",{onClick:a[5]||(a[5]=o=>t.changeColumns(null)),class:"badge mr-1 bg-danger rounded-0 cursor-pointer"},vs),s("span",{onClick:a[6]||(a[6]=(...o)=>t.resetColumns&&t.resetColumns(...o)),class:"badge mr-1 bg-secondary rounded-0 cursor-pointer"},gs)])]),t.paginate_object?(e(),n("p",ys,[d("Найдено результатов "),s("strong",null,r(t.paginate_object.meta.total),1)])):l("",!0),s("div",ws,[t.items.length>0?(e(),n("table",Cs,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:a[7]||(a[7]=o=>t.sortAndLoad("id"))},[d("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),n("span",Os,js)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),n("span",As,Is)):l("",!0)]),t.table.contract_number.value?(e(),n("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:a[8]||(a[8]=o=>t.sortAndLoad("contract_number"))},[d("Номер договора "),t.sort.direction==="desc"&&t.sort.column==="contract_number"?(e(),n("span",Vs,Ms)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="contract_number"?(e(),n("span",zs,Ts)):l("",!0)])):l("",!0),t.table.contract_date.value?(e(),n("th",{key:1,scope:"col",class:"text-center cursor-pointer",onClick:a[9]||(a[9]=o=>t.sortAndLoad("contract_date"))},[d("Дата договора "),t.sort.direction==="desc"&&t.sort.column==="contract_date"?(e(),n("span",Bs,Ns)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="contract_date"?(e(),n("span",Fs,Ss)):l("",!0)])):l("",!0),t.table.completion_at.value?(e(),n("th",{key:2,scope:"col",class:"text-center cursor-pointer",onClick:a[10]||(a[10]=o=>t.sortAndLoad("completion_at"))},[d("Дата закрытия "),t.sort.direction==="desc"&&t.sort.column==="completion_at"?(e(),n("span",Ks,Gs)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="completion_at"?(e(),n("span",Zs,Js)):l("",!0)])):l("",!0),t.table.client_id.value?(e(),n("th",{key:3,scope:"col",class:"text-center cursor-pointer",onClick:a[11]||(a[11]=o=>t.sortAndLoad("client_id"))},[d("Клиент "),t.sort.direction==="desc"&&t.sort.column==="client_id"?(e(),n("span",Qs,Xs)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="client_id"?(e(),n("span",Ys,te)):l("",!0)])):l("",!0),t.table.status.value?(e(),n("th",{key:4,scope:"col",class:"text-center cursor-pointer",onClick:a[12]||(a[12]=o=>t.sortAndLoad("status"))},[d("Статус заказа "),t.sort.direction==="desc"&&t.sort.column==="status"?(e(),n("span",se,oe)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="status"?(e(),n("span",ne,ae)):l("",!0)])):l("",!0),t.table.source.value?(e(),n("th",{key:5,scope:"col",class:"text-center cursor-pointer",onClick:a[13]||(a[13]=o=>t.sortAndLoad("source"))},[d("Источник "),t.sort.direction==="desc"&&t.sort.column==="source"?(e(),n("span",ie,re)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="source"?(e(),n("span",ce,_e)):l("",!0)])):l("",!0),t.table.contact_person.value?(e(),n("th",{key:6,scope:"col",class:"text-center cursor-pointer",onClick:a[14]||(a[14]=o=>t.sortAndLoad("contact_person"))},[d("Контактное лицо "),t.sort.direction==="desc"&&t.sort.column==="contact_person"?(e(),n("span",he,me)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="contact_person"?(e(),n("span",fe,be)):l("",!0)])):l("",!0),t.table.phone.value?(e(),n("th",{key:7,scope:"col",class:"text-center cursor-pointer",onClick:a[15]||(a[15]=o=>t.sortAndLoad("phone"))},[d("Телефон "),t.sort.direction==="desc"&&t.sort.column==="phone"?(e(),n("span",ve,ge)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="phone"?(e(),n("span",ye,Ce)):l("",!0)])):l("",!0),t.table.organizational_form.value?(e(),n("th",{key:8,scope:"col",class:"text-center cursor-pointer",onClick:a[16]||(a[16]=o=>t.sortAndLoad("organizational_form"))},[d("На ип\\ооо "),t.sort.direction==="desc"&&t.sort.column==="organizational_form"?(e(),n("span",Oe,je)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="organizational_form"?(e(),n("span",Ae,Ie)):l("",!0)])):l("",!0),t.table.contract_amount.value?(e(),n("th",{key:9,scope:"col",class:"text-center cursor-pointer",onClick:a[17]||(a[17]=o=>t.sortAndLoad("contract_amount"))},[d("Сумма договора "),t.sort.direction==="desc"&&t.sort.column==="contract_amount"?(e(),n("span",Ve,Me)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="contract_amount"?(e(),n("span",ze,Te)):l("",!0)])):l("",!0),t.table.paid.value?(e(),n("th",{key:10,scope:"col",class:"text-center cursor-pointer",onClick:a[18]||(a[18]=o=>t.sortAndLoad("paid"))},[d("Оплачено "),t.sort.direction==="desc"&&t.sort.column==="paid"?(e(),n("span",Be,Ne)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="paid"?(e(),n("span",Fe,Se)):l("",!0)])):l("",!0),t.table.debt.value?(e(),n("th",{key:11,scope:"col",class:"text-center cursor-pointer",onClick:a[19]||(a[19]=o=>t.sortAndLoad("debt"))},[d("Задолженность "),t.sort.direction==="desc"&&t.sort.column==="debt"?(e(),n("span",Ke,Ge)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="debt"?(e(),n("span",Ze,Je)):l("",!0)])):l("",!0),t.table.profit.value?(e(),n("th",{key:12,scope:"col",class:"text-center cursor-pointer",onClick:a[20]||(a[20]=o=>t.sortAndLoad("profit"))},[d("Прибыль "),t.sort.direction==="desc"&&t.sort.column==="profit"?(e(),n("span",Qe,Xe)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="profit"?(e(),n("span",Ye,to)):l("",!0)])):l("",!0),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[21]||(a[21]=o=>t.sortAndLoad("updated_at"))},[d(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),n("span",so,oo)):l("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),n("span",no,ao)):l("",!0)]),io])]),s("tbody",null,[(e(!0),n(_,null,m(t.items,(o,u)=>(e(),n("tr",null,[s("th",ro,r(o.id||u),1),t.table.contract_number.value?(e(),n("td",{key:0,class:"text-center",onClick:c=>t.selectItem(o)},r(o.contract_number||"-"),9,co)):l("",!0),t.table.contract_date.value?(e(),n("td",{key:1,class:"text-center",onClick:c=>t.selectItem(o)},r(o.contract_date||"-"),9,uo)):l("",!0),t.table.completion_at.value?(e(),n("td",_o,r(o.completion_at||"-"),1)):l("",!0),t.table.client_id.value?(e(),n("td",ho,r(o.client_id||"-"),1)):l("",!0),t.table.status.value?(e(),n("td",po,[(o.status||0)<=2?(e(),n("span",mo,r(t.order_status[o.status]),1)):(e(),n("span",fo,"Не указан"))])):l("",!0),t.table.source.value?(e(),n("td",ko,r(o.source||"-"),1)):l("",!0),t.table.contact_person.value?(e(),n("td",bo,r(o.contact_person||"-"),1)):l("",!0),t.table.phone.value?(e(),n("td",vo,r(o.phone||"-"),1)):l("",!0),t.table.organizational_form.value?(e(),n("td",$o,r(o.organizational_form||"-"),1)):l("",!0),t.table.contract_amount.value?(e(),n("td",go,r(o.contract_amount||0),1)):l("",!0),t.table.paid.value?(e(),n("td",yo,r(o.paid||0),1)):l("",!0),t.table.debt.value?(e(),n("td",wo,r(o.debt||0),1)):l("",!0),t.table.profit.value?(e(),n("td",Co,r(o.profit||0),1)):l("",!0),s("td",Oo,r(o.updated_at||"-"),1),s("td",Lo,[s("div",jo,[Ao,s("ul",Do,[s("li",null,[s("a",{class:"dropdown-item",target:"_blank",href:"/orders/download-order-excel/"+o.id},[Vo,d("Скачать Excel-документ по заказу")],8,Io)]),s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.openConfirmModal("Подготовка договора","Вам необходимо выбрать как вам предпочтительнее работать",o),href:"javascript:void(0)"},[Mo,d("Скачать договор")],8,Po)]),s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.selectItem(o),href:"javascript:void(0)"},[Eo,d("Редактировать")],8,zo)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:c=>t.removeItem(o.id),href:"javascript:void(0)"},[Bo,d("Удалить")],8,To)])])])])]))),256))])])):l("",!0)]),t.items.length===0?(e(),n("div",Uo,Ro)):l("",!0),t.items.length>0?(e(),n("div",So,[s("div",Ko,[t.paginate_object?(e(),p(y,{key:0,onPagination_page:t.loadOrders,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0),s("div",qo,[s("div",Go,[s("div",Zo,[Ho,s("div",Jo,[t.selected_order&&!t.loading?(e(),p(ss,{key:0,"order-id":t.selected_order.id},null,8,["order-id"])):l("",!0)]),Qo])])]),s("div",Wo,[s("div",Xo,[s("div",Yo,[s("div",xo,[tn,s("h3",sn,r(t.confirm.title||"-"),1),s("p",en,r(t.confirm.message||"-"),1),s("div",on,[s("div",nn,[s("div",ln,[h(s("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":a[22]||(a[22]=o=>t.confirm.work_with_nds=o),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[b,t.confirm.work_with_nds]]),an])]),s("div",dn,[s("div",rn,[h(s("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":a[23]||(a[23]=o=>t.confirm.work_with_nds=o),id:"work-without-nds"},null,512),[[b,t.confirm.work_with_nds]]),cn])])]),s("div",un,[s("div",_n,[s("button",{class:"btn btn-dark rounded-0 w-100",type:"button",onClick:a[24]||(a[24]=(...o)=>t.downloadDocument&&t.downloadDocument(...o))},"Скачать договор ")]),s("div",hn,[s("button",{class:"btn btn-outline-secondary rounded-0 w-100",onClick:a[25]||(a[25]=o=>t.confirm_modal.hide())}," Закрыть ")])])])])])])],64))}}),fn=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Заказы",-1),kn={class:"py-12"},bn={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},vn={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$n={class:"p-6 text-gray-900"},gn={data(){return{loading:!1,selectedOrder:null}},methods:{selectOrder(i){this.selectedOrder=i,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackOrderForm(){this.loading=!0,this.selectedOrder=null,this.$nextTick(()=>{this.loading=!1})}}},Dn=Object.assign(gn,{__name:"OrdersPage",setup(i){return(t,a)=>(e(),n(_,null,[f(g(j),{title:"Заказы"}),f(C,null,{header:k(()=>[fn]),default:k(()=>[s("div",kn,[s("div",bn,[s("div",vn,[s("div",$n,[t.loading?l("",!0):(e(),p(mn,{key:0,onSelect:t.selectOrder},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{Dn as default};
