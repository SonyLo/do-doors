import{_ as y}from"./AuthenticatedLayout-DKEVbNu6.js";import{m as V,o as e,c as i,b as t,d as m,v as p,e as u,f as r,F as _,r as v,g as f,t as h,i as $,a as g,u as D,w as b,Z as w}from"./app-n5g1UPt_.js";import{P as C}from"./Pagination-T7_qpnq1.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CRyn42vh.js";const F={class:"row"},L={class:"col-12"},A={class:"input-group mb-3"},I={class:"form-floating"},O=t("label",{for:"search-door-variants"},"Поиск по производителям петель",-1),P=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),T=[P],N={key:0,class:"table"},S={key:0},B=t("i",{class:"fa-solid fa-caret-down"},null,-1),M=[B],U={key:1},q=t("i",{class:"fa-solid fa-caret-up"},null,-1),E=[q],G={key:0},J=t("i",{class:"fa-solid fa-caret-down"},null,-1),Z=[J],z={key:1},H=t("i",{class:"fa-solid fa-caret-up"},null,-1),K=[H],Q={key:0},R=t("i",{class:"fa-solid fa-caret-down"},null,-1),W=[R],X={key:1},Y=t("i",{class:"fa-solid fa-caret-up"},null,-1),x=[Y],tt={key:0},st=t("i",{class:"fa-solid fa-caret-down"},null,-1),et=[st],ot={key:1},it=t("i",{class:"fa-solid fa-caret-up"},null,-1),nt=[it],rt=t("th",{scope:"col",class:"text-center"},"Действие",-1),at={scope:"row"},lt=["onClick"],dt={class:"text-center"},ct={class:"text-center"},ut={class:"text-center"},ht={class:"dropdown"},_t=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),mt={class:"dropdown-menu"},pt=["onClick"],ft=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),gt=["onClick"],bt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),vt={key:1,class:"alert alert-success",role:"alert"},kt=t("h4",{class:"alert-heading"},"Варианты дверей",-1),yt=t("p",null,"К сожалению, раздел Варианты дверей пуст. Вы еще не добавили ни одного варианта дверей, которые можно отобразить на этой странице.",-1),Vt=t("hr",null,null,-1),$t=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый вариант дверей",-1),Dt=[kt,yt,Vt,$t],wt={key:2,class:"row mb-3"},Ct={class:"col-12"},jt={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0}]}},computed:{...V(["getDoorVariants","getDoorVariantsPaginateObject"])},mounted(){this.loadDoorVariants()},methods:{sortAndLoad(o){this.sort.column=o,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadDoorVariants(this.current_page)},loadDoorVariants(o=0){this.current_page=o,this.$store.dispatch("loadDoorVariants",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(s=>{this.items=this.getDoorVariants,this.paginate_object=this.getDoorVariantsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(o){this.$emit("select",o)},duplicateItem(o){this.$store.dispatch("duplicateDoorVariant",{doorVariantId:o}).then(()=>{this.sortAndLoad("id")})},removeItem(o){this.$store.dispatch("removeDoorVariant",{doorVariantId:o}).then(()=>{this.sortAndLoad("id")})}}},Ft=Object.assign(jt,{__name:"DoorVariantTable",setup(o){return(s,n)=>(e(),i(_,null,[t("form",F,[t("div",L,[t("div",A,[t("div",I,[m(t("input",{type:"search","onUpdate:modelValue":n[0]||(n[0]=a=>s.search=a),class:"form-control",id:"search-door-variants"},null,512),[[p,s.search]]),O]),t("button",{type:"button",onClick:n[1]||(n[1]=a=>s.sortAndLoad("id")),class:"btn btn-outline-primary"},T)])])]),s.items.length>0?(e(),i("table",N,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>s.sortAndLoad("id"))},[u("# "),s.sort.direction==="desc"&&s.sort.column==="id"?(e(),i("span",S,M)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="id"?(e(),i("span",U,E)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[3]||(n[3]=a=>s.sortAndLoad("title"))},[u("Название "),s.sort.direction==="desc"&&s.sort.column==="title"?(e(),i("span",G,Z)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="title"?(e(),i("span",z,K)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[4]||(n[4]=a=>s.sortAndLoad("price"))},[u("Цена "),s.sort.direction==="desc"&&s.sort.column==="price"?(e(),i("span",Q,W)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="price"?(e(),i("span",X,x)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[5]||(n[5]=a=>s.sortAndLoad("updated_at"))},[u(" Дата изменения "),s.sort.direction==="desc"&&s.sort.column==="updated_at"?(e(),i("span",tt,et)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="updated_at"?(e(),i("span",ot,nt)):r("",!0)]),rt])]),t("tbody",null,[(e(!0),i(_,null,v(s.items,(a,l)=>(e(),i("tr",null,[t("th",at,h(a.id||l),1),t("td",{class:"text-center",onClick:d=>s.selectItem(a)},h(a.title||"-"),9,lt),t("td",dt,h(a.price||0),1),t("td",ct,h(a.updated_at||"-"),1),t("td",ut,[t("div",ht,[_t,t("ul",mt,[t("li",null,[t("a",{class:"dropdown-item",onClick:d=>s.selectItem(a),href:"javascript:void(0)"},[ft,u("Редактировать")],8,pt)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:d=>s.removeItem(a.id),href:"javascript:void(0)"},[bt,u("Удалить")],8,gt)])])])])]))),256))])])):r("",!0),s.items.length===0?(e(),i("div",vt,Dt)):r("",!0),s.items.length>0?(e(),i("div",wt,[t("div",Ct,[s.paginate_object?(e(),f(C,{key:0,onPagination_page:s.loadDoorVariants,pagination:s.paginate_object},null,8,["onPagination_page","pagination"])):r("",!0)])])):r("",!0)],64))}}),Lt={props:["item"],data(){return{messages:[],loading:!1,form:{id:null,title:null,price:null}}},computed:{needClearForm(){return this.form.id||this.form.title||this.form.price}},mounted(){this.item&&this.$nextTick(()=>{this.form={id:this.item.id||null,title:this.item.title||null,price:this.item.price||0}})},methods:{alert(o){this.messages.push(o)},resetForm(){this.form.id=null,this.form.title=null,this.form.price=0,this.$emit("callback")},removeMessage(o){this.messages.splice(o,1)},submit(){let o=new FormData;Object.keys(this.form).forEach(s=>{const n=this.form[s]||"";typeof n=="object"?o.append(s,JSON.stringify(n)):o.append(s,n)}),this.$store.dispatch("storeDoorVariant",{doorVariantForm:o}).then(s=>{this.$emit("callback"),this.resetForm()}).catch(s=>{})}}},At={class:"form-floating mb-3"},It=t("label",{for:"door-variant-title"},"Наименование варианта двери",-1),Ot={class:"form-floating mb-3"},Pt=t("label",{for:"door-variant-title"},"Цена варианта двери",-1),Tt={class:"row"},Nt={class:"col-12"},St={class:"alert alert-danger alert-dismissible fade show",role:"alert"},Bt=t("strong",null,"Внимание!",-1),Mt=["onClick"],Ut={class:"row mt-5"},qt={class:"col-12 d-flex justify-content-center"},Et=["disabled"],Gt={key:0,class:"fa-regular fa-floppy-disk mr-1"},Jt={key:1,class:"spinner-border spinner-border-sm text-success",role:"status"},Zt=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1);function zt(o,s,n,a,l,d){return e(),i("form",{action:"",onSubmit:s[3]||(s[3]=$((...c)=>d.submit&&d.submit(...c),["prevent"]))},[t("div",At,[m(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=c=>l.form.title=c),class:"form-control",id:"door-variant-title",required:""},null,512),[[p,l.form.title]]),It]),t("div",Ot,[m(t("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=c=>l.form.price=c),class:"form-control",id:"door-variant-price",required:""},null,512),[[p,l.form.price]]),Pt]),t("div",Tt,[t("div",Nt,[l.messages.length>0?(e(!0),i(_,{key:0},v(l.messages,(c,k)=>(e(),i("div",St,[Bt,u(" "+h(c||"Ошибка")+" ",1),t("button",{type:"button",class:"btn-close",onClick:ts=>d.removeMessage(k)},null,8,Mt)]))),256)):r("",!0)])]),t("div",Ut,[t("div",qt,[t("button",{disabled:!d.needClearForm,class:"btn btn-outline-success rounded-5"},[l.loading?(e(),i("span",Jt)):(e(),i("i",Gt)),u(" Сохранить производителя петель ")],8,Et),d.needClearForm&&!l.loading?(e(),i("button",{key:0,type:"button",onClick:s[2]||(s[2]=(...c)=>d.resetForm&&d.resetForm(...c)),class:"btn btn-outline-danger rounded-5 ml-2"},[Zt,u(" Очистить форму ")])):r("",!0)])])],32)}const Ht=j(Lt,[["render",zt]]),Kt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Варианты дверей",-1),Qt={class:"py-12"},Rt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Wt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Xt={class:"p-6 text-gray-900"},Yt=t("hr",{class:"hr my-5"},null,-1),xt={data(){return{loading:!1,selectedDoorVariant:null}},methods:{selectDoorVariant(o){this.selectedDoorVariant=o,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackDoorVariantForm(){this.loading=!0,this.selectedDoorVariant=null,this.$nextTick(()=>{this.loading=!1})}}},rs=Object.assign(xt,{__name:"DoorVariantsPage",setup(o){return(s,n)=>(e(),i(_,null,[g(D(w),{title:"Варианты дверей"}),g(y,null,{header:b(()=>[Kt]),default:b(()=>[t("div",Qt,[t("div",Rt,[t("div",Wt,[t("div",Xt,[s.loading?r("",!0):(e(),f(Ht,{key:0,item:s.selectedDoorVariant,onCallback:s.callbackDoorVariantForm},null,8,["item","onCallback"])),Yt,s.loading?r("",!0):(e(),f(Ft,{key:1,onSelect:s.selectDoorVariant},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{rs as default};
