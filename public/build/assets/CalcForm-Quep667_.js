import{o as d,c as a,b as s,q as b,e as h,n as R,t as p,F as g,r as y,k as ro,f as m,h as U,m as Z,g as F,I as eo,v as z,a as Y,j as uo,i as V,d as P,w as T}from"./app-DffmZpem.js";import{_ as io}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as _o}from"./RalColorSelector-vbDQycc1.js";const fo={props:["modelValue"],data(){return{side:0,door:null}},watch:{door:{handler(r){this.$emit("update:modelValue",this.door)},deep:!0}},mounted(){this.door=this.modelValue},computed:{sideColor(){return this.side===0?this.door.front_side_finish_color.code:this.door.back_side_finish_color.code},selectedSideFinishImageForDoor(){let r=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[r].door_variants)return null;let o=this.door[r].door_variants.findIndex(t=>t.selected);return o===-1?null:this.door[r].door_variants[o].image},selectedSideFinishImageForWrapper(){let r=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[r].wrapper_variants)return null;let o=this.door[r].wrapper_variants.findIndex(t=>t.selected);return o===-1?null:this.door[r].wrapper_variants[o].image}}},mo={key:0,class:"row"},vo={class:"col-12 mb-2"},go={key:1,class:"row"},yo={class:"col-12 col-md-8"},bo={key:0,class:"upper-jumper d-flex justify-content-center align-items-center"},Fo=s("div",{class:"door-upper-jumper d-flex justify-content-center align-items-center"},[s("p",{class:"text-center",style:{"font-size":"12px"}},"1")],-1),ko=[Fo],wo={style:{position:"relative","z-index":"5"}},Co={class:"door-header"},$o={class:"door"},Do=["src"],So={class:"height"},Vo={class:"width"},Io={class:"door-but"},Uo={class:"height"},zo={class:"depth"},Mo={class:"door-backstage"},jo={key:0,class:"skirting-board",style:{"font-size":"12px"}},Po=s("p",null,"3",-1),Ro=[Po],To=s("div",{class:"center"},null,-1),Eo={key:1,class:"skirting-board",style:{"font-size":"12px"}},Lo=s("p",null,"3",-1),Ao=[Lo],qo={class:"door-footer"},Bo={key:0,class:"doorstep d-flex justify-content-center align-items-center",style:{"font-size":"12px"}},Oo={class:"col-md-4 col-12"},Ho={class:"list-group list-group-numbered rounded-0 cursor-pointer"},Wo=s("li",{class:"list-group-item"},"Петли",-1);function No(r,o,t,i,e,l){return d(),a(g,null,[e.door?(d(),a("div",mo,[s("div",vo,[s("button",{class:b(["btn mr-2 rounded-0",{"btn-dark":e.side===0,"btn-outline-secondary":e.side!==0}]),onClick:o[0]||(o[0]=n=>e.side=0)}," Лицевая сторона ",2),s("button",{class:b(["btn rounded-0",{"btn-dark":e.side===1,"btn-outline-secondary":e.side!==1}]),onClick:o[1]||(o[1]=n=>e.side=1)}," Внутренняя сторона ",2)])])):h("",!0),e.door?(d(),a("div",go,[s("div",yo,[s("div",{class:"stage w-100",style:R({"background-image":"url("+l.selectedSideFinishImageForWrapper+")"})},[e.door.need_upper_jumper?(d(),a("div",bo,ko)):h("",!0),s("div",wo,[s("div",Co,[e.door.need_hidden_door_closer?(d(),a("div",{key:0,class:b(["door-closer d-flex justify-content-center align-items-center",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 5 ",2)):h("",!0)]),s("div",$o,[s("img",{src:r.doorImage?r.doorImage:"/images/door-1.jpg",class:"w-100 h-100",style:{"object-fit":"cover"},alt:""},null,8,Do),s("div",{class:"door-color",style:R({"background-color":l.sideColor||"transparent"})},null,4),s("div",So,[s("span",null,p(e.door.height),1)]),s("div",Vo,[s("span",null,p(e.door.width),1)]),e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(d(),a("div",{key:0,class:b(["handle",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:R([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(images/handle-left.png)":"url(images/handle-right.png)"}])},"6 ",6)):h("",!0),e.door.loops.type?(d(),a("div",{key:1,class:b(["loops",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}])},[(d(!0),a(g,null,y(e.door.loops_count,n=>(d(),a("span",null,"7"))),256))],2)):h("",!0)]),s("div",Io,[s("div",Uo,[s("span",null,p(e.door.height),1)]),s("div",zo,[s("span",null,p(e.door.depth),1)])])]),s("div",Mo,[e.door.need_hidden_skirting_board?(d(),a("div",jo,Ro)):h("",!0),To,e.door.need_hidden_skirting_board?(d(),a("div",Eo,Ao)):h("",!0)]),s("div",qo,[e.door.need_automatic_doorstep?(d(),a("div",Bo," 2 ")):h("",!0),e.door.need_hidden_stopper?(d(),a("div",{key:1,class:b(["stopper d-flex justify-content-center align-items-center",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 4 ",2)):h("",!0)])],4)]),s("div",Oo,[s("ul",Ho,[s("li",{onClick:o[2]||(o[2]=n=>e.door.need_upper_jumper=!e.door.need_upper_jumper),class:b([{"bg-dark text-white":e.door.need_upper_jumper},"list-group-item"])},"Верхняя перемычка",2),s("li",{onClick:o[3]||(o[3]=n=>e.door.need_automatic_doorstep=!e.door.need_automatic_doorstep),class:b([{"bg-dark text-white":e.door.need_automatic_doorstep},"list-group-item"])},"Скрытый порог",2),s("li",{onClick:o[4]||(o[4]=n=>e.door.need_hidden_skirting_board=!e.door.need_hidden_skirting_board),class:b([{"bg-dark text-white":e.door.need_hidden_skirting_board},"list-group-item"])},"Скрытый плинтус",2),s("li",{onClick:o[5]||(o[5]=n=>e.door.need_hidden_stopper=!e.door.need_hidden_stopper),class:b([{"bg-dark text-white":e.door.need_hidden_stopper},"list-group-item"])},"Скрытый стопор",2),s("li",{onClick:o[6]||(o[6]=n=>e.door.need_hidden_door_closer=!e.door.need_hidden_door_closer),class:b([{"bg-dark text-white":e.door.need_hidden_door_closer},"list-group-item"])},"Скрытый доводчик",2),s("li",{onClick:o[7]||(o[7]=n=>e.door.need_handle_holes=!e.door.need_handle_holes),class:b([{"bg-dark text-white":e.door.need_handle_holes&&e.door.loops.type},"list-group-item"])},"Дверная ручка",2),Wo])])])):h("",!0)],64)}const Go=io(fo,[["render",No]]),Ko={props:["item"],data(){return{need_select_door_variant:!0,need_select_wrapper_variant:!0}},watch:{need_select_door_variant:{handler(r){this.need_select_door_variant||(this.item.door_variants.forEach(o=>{o.selected&&delete o.selected}),this.$emit("update:item",this.item))},deep:!0},need_select_wrapper_variant:{handler(r){this.need_select_wrapper_variant||(this.item.wrapper_variants.forEach(o=>{o.selected&&delete o.selected}),this.$emit("update:item",this.item))},deep:!0}},methods:{selectSideFinish(r,o){this.item[r][o].selected||!1||this.item[r].forEach(i=>{i.selected&&delete i.selected}),this.item[r][o].selected=!this.item[r][o].selected,this.$emit("update:item",this.item)}}},Xo={class:"font-bold my-2"},Jo={class:"row"},Qo={class:"col-12"},Yo={class:"form-check form-switch"},Zo=s("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру дверей ",-1),xo={key:0,class:"row mb-2"},oe=s("div",{class:"col-12"},[s("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов дверей")],-1),ee={class:"col-lg-4 col-md-4 col-12 mb-2"},te=["onClick"],se={class:"card-img-top",alt:"..."},re={class:"card-body"},ie={key:0,class:"font-bold"},le={key:1,class:"card-text"},de={class:"row"},ne={class:"col-12"},ae={class:"form-check form-switch"},ce=s("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру материала вокруг двери ",-1),he={key:1,class:"row mb-2"},pe=s("div",{class:"col-12"},[s("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов текстуры материала вокруг дверей")],-1),ue={class:"col-lg-4 col-md-4 col-12 mb-2"},_e=["onClick"],fe={class:"card-img-top",alt:"..."},me={class:"card-body"},ve={key:0,class:"font-bold"},ge={key:1,class:"card-text"};function ye(r,o,t,i,e,l){const n=ro("lazy");return d(),a(g,null,[s("h3",Xo,'Выбранный материал "'+p(t.item.title||"не указан")+'"',1),s("div",Jo,[s("div",Qo,[s("div",Yo,[m(s("input",{class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=f=>e.need_select_door_variant=f),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[U,e.need_select_door_variant]]),Zo])])]),t.item.door_variants&&e.need_select_door_variant?(d(),a("div",xo,[oe,(d(!0),a(g,null,y(t.item.door_variants,(f,c)=>(d(),a("div",ee,[s("div",{class:b(["card cursor-pointer",{"border-secondary shadow-lg":f.selected}]),onClick:_=>l.selectSideFinish("door_variants",c)},[m(s("img",se,null,512),[[n,f.image]]),s("div",re,[f.title?(d(),a("h6",ie,p(f.title||"не указано"),1)):h("",!0),f.description?(d(),a("p",le,p(f.description||"не указано"),1)):h("",!0)])],10,te)]))),256))])):h("",!0),s("div",de,[s("div",ne,[s("div",ae,[m(s("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=f=>e.need_select_wrapper_variant=f),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[U,e.need_select_wrapper_variant]]),ce])])]),t.item.wrapper_variants&&e.need_select_wrapper_variant?(d(),a("div",he,[pe,(d(!0),a(g,null,y(t.item.wrapper_variants,(f,c)=>(d(),a("div",ue,[s("div",{class:b(["card cursor-pointer",{"border-secondary shadow-lg":f.selected}]),onClick:_=>l.selectSideFinish("wrapper_variants",c)},[m(s("img",fe,null,512),[[n,f.image]]),s("div",me,[f.title?(d(),a("h6",ve,p(f.title||"не указано"),1)):h("",!0),f.description?(d(),a("p",ge,p(f.description||"не указано"),1)):h("",!0)])],10,_e)]))),256))])):h("",!0)],64)}const to=io(Ko,[["render",ye]]);var H,be=new Uint8Array(16);function lo(){if(!H&&(H=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!H))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H(be)}const Fe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function no(r){return typeof r=="string"&&Fe.test(r)}var w=[];for(var G=0;G<256;++G)w.push((G+256).toString(16).substr(1));function x(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(w[r[o+0]]+w[r[o+1]]+w[r[o+2]]+w[r[o+3]]+"-"+w[r[o+4]]+w[r[o+5]]+"-"+w[r[o+6]]+w[r[o+7]]+"-"+w[r[o+8]]+w[r[o+9]]+"-"+w[r[o+10]]+w[r[o+11]]+w[r[o+12]]+w[r[o+13]]+w[r[o+14]]+w[r[o+15]]).toLowerCase();if(!no(t))throw TypeError("Stringified UUID is invalid");return t}var so,K,X=0,J=0;function ke(r,o,t){var i=o&&t||0,e=o||new Array(16);r=r||{};var l=r.node||so,n=r.clockseq!==void 0?r.clockseq:K;if(l==null||n==null){var f=r.random||(r.rng||lo)();l==null&&(l=so=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),n==null&&(n=K=(f[6]<<8|f[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),_=r.nsecs!==void 0?r.nsecs:J+1,u=c-X+(_-J)/1e4;if(u<0&&r.clockseq===void 0&&(n=n+1&16383),(u<0||c>X)&&r.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");X=c,J=_,K=n,c+=122192928e5;var v=((c&268435455)*1e4+_)%4294967296;e[i++]=v>>>24&255,e[i++]=v>>>16&255,e[i++]=v>>>8&255,e[i++]=v&255;var k=c/4294967296*1e4&268435455;e[i++]=k>>>8&255,e[i++]=k&255,e[i++]=k>>>24&15|16,e[i++]=k>>>16&255,e[i++]=n>>>8|128,e[i++]=n&255;for(var I=0;I<6;++I)e[i+I]=l[I];return o||x(e)}function we(r){if(!no(r))throw TypeError("Invalid UUID");var o,t=new Uint8Array(16);return t[0]=(o=parseInt(r.slice(0,8),16))>>>24,t[1]=o>>>16&255,t[2]=o>>>8&255,t[3]=o&255,t[4]=(o=parseInt(r.slice(9,13),16))>>>8,t[5]=o&255,t[6]=(o=parseInt(r.slice(14,18),16))>>>8,t[7]=o&255,t[8]=(o=parseInt(r.slice(19,23),16))>>>8,t[9]=o&255,t[10]=(o=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=o/4294967296&255,t[12]=o>>>24&255,t[13]=o>>>16&255,t[14]=o>>>8&255,t[15]=o&255,t}function Ce(r){r=unescape(encodeURIComponent(r));for(var o=[],t=0;t<r.length;++t)o.push(r.charCodeAt(t));return o}var $e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",De="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ao(r,o,t){function i(e,l,n,f){if(typeof e=="string"&&(e=Ce(e)),typeof l=="string"&&(l=we(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(l),c.set(e,l.length),c=t(c),c[6]=c[6]&15|o,c[8]=c[8]&63|128,n){f=f||0;for(var _=0;_<16;++_)n[f+_]=c[_];return n}return x(c)}try{i.name=r}catch{}return i.DNS=$e,i.URL=De,i}function Se(r){if(typeof r=="string"){var o=unescape(encodeURIComponent(r));r=new Uint8Array(o.length);for(var t=0;t<o.length;++t)r[t]=o.charCodeAt(t)}return Ve(Ie(Ue(r),r.length*8))}function Ve(r){for(var o=[],t=r.length*32,i="0123456789abcdef",e=0;e<t;e+=8){var l=r[e>>5]>>>e%32&255,n=parseInt(i.charAt(l>>>4&15)+i.charAt(l&15),16);o.push(n)}return o}function co(r){return(r+64>>>9<<4)+14+1}function Ie(r,o){r[o>>5]|=128<<o%32,r[co(o)-1]=o;for(var t=1732584193,i=-271733879,e=-1732584194,l=271733878,n=0;n<r.length;n+=16){var f=t,c=i,_=e,u=l;t=C(t,i,e,l,r[n],7,-680876936),l=C(l,t,i,e,r[n+1],12,-389564586),e=C(e,l,t,i,r[n+2],17,606105819),i=C(i,e,l,t,r[n+3],22,-1044525330),t=C(t,i,e,l,r[n+4],7,-176418897),l=C(l,t,i,e,r[n+5],12,1200080426),e=C(e,l,t,i,r[n+6],17,-1473231341),i=C(i,e,l,t,r[n+7],22,-45705983),t=C(t,i,e,l,r[n+8],7,1770035416),l=C(l,t,i,e,r[n+9],12,-1958414417),e=C(e,l,t,i,r[n+10],17,-42063),i=C(i,e,l,t,r[n+11],22,-1990404162),t=C(t,i,e,l,r[n+12],7,1804603682),l=C(l,t,i,e,r[n+13],12,-40341101),e=C(e,l,t,i,r[n+14],17,-1502002290),i=C(i,e,l,t,r[n+15],22,1236535329),t=$(t,i,e,l,r[n+1],5,-165796510),l=$(l,t,i,e,r[n+6],9,-1069501632),e=$(e,l,t,i,r[n+11],14,643717713),i=$(i,e,l,t,r[n],20,-373897302),t=$(t,i,e,l,r[n+5],5,-701558691),l=$(l,t,i,e,r[n+10],9,38016083),e=$(e,l,t,i,r[n+15],14,-660478335),i=$(i,e,l,t,r[n+4],20,-405537848),t=$(t,i,e,l,r[n+9],5,568446438),l=$(l,t,i,e,r[n+14],9,-1019803690),e=$(e,l,t,i,r[n+3],14,-187363961),i=$(i,e,l,t,r[n+8],20,1163531501),t=$(t,i,e,l,r[n+13],5,-1444681467),l=$(l,t,i,e,r[n+2],9,-51403784),e=$(e,l,t,i,r[n+7],14,1735328473),i=$(i,e,l,t,r[n+12],20,-1926607734),t=D(t,i,e,l,r[n+5],4,-378558),l=D(l,t,i,e,r[n+8],11,-2022574463),e=D(e,l,t,i,r[n+11],16,1839030562),i=D(i,e,l,t,r[n+14],23,-35309556),t=D(t,i,e,l,r[n+1],4,-1530992060),l=D(l,t,i,e,r[n+4],11,1272893353),e=D(e,l,t,i,r[n+7],16,-155497632),i=D(i,e,l,t,r[n+10],23,-1094730640),t=D(t,i,e,l,r[n+13],4,681279174),l=D(l,t,i,e,r[n],11,-358537222),e=D(e,l,t,i,r[n+3],16,-722521979),i=D(i,e,l,t,r[n+6],23,76029189),t=D(t,i,e,l,r[n+9],4,-640364487),l=D(l,t,i,e,r[n+12],11,-421815835),e=D(e,l,t,i,r[n+15],16,530742520),i=D(i,e,l,t,r[n+2],23,-995338651),t=S(t,i,e,l,r[n],6,-198630844),l=S(l,t,i,e,r[n+7],10,1126891415),e=S(e,l,t,i,r[n+14],15,-1416354905),i=S(i,e,l,t,r[n+5],21,-57434055),t=S(t,i,e,l,r[n+12],6,1700485571),l=S(l,t,i,e,r[n+3],10,-1894986606),e=S(e,l,t,i,r[n+10],15,-1051523),i=S(i,e,l,t,r[n+1],21,-2054922799),t=S(t,i,e,l,r[n+8],6,1873313359),l=S(l,t,i,e,r[n+15],10,-30611744),e=S(e,l,t,i,r[n+6],15,-1560198380),i=S(i,e,l,t,r[n+13],21,1309151649),t=S(t,i,e,l,r[n+4],6,-145523070),l=S(l,t,i,e,r[n+11],10,-1120210379),e=S(e,l,t,i,r[n+2],15,718787259),i=S(i,e,l,t,r[n+9],21,-343485551),t=M(t,f),i=M(i,c),e=M(e,_),l=M(l,u)}return[t,i,e,l]}function Ue(r){if(r.length===0)return[];for(var o=r.length*8,t=new Uint32Array(co(o)),i=0;i<o;i+=8)t[i>>5]|=(r[i/8]&255)<<i%32;return t}function M(r,o){var t=(r&65535)+(o&65535),i=(r>>16)+(o>>16)+(t>>16);return i<<16|t&65535}function ze(r,o){return r<<o|r>>>32-o}function W(r,o,t,i,e,l){return M(ze(M(M(o,r),M(i,l)),e),t)}function C(r,o,t,i,e,l,n){return W(o&t|~o&i,r,o,e,l,n)}function $(r,o,t,i,e,l,n){return W(o&i|t&~i,r,o,e,l,n)}function D(r,o,t,i,e,l,n){return W(o^t^i,r,o,e,l,n)}function S(r,o,t,i,e,l,n){return W(t^(o|~i),r,o,e,l,n)}var Me=ao("v3",48,Se);const je=Me;function Pe(r,o,t){r=r||{};var i=r.random||(r.rng||lo)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,o){t=t||0;for(var e=0;e<16;++e)o[t+e]=i[e];return o}return x(i)}function Re(r,o,t,i){switch(r){case 0:return o&t^~o&i;case 1:return o^t^i;case 2:return o&t^o&i^t&i;case 3:return o^t^i}}function Q(r,o){return r<<o|r>>>32-o}function Te(r){var o=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var i=unescape(encodeURIComponent(r));r=[];for(var e=0;e<i.length;++e)r.push(i.charCodeAt(e))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var l=r.length/4+2,n=Math.ceil(l/16),f=new Array(n),c=0;c<n;++c){for(var _=new Uint32Array(16),u=0;u<16;++u)_[u]=r[c*64+u*4]<<24|r[c*64+u*4+1]<<16|r[c*64+u*4+2]<<8|r[c*64+u*4+3];f[c]=_}f[n-1][14]=(r.length-1)*8/Math.pow(2,32),f[n-1][14]=Math.floor(f[n-1][14]),f[n-1][15]=(r.length-1)*8&4294967295;for(var v=0;v<n;++v){for(var k=new Uint32Array(80),I=0;I<16;++I)k[I]=f[v][I];for(var j=16;j<80;++j)k[j]=Q(k[j-3]^k[j-8]^k[j-14]^k[j-16],1);for(var L=t[0],A=t[1],q=t[2],B=t[3],N=t[4],O=0;O<80;++O){var oo=Math.floor(O/20),po=Q(L,5)+Re(oo,A,q,B)+N+o[oo]+k[O]>>>0;N=B,B=q,q=Q(A,30)>>>0,A=L,L=po}t[0]=t[0]+L>>>0,t[1]=t[1]+A>>>0,t[2]=t[2]+q>>>0,t[3]=t[3]+B>>>0,t[4]=t[4]+N>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Ee=ao("v5",80,Te);const Le=Ee;var ho={v1:ke,v3:je,v4:Pe,v5:Le};const Ae={key:0,class:"mb-2"},qe={key:0,class:"dropdown-center"},Be=s("i",{class:"fa-solid fa-palette"},null,-1),Oe={key:0,class:"mb-0"},He={class:"dropdown-menu rounded-0"},We=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),Ne=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),Ge=["onClick"],Ke={key:1,class:"input-group mb-3"},Xe={class:"form-floating"},Je={for:"select-color-input"},Qe=s("i",{class:"fa-solid fa-palette"},null,-1),Ye=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-auto-close":"true","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Ze={class:"dropdown-menu dropdown-menu-end rounded-0"},xe=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),ot=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),et=["onClick"],tt=["id"],st={class:"modal-dialog"},rt={class:"modal-content rounded-0"},it=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор цвета RAL"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),lt={class:"modal-body"},dt={props:["modelValue","filter"],data(){return{id:null,color:null,colorModal:null,colors:[]}},watch:{getRalColors:{handler(r){this.colors=this.getRalColors},deep:!0},color:{handler(r){let o=(this.color.title||"").toLowerCase();o.indexOf("ral")!==-1&&(o=o.substring(o.indexOf("ral")+3).trim()),o.length===4&&Object.keys(this.colors).forEach(t=>{this.colors[t].code===o&&(this.color.code=this.colors[t].color.hex,this.color.title=this.colors[t].names.en)})},deep:!0}},computed:{...Z(["getDictionary","getRalColors"]),filteredColors(){return this.getDictionary.color_variants.filter(o=>o.type===this.filter||o.type==="all")}},mounted(){this.id=ho.v4(),this.color=this.modelValue},methods:{isHex(r){return/^#[0-9A-F]{6}$/i.test(r)},alert(r){this.$emit("invalid",r)},callbackSelectColor(r){this.color.title=r.names.en,this.color.code=r.color.hex,this.colorModal.hide()},loadRalColors(){this.$store.dispatch("loadRalColors")},openRalModal(){this.colorModal=new bootstrap.Modal(document.getElementById("select-ral-color-"+this.id),{}),this.colorModal.show()},selectColor(r){let o=null;r!=null&&(o={title:r.title||r.code,code:r.code||null,sizes:r.sizes,is_ral:!1,excludes:r.excludes||[],type:r.type||"all",assign_with_size:r.assign_with_size||!1},r.title.toLowerCase()==="ral"&&(this.loadRalColors(),o={title:"RAL",code:"RAL",is_ral:!0,sizes:r.sizes,excludes:r.excludes||[],type:r.type||"all",assign_with_size:r.assign_with_size||!1})),this.color=o||{title:null},document.querySelectorAll(".dropdown-menu").forEach(i=>{i.classList.remove("show")}),this.$emit("change",this.color),this.$emit("update:modelValue",this.color)}}},E=Object.assign(dt,{__name:"ColorSelector",setup(r){return(o,t)=>(d(),a(g,null,[o.color?(d(),a("div",Ae,[(o.color.code||null)!=="RAL"?(d(),a("div",qe,[s("button",{class:b([{"text-white":o.color.code||null},"btn btn-outline-secondary w-100 rounded-0 custom-dropdown-btn text-left"]),style:R({"background-color":o.color.code}),type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},[s("span",{class:b([{"font-size-10":o.color.title},"mr-2"])},[Be,F(),eo(o.$slots,"name")],2),o.color.title?(d(),a("p",Oe,p(o.color.title),1)):h("",!0)],6),s("ul",He,[s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[0]||(t[0]=i=>o.selectColor(null))},"Не выбрано")]),We,s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...i)=>o.openRalModal&&o.openRalModal(...i))},"Выбор цвета RAL")]),Ne,s("li",null,[(d(!0),a(g,null,y(o.filteredColors,i=>(d(),a("a",{class:b(["dropdown-item",{"bg-primary text-white":o.color.title===i.title}]),onClick:e=>o.selectColor(i),href:"javascript:void(0)"},p(i.title),11,Ge))),256))])])])):h("",!0),(o.color.code||"").toLowerCase()==="ral"?(d(),a("div",Ke,[o.isHex(o.color.title)?(d(),a("span",{key:0,class:"input-group-text border-secondary",style:R([{"background-color":o.color.title},{width:"40px","border-radius":"0px"}]),id:"basic-addon1"},null,4)):h("",!0),s("div",Xe,[m(s("input",{type:"text",onInvalid:t[2]||(t[2]=i=>o.alert("Вы не выбрали цвет")),"onUpdate:modelValue":t[3]||(t[3]=i=>o.color.title=i),class:"form-control",id:"select-color-input",required:""},null,544),[[z,o.color.title]]),s("label",Je,[Qe,eo(o.$slots,"name")])]),Ye,s("ul",Ze,[s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[4]||(t[4]=i=>o.color={title:null})},"Не выбрано")]),xe,s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[5]||(t[5]=(...i)=>o.openRalModal&&o.openRalModal(...i))},"Выбор цвета RAL")]),ot,s("li",null,[(d(!0),a(g,null,y(o.filteredColors,i=>(d(),a("a",{class:b(["dropdown-item",{"bg-primary text-white":o.color.title===i.title}]),onClick:e=>o.selectColor(i),href:"javascript:void(0)"},p(i.title),11,et))),256))])])])):h("",!0)])):h("",!0),s("div",{class:"modal fade",id:"select-ral-color-"+o.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[s("div",st,[s("div",rt,[it,s("div",lt,[Y(_o,{onSelect:o.callbackSelectColor},null,8,["onSelect"])])])])],8,tt)],64))}}),nt={key:0,class:"row"},at={class:"col-md-6"},ct={class:"row"},ht={class:"col-md-6 col-12"},pt={class:"col-md-6 col-12"},ut={class:"input-group mb-3"},_t={class:"form-floating"},ft=s("label",{for:"floatingInput"},[s("i",{class:"fa-solid fa-signs-post"}),F(" Назначение двери")],-1),mt=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),vt={class:"dropdown-menu dropdown-menu-end rounded-0"},gt=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),yt=["onClick"],bt={class:"col-md-6 col-12"},Ft={class:"input-group mb-3"},kt={class:"form-floating"},wt=s("label",{for:"floatingInput"},[s("i",{class:"fa-solid fa-ruler-vertical"}),F(" Высота, мм")],-1),Ct=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),$t={class:"dropdown-menu dropdown-menu-end rounded-0"},Dt=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),St={class:"p-1"},Vt={class:"form-floating"},It=s("label",{for:"filtered-height"},"Фильтр высоты",-1),Ut=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),zt={class:"scrollable-menu p-2"},Mt=["onClick"],jt={key:0,class:"text-center"},Pt={class:"col-md-6 col-12"},Rt={class:"input-group mb-3"},Tt={class:"form-floating"},Et=s("label",{for:"floatingInput"},[s("i",{class:"fa-solid fa-ruler-horizontal"}),F(" Ширина, мм")],-1),Lt=s("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),At={class:"dropdown-menu dropdown-menu-end rounded-0"},qt=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),Bt={class:"p-1"},Ot={class:"form-floating"},Ht=s("label",{for:"filtered-height"},"Фильтр ширины",-1),Wt=s("li",null,[s("hr",{class:"dropdown-divider"})],-1),Nt={class:"scrollable-menu p-2"},Gt=["onClick"],Kt={key:0,class:"text-center"},Xt={class:"col-md-6 col-12"},Jt={class:"form-floating mb-3"},Qt=s("option",{value:{title:null}},"Выберите один из вариантов",-1),Yt=["value"],Zt=s("label",{for:"floatingSelect"},[s("i",{class:"fa-brands fa-openid"}),F(" Тип открытия двери и толщина")],-1),xt={class:"col-md-6 col-12"},os={class:"form-floating mb-3"},es=["value"],ts=s("label",{for:"door-type"},[s("i",{class:"fa-solid fa-door-open"}),F(" Выберите тип двери")],-1),ss={class:"col-md-6 col-12"},rs={class:"form-floating mb-3"},is=["value"],ls=s("label",{for:"floatingSelect"},[s("i",{class:"fa-solid fa-industry"}),F(" Производитель петель")],-1),ds={class:"col-md-6 col-12"},ns={class:"form-floating mb-3"},as=["value"],cs=s("label",{for:"floatingSelect"},[s("i",{class:"fa-solid fa-angles-left"}),F(" Сторона петель")],-1),hs={class:"col-md-6 col-12 mb-3"},ps={class:"input-group"},us={class:"form-floating"},_s=s("option",{value:{title:null}},"Выберите один из вариантов",-1),fs=["value"],ms=s("label",{for:"floatingSelect"},[s("i",{class:"fa-solid fa-paint-roller"}),F(" Отделка первой стороны ")],-1),vs=s("i",{class:"fa-solid fa-images"},null,-1),gs=[vs],ys={key:0,style:{"line-height":"100%"}},bs=s("small",null,[s("em",null,[s("strong",{class:"text-danger"},"Внимание!"),F(" сочетание размера и материала не доступно для заказа!")])],-1),Fs=[bs],ks={class:"col-md-6 col-12"},ws={key:1,class:"card rounded-0"},Cs=s("div",{class:"card-body p-3 disabled-element"},[s("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),$s=[Cs],Ds={class:"col-md-6 col-12 mb-3"},Ss={class:"input-group"},Vs={class:"form-floating"},Is=s("option",{value:{title:null}},"Выберите один из вариантов",-1),Us=["value"],zs=s("label",{for:"floatingSelect"},[s("i",{class:"fa-solid fa-paint-roller"}),F(" Отделка второй стороны")],-1),Ms=s("i",{class:"fa-solid fa-images"},null,-1),js=[Ms],Ps={key:0,style:{"line-height":"100%"}},Rs=s("small",null,[s("em",null,[s("strong",{class:"text-danger"},"Внимание!"),F(" сочетание размера и материала не доступно для заказа!")])],-1),Ts=[Rs],Es={class:"col-md-6 col-12"},Ls={key:1,class:"card rounded-0"},As=s("div",{class:"card-body p-3 disabled-element"},[s("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),qs=[As],Bs={class:"col-md-6 col-12"},Os={class:"col-md-6 col-12"},Hs={class:"col-md-6 col-12"},Ws={key:0,class:"col-md-6 col-12"},Ns={class:"form-floating w-100"},Gs=["value"],Ks=s("label",{for:"door-service-painting"},"Выберите вариант",-1),Xs={class:"col-12"},Js={class:"form-floating"},Qs=s("label",{for:"door-comment"},"Комментарий к двери",-1),Ys={key:0,class:"row py-3"},Zs={class:"col-12 d-flex align-items-center"},xs={class:"form-check form-switch"},or=s("label",{class:"form-check-label",for:"need-handle-holes"}," Нужна ручка \\ не нужна ручка ",-1),er={key:0,class:"col-md-6 col-12"},tr={class:"form-floating mb-3"},sr=["value"],rr=s("label",{for:"floatingSelect"},"Отверстия под ручку",-1),ir={key:1,class:"col-md-6 col-12"},lr={class:"form-floating"},dr=s("option",{value:{title:null}},"Выберите один из вариантов",-1),nr=["value"],ar=s("label",{for:"floatingSelect"},"Выбор ручки",-1),cr={key:2,class:"col-12 d-flex align-items-center"},hr={class:"form-floating w-100 mb-3"},pr=s("option",{value:{title:null}},"Не выбрано",-1),ur=["value"],_r=s("label",{for:"door-service-door_closer"},"Вариант дополнительного сервиса",-1),fr={key:3,class:"col-12"},mr={class:"row"},vr={class:"col-12"},gr={class:"mb-2"},yr={class:"col-lg-3 col-md-3 col-12 mb-2"},br=["onClick"],Fr={class:"card-img-top",alt:"..."},kr={class:"card-body"},wr={key:0,class:"font-bold"},Cr={key:1,class:"card-text"},$r={key:4,class:"col-12"},Dr=s("div",{class:"alert alert-warning rounded-0",role:"alert"},[s("p",null,"Вариантов изображений ручки нет")],-1),Sr=[Dr],Vr={class:"col-12 d-flex align-items-center"},Ir={class:"form-check form-switch"},Ur=s("label",{class:"form-check-label",for:"need-upper-jumper"}," Нужна верхняя перемычка ",-1),zr={class:"col-12 d-flex align-items-center"},Mr={class:"form-check form-switch"},jr=s("label",{class:"form-check-label",for:"need-automatic-doorstep"}," Нужен автоматический порог \\ не нужен ",-1),Pr={key:5,class:"col-12 d-flex align-items-center"},Rr={class:"form-floating w-100 my-3"},Tr=["value"],Er=s("label",{for:"door-service-doorstep"},"Выберите вариант",-1),Lr={class:"col-12 d-flex align-items-center"},Ar={class:"form-check form-switch"},qr=s("label",{class:"form-check-label",for:"need-hidden-stopper"}," Нужен скрытый стопор \\ не нужен ",-1),Br={key:6,class:"col-12 d-flex align-items-center"},Or={class:"form-floating w-100 my-3"},Hr=["value"],Wr=s("label",{for:"door-service-stopper"},"Выберите вариант",-1),Nr={class:"col-12 d-flex align-items-center"},Gr={class:"form-check form-switch"},Kr=s("label",{class:"form-check-label",for:"need-hidden-door-closer"}," Нужен скрытый доводчик \\ не нужен ",-1),Xr={key:7,class:"col-12 d-flex align-items-center"},Jr={class:"form-floating w-100 my-3"},Qr=["value"],Yr=s("label",{for:"door-service-door_closer"},"Выберите вариант",-1),Zr={class:"col-12 d-flex align-items-center"},xr={class:"form-check form-switch"},oi=s("label",{class:"form-check-label",for:"need-hidden-skirting-board"}," Нужен скрытый плинтус \\ не нужен ",-1),ei={class:"col-12 d-flex align-items-center"},ti={class:"form-check form-switch"},si=s("label",{class:"form-check-label",for:"need-door-install"}," Нужна установка двери \\ не нужна ",-1),ri={class:"col-12 d-flex align-items-center"},ii={class:"form-check form-switch"},li=s("label",{class:"form-check-label",for:"need-door-wrapper"}," Нужна упаковка двери \\ не нужна ",-1),di={class:"footer-nav w-100"},ni={class:"row bg-white p-2 m-0 border-gray-100 border shadow-md"},ai={class:"form-floating"},ci=["value"],hi=s("label",{for:"door-type"},"Тип цены",-1),pi={key:0,class:"col-md-2 mb-2"},ui={class:"form-floating"},_i=s("label",{for:"floatingInput"},"Процент дилера",-1),fi={class:"col-md-4 d-flex justify-between mb-2"},mi=s("i",{class:"fa-solid fa-minus"},null,-1),vi=[mi],gi={class:"input-group"},yi=s("i",{class:"fa-solid fa-plus"},null,-1),bi=[yi],Fi={class:"col-md-2 d-flex justify-center align-items-center mb-2"},ki={class:"text-center text-primary font-bold text-black",style:{"font-size":"16px"}},wi={class:"col-md-2 d-flex"},Ci=["disabled"],$i=s("i",{class:"fa-solid fa-floppy-disk"},null,-1),Di={class:"col-md-6"},Si={class:"preview"},Vi={class:"card rounded-0 mt-3"},Ii={class:"card-body"},Ui=s("h6",null,"Характеристики",-1),zi={class:"text-muted font-bold"},Mi={class:"text-black mb-0"},ji={key:0,class:"mr-1"},Pi={key:1,class:"mr-1"},Ri={key:2,class:"mr-1"},Ti={key:3,class:"mr-1"},Ei={key:4,class:"mr-1"},Li={key:5,class:"mr-1"},Ai={key:6,class:"mr-1"},qi={key:7,class:"mr-1"},Bi={key:1,class:"card rounded-0 mt-3"},Oi={class:"card-body"},Hi={class:"table"},Wi=s("br",null,null,-1),Ni={key:0},Gi=s("br",null,null,-1),Ki={class:"col-12"},Xi=["onClick"],Ji=s("strong",null,"Внимание!",-1),Qi={key:1,class:"row"},Yi=s("div",{class:"col-12"},[s("div",{class:"d-flex justify-content-center align-items-center flex-column",style:{"min-height":"500px"}},[s("h5",null,"Загружаем страничку...."),s("div",{class:"spinner-border my-3",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])])],-1),Zi=[Yi],xi={class:"modal fade",id:"confirm-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ol={class:"modal-dialog modal-dialog-centered"},el={class:"modal-content rounded-0"},tl={class:"modal-body"},sl=s("div",{class:"d-flex justify-center p-3"},[s("img",{src:"/images/logo.png",style:{width:"100px"},alt:""})],-1),rl={class:"font-bold text-center py-3"},il={class:"text-center pb-3"},ll={class:"row"},dl={class:"col-6"},nl={class:"col-6"},al=["id"],cl={class:"modal-dialog modal-lg"},hl={class:"modal-content"},pl=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для первый стороны"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[s("i",{class:"fa-solid fa-xmark"})])],-1),ul={class:"modal-body"},_l=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),fl=["id"],ml={class:"modal-dialog modal-lg"},vl={class:"modal-content"},gl=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для второй стороны"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[s("i",{class:"fa-solid fa-xmark"})])],-1),yl={class:"modal-body"},bl=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),Fl={name:"MyComponent",props:["door"],data(){return{loaded:!1,type_dictionary:{size:"Петли",handle_holes_type:"Отверстие под ручку",opening_type:"Тип открытия двери и толщина",box_and_frame_color:"Цвет короба и каркаса",door_type:"Тип двери",front_side_finish_color:"Цвет отделки внешней стороны",back_side_finish_color:"Цвет отделки внутренней стороны",seal_color:"Цвет уплотнителя",fittings_color:"Цвет фурнитуры",hinge_manufacturer:"Производитель петель",front_side_finish:"Отделка внешней стороны",back_side_finish:"Отделка внутренней стороны",base:"База (под покраску)",service_doorstep:"Работа с порогом",service_painting:"Покраска фурнитуры",service_door_closer:"Работа с доводчиком",service_handle:"Работа с ручками",service_stopper:"Работа со стопором"},tmp_prices:[],need_addition:!0,messages:[],filterHeight:null,filterWidth:null,selectedColorParam:null,loadedParams:!0,confirmModal:null,finishFrontVariantModal:null,finishBackVariantModal:null,colors:[],confirm:{title:null,message:null},color_sync_update:!1,doorForm:{id:null,width:0,height:0,depth:0,count:1,price:0,size:null,purpose:null,comment:null,dealer_percent:0,opening_type:{title:null},box_and_frame_color:{title:null},door_type:{title:null},front_side_finish:{title:null},back_side_finish:{title:null},front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:{title:null},loops_count:0,price_type:{title:null},hinge_manufacturer:{title:null},handle_holes:{title:null},handle_holes_type:{title:null},need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}}}},computed:{...Z(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"]),resultPrice(){return this.doorForm.price_type.id!==3?this.summaryPrice:this.summaryPriceWithDealer},summaryPriceWithDealer(){return Math.round((this.summaryPrice||0)*(1+(this.doorForm.dealer_percent||0)/100))},summaryPrice(){let r=0,o=null;this.tmp_prices=[];let t=this.doorForm.price_type.key;Object.keys(this.doorForm).forEach(c=>{let _=!1;if(c&&typeof this.doorForm[c]=="object"&&this.doorForm[c]!=null&&c!=="door_type"){if(c==="opening_type"&&this.doorForm[c].sizes){_=!0;let u=this.doorForm[c].sizes.findIndex(k=>k.width==this.doorForm.width&&k.height==this.doorForm.height),v=u===-1?0:this.doorForm[c].sizes[u].price[t];r+=parseInt(v||0),this.tmp_prices.push({type:c,price:v})}if(c.indexOf("_color")!==-1&&this.doorForm[c].sizes&&!_){_=!0;let u=(this.doorForm[c]||{excludes:[]}).excludes.indexOf(c.substring(0,c.indexOf("_color")))!==-1,v=0;if(!this.doorForm[c].assign_with_size)v=u?0:this.doorForm[c].sizes[0].price[t];else{let k=this.doorForm[c].sizes.findIndex(I=>I.width==this.doorForm.width&&I.height==this.doorForm.height);v=k===-1||u?0:this.doorForm[c].sizes[k].price[t]}r+=parseInt(v||0),this.tmp_prices.push({type:c,price:v})}if(c==="hinge_manufacturer"&&this.doorForm[c].title!=null&&!_){_=!0;let u=this.doorForm[c].price[t],v=0;this.doorForm.size&&(v=this.doorForm.size.loops.count*u),r+=parseInt(v||0),this.tmp_prices.push({type:c,price:u,full_price:v})}if(c==="size"&&this.doorForm[c].loops.price&&!_){_=!0;let u=this.doorForm[c].loops.price[t];r+=parseInt(u||0),this.tmp_prices.push({type:c,price:u})}if(c==="service_painting"&&this.doorForm[c].title!=null&&!_){_=!0;let u=this.doorForm.fittings_color.is_ral?this.doorForm[c].price[t]:0,v=0;this.doorForm.size&&(v=(this.doorForm.size.loops.count+1)*u),r+=v||0,this.tmp_prices.push({type:c,price:u,full_price:v})}if(this.doorForm[c].price&&!_){let u=typeof this.doorForm[c].price=="object"?this.doorForm[c].price[t]||0:this.doorForm[c].price||0;r+=parseInt(u||0),this.tmp_prices.push({type:c,price:u})}}});let i=this.getDictionary.prices,e=0,l=!1,n=null;i.forEach(c=>{c.width===this.doorForm.width&&c.height===this.doorForm.height&&(l=!0,n=c)});let f=c=>{let _=typeof this.doorForm.door_type.price=="object"?this.doorForm.door_type.price[t]:this.doorForm.door_type.price,u=this.doorForm.door_type.id!==3?1:.8,v=this.doorForm.door_type.need_percent_price?c*_/100:c*u+_;return this.tmp_prices.push({type:"door_type",price:(v||0)>0?v:c}),(v||0)>0?v:c};if(l){o=n.materials.find(_=>_.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let c=typeof o.price=="object"?o.price[t]:o.price;this.tmp_prices.push({type:"base",price:c}),e=parseInt(f(c)),n.materials.forEach(_=>{if(_.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let u=typeof _.price=="object"?_.price[t]:_.price;e+=u,this.tmp_prices.push({type:"front_side_finish",price:u})}if(_.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let u=typeof _.price=="object"?_.price[t]:_.price;e+=u,this.tmp_prices.push({type:"back_side_finish",price:u})}})}else for(let c=0;c<i.length;c++)if(i[c].width>=this.doorForm.width&&i[c].height>=this.doorForm.height){o=i[c].materials.find(u=>u.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let _=typeof o.price=="object"?o.price[t]:o.price;this.tmp_prices.push({type:"base",price:_}),e=parseInt(f(_)),i[c].materials.forEach(u=>{if(u.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let v=typeof u.price=="object"?u.price[t]:u.price;e+=v,this.tmp_prices.push({type:"front_side_finish",price:v})}}),i[c].materials.forEach(u=>{if(u.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let v=typeof u.price=="object"?u.price[t]:u.price;e+=v,this.tmp_prices.push({type:"back_side_finish",price:v})}});break}return r+e},filteredHeight(){return this.getDictionary?this.filterHeight?this.getDictionary.size_variants.filter(r=>(""+r.height).indexOf(this.filterHeight)!==-1):this.getDictionary.size_variants:[]},filteredWidth(){return this.getDictionary?this.filterWidth?this.getDictionary.size_variants.filter(r=>(""+r.width).indexOf(this.filterWidth)!==-1):this.getDictionary.size_variants:[]}},watch:{doorForm:{handler(r){this.loadedParams=!1,this.$nextTick(()=>{this.loadedParams=!0})},deep:!0},"doorForm.fittings_color":{handler(r){if(this.doorForm.fittings_color.title==null)this.doorForm.service_painting={title:null};else{let o=this.getServiceByType("service_painting");this.doorForm.service_painting=o.length>0?o[0]:{title:null}}},deep:!0},"doorForm.need_hidden_stopper":{handler(r){if(!this.doorForm.need_hidden_stopper)this.doorForm.service_stopper={title:null};else{let o=this.getServiceByType("service_stopper");this.doorForm.service_stopper=o.length>0?o[0]:{title:null}}},deep:!0},"doorForm.need_hidden_door_closer":{handler(r){if(!this.doorForm.need_hidden_door_closer)this.doorForm.service_door_closer={title:null};else{let o=this.getServiceByType("service_door_closer");this.doorForm.service_door_closer=o.length>0?o[0]:{title:null}}},deep:!0},"doorForm.need_automatic_doorstep":{handler(r){if(!this.doorForm.need_automatic_doorstep)this.doorForm.service_doorstep={title:null};else{let o=this.getServiceByType("service_doorstep");this.doorForm.service_doorstep=o.length>0?o[0]:{title:null}}},deep:!0},"doorForm.need_handle_holes":{handler(r){this.doorForm.need_handle_holes||(this.doorForm.handle_holes=this.getDictionary.handle_holes_variants[0],this.doorForm.handle_holes_type={title:null})},deep:!0},"doorForm.opening_type":{handler(r){if(this.doorForm.opening_type){let o=this.getDictionary.opening_variants.find(t=>t.id===this.doorForm.opening_type.id);o&&(this.doorForm.depth=o.depth||0)}},deep:!0},summaryPriceWithDealer:{handler(r){this.doorForm.price=this.summaryPriceWithDealer},deep:!0},summaryPrice:{handler(r){this.doorForm.price=this.summaryPrice},deep:!0}},mounted(){window.addEventListener("clear-cart",r=>{this.$store.dispatch("loadFormattedSizes").then(o=>{this.clearForm(),this.loaded=!0}).catch(()=>{})}),this.confirmModal=new bootstrap.Modal(document.getElementById("confirm-modal"),{}),this.door?this.$store.dispatch("loadFormattedSizes").then(r=>{this.loaded=!1,this.$nextTick(()=>{this.doorForm.id=this.door.product.id,this.doorForm.width=this.door.product.width,this.doorForm.height=this.door.product.height,this.doorForm.depth=this.door.product.depth,this.doorForm.count=this.door.quantity,this.doorForm.size=this.door.product.size,this.doorForm.purpose=this.door.product.purpose||"Входная",this.doorForm.handle_holes=this.door.product.handle_holes||{title:null},this.doorForm.handle_holes_type=this.door.product.handle_holes_type||{title:null},this.doorForm.opening_type=this.door.product.opening_type||{title:null},this.doorForm.box_and_frame_color=this.door.product.box_and_frame_color||{title:null},this.doorForm.door_type=this.door.product.door_type||{title:null},this.doorForm.front_side_finish=this.door.product.front_side_finish||{title:null},this.doorForm.back_side_finish=this.door.product.back_side_finish||{title:null},this.doorForm.front_side_finish_color=this.door.product.front_side_finish_color||{title:null},this.doorForm.back_side_finish_color=this.door.product.back_side_finish_color||{title:null},this.doorForm.seal_color=this.door.product.seal_color||{title:null},this.doorForm.fittings_color=this.door.product.fittings_color||{title:null},this.doorForm.loops=this.door.product.loops||{title:null},this.doorForm.loops_count=this.door.product.loops_count||0,this.doorForm.price_type=this.door.product.price_type||{title:null},this.doorForm.hinge_manufacturer=this.door.product.hinge_manufacturer||{title:null},this.doorForm.need_handle_holes=this.door.product.need_handle_holes||!0,this.doorForm.need_upper_jumper=this.door.product.need_upper_jumper||!0,this.doorForm.need_automatic_doorstep=this.door.product.need_automatic_doorstep||!1,this.doorForm.need_hidden_stopper=this.door.product.need_hidden_stopper||!1,this.doorForm.need_hidden_door_closer=this.door.product.need_hidden_door_closer||!1,this.doorForm.need_hidden_skirting_board=this.door.product.need_hidden_skirting_board||!1,this.doorForm.need_door_install=this.door.product.need_door_install||!1,this.doorForm.need_wrapper=this.door.product.need_wrapper||!0,this.doorForm.service_doorstep=this.door.product.service_doorstep||{title:null},this.doorForm.service_painting=this.door.product.service_painting||{title:null},this.doorForm.service_stopper=this.door.product.service_stopper||{title:null},this.doorForm.service_door_closer=this.door.product.service_door_closer||{title:null},this.doorForm.service_handle=this.door.product.service_handle||{title:null},this.loaded=!0})}).catch(()=>{}):this.$store.dispatch("loadFormattedSizes").then(r=>{this.clearForm(),this.loaded=!0}).catch(()=>{})},methods:{loadRalColors(){this.$store.dispatch("loadRalColors")},openConfirmModal(r,o){this.confirm.title=r||null,this.confirm.message=o||null,this.confirmModal.show()},selectSideFinish(r,o,t){this.doorForm[r][o][t].selected||!1||this.doorForm[r][o].forEach(e=>{e.selected&&delete e.selected}),this.doorForm[r][o][t].selected=!this.doorForm[r][o][t].selected},priceForSide(r){let o=this.doorForm.price_type.key,t=0,i=null,e=this.getDictionary.prices;return this.doorForm.width===0&&this.doorForm.height===0?0:(e.forEach(l=>{this.doorForm.width===l.width&&this.doorForm.height===l.height&&(i=l)}),i&&i.materials&&i.materials.forEach(l=>{l.id===this.doorForm[r].id&&(l.price,t=typeof l.price=="object"?l.price[o]:l.price)}),t)},clearForm(){this.loaded=!1,this.confirmModal.hide(),this.$nextTick(()=>{const r={purpose:"Дверь "+(this.cartProducts.length+1),id:ho.v1(),count:1,width:this.getDictionary.size_variants[0].width,height:this.getDictionary.size_variants[0].height,size:this.getDictionary.size_variants[0],loops_count:this.getDictionary.size_variants[0].loops.count,handle_holes:this.getDictionary.handle_holes_variants[0],handle_holes_type:{title:null},opening_type:this.getDictionary.opening_variants[0],box_and_frame_color:{title:null},door_type:this.getDictionary.door_variants[0],front_side_finish:this.getDictionary.finishes_variants[0],back_side_finish:this.getDictionary.finishes_variants[0],front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:this.getDictionary.loops_variants[0],price_type:this.getDictionary.price_type_variants[1],hinge_manufacturer:this.getDictionary.hinge_manufacturer_variants[0],need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}};this.doorForm=r,this.loaded=!0})},selectDoorSize(r){if(r==null){this.doorForm.width=0,this.doorForm.height=0,this.doorForm.size=null,this.doorForm.loops_count=0;return}this.doorForm.width=r.width,this.doorForm.height=r.height,this.doorForm.size=r,this.doorForm.loops_count=r.loops.count},changeDoorCount(r){r==="add"&&this.doorForm.count++,r==="sub"&&this.doorForm.count>0&&this.doorForm.count--},selectFrontSideFinish(){(this.doorForm.front_side_finish.door_variants||[]).length!==0&&(this.finishFrontVariantModal=new bootstrap.Modal(document.getElementById("finish-front-variant-modal-"+this.doorForm.id),{}),this.finishFrontVariantModal.show())},selectBackSideFinish(){(this.doorForm.back_side_finish.door_variants||[]).length!==0&&(this.finishBackVariantModal=new bootstrap.Modal(document.getElementById("finish-back-variant-modal-"+this.doorForm.id),{}),this.finishBackVariantModal.show())},getServiceByType(r){if((this.getDictionary.services||[]).length===0)return[];let o=this.getDictionary.services.filter(t=>t.type===r&&t.is_active);return o.length>0?o.sort((t,i)=>i.order_position-t.order_position):[]},alert(r){this.messages.push(r)},removeMessage(r){this.messages.splice(r,1)},syncColors(r,o){o.title!="RAL"&&(this.color_sync_update=!0,this.$nextTick(()=>{this.color_sync_update=!1,this.doorForm.box_and_frame_color.title==null&&(this.doorForm.box_and_frame_color=o),this.doorForm.seal_color.title==null&&(this.doorForm.seal_color=o),this.doorForm.fittings_color.title==null&&(this.doorForm.fittings_color=o)}))},submitForm(){this.messages=[],this.$store.dispatch("addProductToCart",{product:this.doorForm,price:this.summaryPrice}).then(()=>{this.confirm.title="Товар успешно добавлен в корзину",this.confirm.message="Очистить форму?",this.confirmModal.show(),this.$notify({title:"DoDoors",text:"Дверь успешно добавлена в корзину",type:"success"})})}}},kl=Object.assign(Fl,{setup(r){return(o,t)=>{const i=ro("lazy");return d(),a(g,null,[o.loaded?(d(),a("div",nt,[s("div",at,[s("form",{onSubmit:t[64]||(t[64]=uo((...e)=>o.submitForm&&o.submitForm(...e),["prevent"]))},[s("div",ct,[s("div",ht,[s("button",{type:"button",onClick:t[0]||(t[0]=e=>o.openConfirmModal("Внимание!","Вы очищает текущую работу в калькуляторе! Продолжить?")),class:"btn rounded-0 w-100 btn-dark p-3"},"Очистить форму ")]),s("div",pt,[s("div",ut,[s("div",_t,[m(s("input",{type:"text",min:"0","onUpdate:modelValue":t[1]||(t[1]=e=>o.doorForm.purpose=e),class:"form-control",id:"floatingInput"},null,512),[[z,o.doorForm.purpose]]),ft]),mt,s("ul",vt,[s("li",null,[s("a",{class:"dropdown-item",onClick:t[2]||(t[2]=e=>o.doorForm.purpose=null),href:"javascript:void(0)"},"Не выбрано")]),gt,s("li",null,[(d(!0),a(g,null,y(o.getDictionary.purpose_variants,e=>(d(),a("a",{class:b(["dropdown-item",{"bg-primary text-white":o.doorForm.purpose===e}]),onClick:l=>o.doorForm.purpose=e,href:"javascript:void(0)"},p(e),11,yt))),256))])])])]),s("div",bt,[s("div",Ft,[s("div",kt,[m(s("input",{type:"number",min:"0",onInvalid:t[3]||(t[3]=e=>o.alert("Вы не выбрали  ввели высоту двери!")),"onUpdate:modelValue":t[4]||(t[4]=e=>o.doorForm.height=e),class:"form-control",id:"floatingInput",required:""},null,544),[[z,o.doorForm.height]]),wt]),Ct,s("ul",$t,[s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[5]||(t[5]=e=>o.selectDoorSize(null))},"Не выбрано")]),Dt,s("li",St,[s("div",Vt,[m(s("input",{type:"search","onUpdate:modelValue":t[6]||(t[6]=e=>o.filterHeight=e),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[z,o.filterHeight]]),It])]),Ut,s("li",zt,[(d(!0),a(g,null,y(o.filteredHeight,e=>(d(),a("a",{class:b(["dropdown-item",{"bg-primary":o.doorForm.width===e.width&&o.doorForm.width===e.height}]),onClick:l=>o.selectDoorSize(e),href:"javascript:void(0)"},p(e.height)+"x"+p(e.width),11,Mt))),256)),o.filteredHeight.length===0?(d(),a("p",jt,"Ничего не найдено")):h("",!0)])])])]),s("div",Pt,[s("div",Rt,[s("div",Tt,[m(s("input",{type:"number",min:"0",onInvalid:t[7]||(t[7]=e=>o.alert("Вы не выбрали  ввели ширину двери!")),"onUpdate:modelValue":t[8]||(t[8]=e=>o.doorForm.width=e),class:"form-control",id:"floatingInput",required:""},null,544),[[z,o.doorForm.width]]),Et]),Lt,s("ul",At,[s("li",null,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[9]||(t[9]=e=>o.selectDoorSize(null))},"Не выбрано")]),qt,s("li",Bt,[s("div",Ot,[m(s("input",{type:"search","onUpdate:modelValue":t[10]||(t[10]=e=>o.filterWidth=e),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[z,o.filterWidth]]),Ht])]),Wt,s("li",Nt,[(d(!0),a(g,null,y(o.filteredWidth,e=>(d(),a("a",{class:b(["dropdown-item",{"bg-primary text-white":o.doorForm.width===e.width&&o.doorForm.width===e.height}]),onClick:l=>o.selectDoorSize(e),href:"javascript:void(0)"},p(e.height)+"x"+p(e.width),11,Gt))),256)),o.filteredWidth.length===0?(d(),a("p",Kt,"Ничего не найдено")):h("",!0)])])])]),s("div",Xt,[s("div",Jt,[m(s("select",{class:"form-select","onUpdate:modelValue":t[11]||(t[11]=e=>o.doorForm.opening_type=e),onInvalid:t[12]||(t[12]=e=>o.alert("Вы не выбрали вариант открывания и толщину двери!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Qt,(d(!0),a(g,null,y(o.getDictionary.opening_variants,e=>(d(),a("option",{value:e},p(e.title)+" (толщина "+p(e.depth)+" мм) ",9,Yt))),256))],544),[[V,o.doorForm.opening_type]]),Zt])]),s("div",xt,[s("div",os,[m(s("select",{class:"form-select","onUpdate:modelValue":t[13]||(t[13]=e=>o.doorForm.door_type=e),onInvalid:t[14]||(t[14]=e=>o.alert("Вы не выбрали тип двери!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(g,null,y(o.getDictionary.door_variants,e=>(d(),a("option",{value:e},p(e.title),9,es))),256))],544),[[V,o.doorForm.door_type]]),ts])]),s("div",ss,[s("div",rs,[m(s("select",{class:"form-select","onUpdate:modelValue":t[15]||(t[15]=e=>o.doorForm.hinge_manufacturer=e),onInvalid:t[16]||(t[16]=e=>o.alert("Вы не выбрали расположение петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(g,null,y(o.getDictionary.hinge_manufacturer_variants,e=>(d(),a("option",{value:e},p(e.title),9,is))),256))],544),[[V,o.doorForm.hinge_manufacturer]]),ls])]),s("div",ds,[s("div",ns,[m(s("select",{class:"form-select","onUpdate:modelValue":t[17]||(t[17]=e=>o.doorForm.loops=e),onInvalid:t[18]||(t[18]=e=>o.alert("Вы не выбрали сторону петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(g,null,y(o.getDictionary.loops_variants,e=>(d(),a("option",{value:e},p(e.title),9,as))),256))],544),[[V,o.doorForm.loops]]),cs])]),s("div",hs,[s("div",ps,[s("div",us,[m(s("select",{class:"form-select",onInvalid:t[19]||(t[19]=e=>o.alert("Вы не выбрали отделку первой стороны двери!")),"onUpdate:modelValue":t[20]||(t[20]=e=>o.doorForm.front_side_finish=e),id:"floatingSelect","aria-label":"Floating label select example",required:""},[_s,(d(!0),a(g,null,y(o.getDictionary.finishes_variants,e=>(d(),a("option",{value:e},p(e.title),9,fs))),256))],544),[[V,o.doorForm.front_side_finish]]),ms]),(o.doorForm.front_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:t[21]||(t[21]=(...e)=>o.selectFrontSideFinish&&o.selectFrontSideFinish(...e)),class:"btn btn-outline-secondary rounded-0",type:"button"},gs)):h("",!0)]),o.priceForSide("front_side_finish")===0?(d(),a("p",ys,Fs)):h("",!0)]),s("div",ks,[o.doorForm.front_side_finish.title!=="Под покраску"?(d(),P(E,{key:0,filter:"front_side_finish_color",onInvalid:t[22]||(t[22]=e=>o.alert("Вы не выбрали цвет отделки первой стороны")),modelValue:o.doorForm.front_side_finish_color,"onUpdate:modelValue":t[23]||(t[23]=e=>o.doorForm.front_side_finish_color=e)},{name:T(()=>[F(" Цвет отделки первой стороны ")]),_:1},8,["modelValue"])):(d(),a("div",ws,$s))]),s("div",Ds,[s("div",Ss,[s("div",Vs,[m(s("select",{class:"form-select",onInvalid:t[24]||(t[24]=e=>o.alert("Вы не выбрали отделку второй стороны двери!")),"onUpdate:modelValue":t[25]||(t[25]=e=>o.doorForm.back_side_finish=e),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Is,(d(!0),a(g,null,y(o.getDictionary.finishes_variants,e=>(d(),a("option",{value:e},p(e.title),9,Us))),256))],544),[[V,o.doorForm.back_side_finish]]),zs]),(o.doorForm.back_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:t[26]||(t[26]=(...e)=>o.selectBackSideFinish&&o.selectBackSideFinish(...e)),class:"btn btn-outline-secondary rounded-0",type:"button"},js)):h("",!0)]),o.priceForSide("back_side_finish")===0?(d(),a("p",Ps,Ts)):h("",!0)]),s("div",Es,[o.doorForm.back_side_finish.title!=="Под покраску"?(d(),P(E,{key:0,filter:"back_side_finish_color",onInvalid:t[27]||(t[27]=e=>o.alert("Вы не выбрали цвет отделки второй стороны")),modelValue:o.doorForm.back_side_finish_color,"onUpdate:modelValue":t[28]||(t[28]=e=>o.doorForm.back_side_finish_color=e)},{name:T(()=>[F(" Цвет отделки второй стороны ")]),_:1},8,["modelValue"])):(d(),a("div",Ls,qs))]),s("div",Bs,[o.color_sync_update?h("",!0):(d(),P(E,{key:0,filter:"box_and_frame_color",onChange:t[29]||(t[29]=e=>o.syncColors("box_and_frame_color",e)),onInvalid:t[30]||(t[30]=e=>o.alert("Вы не выбрали цвет короба и каркаса")),modelValue:o.doorForm.box_and_frame_color,"onUpdate:modelValue":t[31]||(t[31]=e=>o.doorForm.box_and_frame_color=e)},{name:T(()=>[F(" Цвет короба и каркаса ")]),_:1},8,["modelValue"]))]),s("div",Os,[o.color_sync_update?h("",!0):(d(),P(E,{key:0,filter:"seal_color",onChange:t[32]||(t[32]=e=>o.syncColors("seal_color",e)),onInvalid:t[33]||(t[33]=e=>o.alert("Вы не выбрали цвет уплотнителя")),modelValue:o.doorForm.seal_color,"onUpdate:modelValue":t[34]||(t[34]=e=>o.doorForm.seal_color=e)},{name:T(()=>[F(" Цвет уплотнителя ")]),_:1},8,["modelValue"]))]),s("div",Hs,[o.color_sync_update?h("",!0):(d(),P(E,{key:0,filter:"fittings_color",onChange:t[35]||(t[35]=e=>o.syncColors("fittings_color",e)),onInvalid:t[36]||(t[36]=e=>o.alert("Вы не выбрали цвет фурнитуры")),modelValue:o.doorForm.fittings_color,"onUpdate:modelValue":t[37]||(t[37]=e=>o.doorForm.fittings_color=e)},{name:T(()=>[F(" Цвет фурнитуры ")]),_:1},8,["modelValue"]))]),o.doorForm.fittings_color.title!=null&&o.doorForm.fittings_color.is_ral?(d(),a("div",Ws,[s("div",Ns,[m(s("select",{class:"form-select","onUpdate:modelValue":t[38]||(t[38]=e=>o.doorForm.service_painting=e),id:"door-service-painting","aria-label":"Floating label select example"},[(d(!0),a(g,null,y(o.getServiceByType("service_painting"),e=>(d(),a("option",{value:e},p(e.title||"-"),9,Gs))),256))],512),[[V,o.doorForm.service_painting]]),Ks])])):h("",!0),s("div",Xs,[s("div",Js,[m(s("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":t[39]||(t[39]=e=>o.doorForm.comment=e),style:{"min-height":"100px"},placeholder:"Оставьте комментарий",id:"door-comment"},null,512),[[z,o.doorForm.comment]]),Qs])])]),o.need_addition?(d(),a("div",Ys,[s("div",Zs,[s("div",xs,[m(s("input",{class:"form-check-input","onUpdate:modelValue":t[40]||(t[40]=e=>o.doorForm.need_handle_holes=e),type:"checkbox",role:"switch",id:"need-handle-holes",checked:""},null,512),[[U,o.doorForm.need_handle_holes]]),or])]),o.doorForm.need_handle_holes?(d(),a("div",er,[s("div",tr,[m(s("select",{class:"form-select",onInvalid:t[41]||(t[41]=e=>o.alert("Вы не выбрали отверстие под ручку!")),"onUpdate:modelValue":t[42]||(t[42]=e=>o.doorForm.handle_holes=e),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(g,null,y(o.getDictionary.handle_holes_variants,e=>(d(),a("option",{value:e},p(e.title),9,sr))),256))],544),[[V,o.doorForm.handle_holes]]),rr])])):h("",!0),o.doorForm.need_handle_holes&&o.doorForm.handle_holes.id!==3?(d(),a("div",ir,[s("div",lr,[m(s("select",{class:"form-select",onInvalid:t[43]||(t[43]=e=>o.alert("Вы не выбрали внешний вид ручки!")),"onUpdate:modelValue":t[44]||(t[44]=e=>o.doorForm.handle_holes_type=e),id:"floatingSelect","aria-label":"Floating label select example",required:""},[dr,(d(!0),a(g,null,y(o.getDictionary.handle_holes_type_variants,e=>(d(),a("option",{value:e},p(e.title),9,nr))),256))],544),[[V,o.doorForm.handle_holes_type]]),ar])])):h("",!0),o.doorForm.need_handle_holes&&o.doorForm.handle_holes.id!==3?(d(),a("div",cr,[s("div",hr,[m(s("select",{class:"form-select","onUpdate:modelValue":t[45]||(t[45]=e=>o.doorForm.service_handle=e),id:"door-service-door_closer","aria-label":"Floating label select example"},[pr,(d(!0),a(g,null,y(o.getServiceByType("service_handle"),e=>(d(),a("option",{value:e},p(e.title||"-"),9,ur))),256))],512),[[V,o.doorForm.service_handle]]),_r])])):h("",!0),(o.doorForm.handle_holes_type.variants||[]).length>0&&o.doorForm.need_handle_holes&&o.doorForm.handle_holes.id!==3?(d(),a("div",fr,[s("div",mr,[s("div",vr,[s("p",gr,[F("Цвет ручки "+p(o.doorForm.handle_holes_type.color||"не указан")+" ",1),o.doorForm.handle_holes_type.color?(d(),a("span",{key:0,class:"d-inline-block",style:R([{"background-color":o.doorForm.handle_holes_type.color},{width:"50px",height:"10px"}])},null,4)):h("",!0)])]),(d(!0),a(g,null,y(o.doorForm.handle_holes_type.variants,(e,l)=>(d(),a("div",yr,[s("div",{class:b(["card cursor-pointer",{"border-secondary shadow-lg":e.selected}]),onClick:n=>o.selectSideFinish("handle_holes_type","variants",l)},[m(s("img",Fr,null,512),[[i,e.image]]),s("div",kr,[e.title?(d(),a("h6",wr,p(e.title||"не указано"),1)):h("",!0),e.description?(d(),a("p",Cr,p(e.description||"не указано"),1)):h("",!0)])],10,br)]))),256))])])):h("",!0),(o.doorForm.handle_holes_type.variants||[]).length===0&&o.doorForm.need_handle_holes?(d(),a("div",$r,Sr)):h("",!0),s("div",Vr,[s("div",Ir,[m(s("input",{class:"form-check-input","onUpdate:modelValue":t[46]||(t[46]=e=>o.doorForm.need_upper_jumper=e),type:"checkbox",role:"switch",id:"need-upper-jumper",checked:""},null,512),[[U,o.doorForm.need_upper_jumper]]),Ur])]),s("div",zr,[s("div",Mr,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[47]||(t[47]=e=>o.doorForm.need_automatic_doorstep=e),role:"switch",id:"need-automatic-doorstep",checked:""},null,512),[[U,o.doorForm.need_automatic_doorstep]]),jr])]),o.doorForm.need_automatic_doorstep?(d(),a("div",Pr,[s("div",Rr,[m(s("select",{class:"form-select","onUpdate:modelValue":t[48]||(t[48]=e=>o.doorForm.service_doorstep=e),id:"door-service-doorstep","aria-label":"Floating label select example"},[(d(!0),a(g,null,y(o.getServiceByType("service_doorstep"),e=>(d(),a("option",{value:e},p(e.title||"-"),9,Tr))),256))],512),[[V,o.doorForm.service_doorstep]]),Er])])):h("",!0),s("div",Lr,[s("div",Ar,[m(s("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":t[49]||(t[49]=e=>o.doorForm.need_hidden_stopper=e),id:"need-hidden-stopper",checked:""},null,512),[[U,o.doorForm.need_hidden_stopper]]),qr])]),o.doorForm.need_hidden_stopper?(d(),a("div",Br,[s("div",Or,[m(s("select",{class:"form-select","onUpdate:modelValue":t[50]||(t[50]=e=>o.doorForm.service_stopper=e),id:"door-service-stopper","aria-label":"Floating label select example"},[(d(!0),a(g,null,y(o.getServiceByType("service_stopper"),e=>(d(),a("option",{value:e},p(e.title||"-"),9,Hr))),256))],512),[[V,o.doorForm.service_stopper]]),Wr])])):h("",!0),s("div",Nr,[s("div",Gr,[m(s("input",{class:"form-check-input","onUpdate:modelValue":t[51]||(t[51]=e=>o.doorForm.need_hidden_door_closer=e),type:"checkbox",role:"switch",id:"need-hidden-door-closer",checked:""},null,512),[[U,o.doorForm.need_hidden_door_closer]]),Kr])]),o.doorForm.need_hidden_door_closer?(d(),a("div",Xr,[s("div",Jr,[m(s("select",{class:"form-select","onUpdate:modelValue":t[52]||(t[52]=e=>o.doorForm.service_door_closer=e),id:"door-service-door_closer","aria-label":"Floating label select example"},[(d(!0),a(g,null,y(o.getServiceByType("service_door_closer"),e=>(d(),a("option",{value:e},p(e.title||"-"),9,Qr))),256))],512),[[V,o.doorForm.service_door_closer]]),Yr])])):h("",!0),s("div",Zr,[s("div",xr,[m(s("input",{class:"form-check-input","onUpdate:modelValue":t[53]||(t[53]=e=>o.doorForm.need_hidden_skirting_board=e),type:"checkbox",role:"switch",id:"need-hidden-skirting-board",checked:""},null,512),[[U,o.doorForm.need_hidden_skirting_board]]),oi])]),s("div",ei,[s("div",ti,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[54]||(t[54]=e=>o.doorForm.need_door_install=e),role:"switch",id:"need-door-install",checked:""},null,512),[[U,o.doorForm.need_door_install]]),si])]),s("div",ri,[s("div",ii,[m(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[55]||(t[55]=e=>o.doorForm.need_wrapper=e),role:"switch",id:"need-door-wrapper",checked:""},null,512),[[U,o.doorForm.need_wrapper]]),li])])])):h("",!0),s("div",di,[s("div",ni,[s("div",{class:b(["p-0 mb-2",{"col-md-2":o.doorForm.price_type.id===3,"col-md-4":o.doorForm.price_type.id!==3}])},[s("div",ai,[m(s("select",{class:"form-select","onUpdate:modelValue":t[56]||(t[56]=e=>o.doorForm.price_type=e),onInvalid:t[57]||(t[57]=e=>o.alert("Вы не выбрали тип цены!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(g,null,y(o.getDictionary.price_type_variants,e=>(d(),a("option",{value:e},p(e.title),9,ci))),256))],544),[[V,o.doorForm.price_type]]),hi])],2),o.doorForm.price_type.id===3?(d(),a("div",pi,[s("div",ui,[m(s("input",{type:"number",min:"0",onInvalid:t[58]||(t[58]=e=>o.alert("Вы не ввели процент дилера!")),"onUpdate:modelValue":t[59]||(t[59]=e=>o.doorForm.dealer_percent=e),class:"form-control text-center",id:"floatingInput",required:""},null,544),[[z,o.doorForm.dealer_percent]]),_i])])):h("",!0),s("div",fi,[s("button",{type:"button",onClick:t[60]||(t[60]=e=>o.changeDoorCount("sub")),class:"btn btn-dark rounded-0 mr-2 px-3"},vi),s("div",gi,[m(s("input",{type:"number",onInvalid:t[61]||(t[61]=e=>o.alert("Вы не указали количество дверей")),"onUpdate:modelValue":t[62]||(t[62]=e=>o.doorForm.count=e),min:"1",value:"1",class:"form-control rounded-0 text-center"},null,544),[[z,o.doorForm.count]])]),s("button",{type:"button",onClick:t[63]||(t[63]=e=>o.changeDoorCount("add")),class:"btn btn-dark rounded-0 ml-2 px-3"},bi)]),s("div",Fi,[s("p",ki,p(o.resultPrice)+"х"+p(o.doorForm.count)+"="+p(o.resultPrice*o.doorForm.count)+"₽",1)]),s("div",wi,[s("button",{disabled:!o.doorForm.price_type.key,class:"btn btn-dark rounded-0 w-100"},[$i,F(" Сохранить ")],8,Ci)])])])],32)]),s("div",Di,[s("div",Si,[o.loadedParams?(d(),P(Go,{key:0,modelValue:o.doorForm,"onUpdate:modelValue":t[65]||(t[65]=e=>o.doorForm=e)},null,8,["modelValue"])):h("",!0),s("div",Vi,[s("div",Ii,[Ui,s("h6",zi,p(o.doorForm.door_type.title)+" "+p(o.doorForm.width)+"x"+p(o.doorForm.height)+"x"+p(o.doorForm.depth)+", ",1),s("h6",Mi,[o.doorForm.box_and_frame_color.title?(d(),a("span",ji,"("+p(o.doorForm.box_and_frame_color.title)+"),",1)):h("",!0),o.doorForm.front_side_finish.title?(d(),a("span",Pi,"первая сторона "+p(o.doorForm.front_side_finish.title)+", ",1)):h("",!0),o.doorForm.back_side_finish.title?(d(),a("span",Ri,"/вторая сторона "+p(o.doorForm.back_side_finish.title)+",",1)):h("",!0),o.doorForm.loops.title?(d(),a("span",Ti,"петли "+p(o.doorForm.loops.title),1)):h("",!0),o.doorForm.hinge_manufacturer.title?(d(),a("span",Ei,p(o.doorForm.hinge_manufacturer.title),1)):h("",!0),o.doorForm.fittings_color.title?(d(),a("span",Li,"("+p(o.doorForm.fittings_color.title)+"),",1)):h("",!0),o.doorForm.opening_type.title?(d(),a("span",Ai,p(o.doorForm.opening_type.title)+",",1)):h("",!0),o.doorForm.handle_holes.title?(d(),a("span",qi,p(o.doorForm.handle_holes.title),1)):h("",!0)])])]),o.tmp_prices.length>0?(d(),a("div",Bi,[s("div",Oi,[s("table",Hi,[s("tbody",null,[(d(!0),a(g,null,y(o.tmp_prices,e=>(d(),a("tr",null,[s("td",null,[F(p(o.type_dictionary[e.type]||e.type)+" ",1),o.doorForm[e.type]?(d(),a(g,{key:0},[Wi,o.doorForm[e.type].description?(d(),a("small",Ni,"("+p(o.doorForm[e.type].description)+")",1)):h("",!0)],64)):h("",!0)]),s("td",null,[F(p(e.price||0)+" руб. ",1),e.full_price?(d(),a(g,{key:0},[Gi,s("small",null,"("+p(e.full_price||0)+" руб.)",1)],64)):h("",!0)])]))),256))])])])])):h("",!0)])]),s("div",Ki,[o.messages.length>0?(d(!0),a(g,{key:0},y(o.messages,(e,l)=>(d(),a("div",{onClick:n=>o.removeMessage(l),class:"alert alert-danger alert-dismissible fade show my-2",role:"alert"},[Ji,F(" "+p(e||"Ошибка"),1)],8,Xi))),256)):h("",!0)])])):(d(),a("div",Qi,Zi)),s("div",xi,[s("div",ol,[s("div",el,[s("div",tl,[sl,s("h3",rl,p(o.confirm.title||"-"),1),s("p",il,p(o.confirm.message||"-"),1),s("div",ll,[s("div",dl,[s("button",{class:"btn btn-dark rounded-0 w-100",type:"button",onClick:t[66]||(t[66]=(...e)=>o.clearForm&&o.clearForm(...e))},"Да, очистить ")]),s("div",nl,[s("button",{class:"btn btn-outline-secondary rounded-0 w-100",onClick:t[67]||(t[67]=e=>o.confirmModal.hide())},"Нет, не очищать ")])])])])])]),s("div",{class:"modal fade",id:"finish-front-variant-modal-"+o.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[s("div",cl,[s("div",hl,[pl,s("div",ul,[Y(to,{item:o.doorForm.front_side_finish,"onUpdate:item":t[68]||(t[68]=e=>o.doorForm.front_side_finish=e)},null,8,["item"])]),_l])])],8,al),s("div",{class:"modal fade",id:"finish-back-variant-modal-"+o.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[s("div",ml,[s("div",vl,[gl,s("div",yl,[Y(to,{item:o.doorForm.back_side_finish,"onUpdate:item":t[69]||(t[69]=e=>o.doorForm.back_side_finish=e)},null,8,["item"])]),bl])])],8,fl)],64)}}}),wl={class:"row"},Cl={class:"col-lg-12"},$l={name:"MyComponent",data(){return{loading:!1,messages:[],selectedColor:null,selectedDoor:null,confirm:{title:null,message:null}}},computed:{...Z(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"]),summaryPriceWithDealer(){return Math.round(this.summaryPrice*(1+(this.doorForm.dealer_percent||0)/100))},summaryPrice(){let r=0;return Object.keys(this.doorForm).forEach(o=>{o&&typeof this.doorForm[o]=="object"&&this.doorForm[o]!=null&&(r+=this.doorForm[o].price||0)}),r}},mounted(){window.addEventListener("select-door-item",r=>{this.selectedDoor=r.detail.item||null,this.loading=!0,this.$nextTick(()=>{this.loading=!1}),this.$notify({title:"DoDoors",text:"Вы выбрали дверь для редактирования"})})},methods:{selectColor(r){this.selectedColor=r.color.hex},clearForm(){this.loading=!0,this.selectedDoor=null,this.$nextTick(()=>{this.loading=!1}),this.$notify({title:"DoDoors",text:"Форма очищена"})}}},Il=Object.assign($l,{setup(r){return(o,t)=>(d(),a("div",wl,[s("div",Cl,[o.loading?h("",!0):(d(),P(kl,{key:0,onCallback:t[0]||(t[0]=i=>o.openConfirmModal("Дверь успешно добавлена в корзину!","Очистить калькулятор?")),door:o.selectedDoor},null,8,["door"]))])]))}});export{Il as _,ho as u};
