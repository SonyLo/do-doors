import{A as z}from"./ApplicationLogo-CMDFWo8U.js";import{A as M,J as O,K as C,y as I,o as n,c as r,b as e,C as F,g as y,V as E,a as k,w as u,p as f,T as B,d as p,u as $,_ as x,m as P,f as c,t as _,e as i,h as j,v as b,F as w,r as T,k as L,s as V,j as R,$ as N,l as A}from"./app-CMMLTdCu.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{v as q}from"./vue-the-mask-CaUxiVQI.js";const J={class:"relative"},Q={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(l){const t=l,o=a=>{h.value&&a.key==="Escape"&&(h.value=!1)};M(()=>document.addEventListener("keydown",o)),O(()=>document.removeEventListener("keydown",o));const d=C(()=>({48:"w-48"})[t.width.toString()]),s=C(()=>t.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":t.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),h=I(!1);return(a,m)=>(n(),r("div",J,[e("div",{onClick:m[0]||(m[0]=U=>h.value=!h.value)},[F(a.$slots,"trigger")]),y(e("div",{class:"fixed inset-0 z-40",onClick:m[1]||(m[1]=U=>h.value=!1)},null,512),[[E,h.value]]),k(B,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:u(()=>[y(e("div",{class:f(["absolute z-50 mt-2 rounded-md shadow-lg",[d.value,s.value]]),style:{display:"none"},onClick:m[2]||(m[2]=U=>h.value=!1)},[e("div",{class:f(["rounded-md ring-1 ring-black ring-opacity-5",l.contentClasses])},[F(a.$slots,"content")],2)],2),[[E,h.value]])]),_:3})]))}},S={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(l){return(t,o)=>(n(),p($(x),{href:l.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out"},{default:u(()=>[F(t.$slots,"default")]),_:3},8,["href"]))}},v={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(l){const t=l,o=C(()=>t.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(d,s)=>(n(),p($(x),{href:l.href,class:f(o.value)},{default:u(()=>[F(d.$slots,"default")]),_:3},8,["href","class"]))}},g={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(l){const t=l,o=C(()=>t.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(d,s)=>(n(),p($(x),{href:l.href,class:f(o.value)},{default:u(()=>[F(d.$slots,"default")]),_:3},8,["href","class"]))}},K={props:["modelValue","disabled"],data(){return{need_promo:!1,flgDays:!0,discount:0,clientForm:null,delivery_services:[]}},mounted(){this.clientForm=this.modelValue,this.selectPayedPercentType(1),this.loadServicesByType()},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"]),designerPrice(){let l=0;return this.cartProducts.forEach(t=>{l+=t.product.base_price||0}),this.clientForm.designer.price=(l*this.clientForm.designer.value/100).toFixed(2),this.clientForm.designer.price}},watch:{need_promo:{handler(l){this.need_promo&&(this.discount=0)},deep:!0},clientForm:{handler(l){!this.clientForm.designer.is_fix&&this.clientForm.designer.value>100&&(this.clientForm.designer.value=30),this.$emit("update:modelValue",this.clientForm)},deep:!0}},methods:{loadServicesByType(){this.$store.dispatch("loadServicesByType",{type:"service_delivery"}).then(l=>{this.delivery_services=l.data||[]}).catch(()=>{})},selectPayedPercentType(l){switch(this.clientForm.payed_percent_type=l,l){case 0:this.clientForm.payed_percent=50;break;default:case 1:this.clientForm.payed_percent=70;break;case 2:this.clientForm.payed_percent=100;break}this.changePayedPercent()},hasRoles(l){let t=!1;return typeof l=="object"?this.$page.props.auth.roles.forEach(o=>{t=t||l.includes(o)}):this.$page.props.auth.roles.includes(l),t},changeCurrentPayed(){this.clientForm.payed_percent=Math.round(this.clientForm.current_payed/this.cartTotalPrice*100)},changePayedPercent(){this.clientForm.current_payed=Math.round(this.cartTotalPrice*this.clientForm.payed_percent/100)},selectDeliveryVariant(l){var s;this.clientForm.info=l.title,this.clientForm.delivery_service=l.title,this.clientForm.delivery_price=((s=l.price)==null?void 0:s.retail)||0;const t=l.title,o=/г\.\s*([А-Яа-яЁё\- ]+)/,d=t.match(o);d&&(this.clientForm.delivery_city=d[1].trim())},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(l=>{this.discount=l.discount||0})}}},G={class:"font-bold"},H={key:0},W={class:"form-check form-switch my-2"},X={class:"form-check-label",for:"need_promo_switcher"},Y={key:0,class:"form-floating mb-2"},Z=e("label",{for:"checkout-promo"},"Скидка, %",-1),ee={key:1,class:"form-floating mb-2"},te=e("label",{for:"checkout-promo"},"Промокод",-1),oe={key:2},se=e("p",null,[e("small",null,"Начальная внесенная покупателем сумма")],-1),ne={class:"form-floating mb-2"},le=e("label",{for:"checkout-name"},"Начальная сумма, руб",-1),ie=e("p",null,[e("small",null,"Процент внесенной суммы от полной стоимости")],-1),re={class:"my-2"},ae={class:"form-floating mb-2"},de=e("label",{for:"checkout-name"},"%",-1),ce={class:"form-check form-switch"},ue=e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Указать кол-во рабочих дней / Выбрать конкретную дату",-1),me={key:0,class:"form-floating mb-2"},he=e("label",{for:"checkout-name"},"Кол-во рабочих дней",-1),pe={key:1,class:"form-floating mb-2"},fe=e("label",{for:"checkout-name"},"Срок передачи товара покупателю",-1),_e={class:"my-2"},ye=e("h6",{class:"mb-2 fw-bold"},"Информация по доставке",-1),be={class:"form-floating mb-2"},ve=e("label",{for:"delivery-price"},"Сумма за доставку",-1),ke={class:"input-group mb-2"},ge={class:"form-floating"},we=e("label",{for:"delivery-city"},"Город доставки",-1),Fe={class:"input-group-text rounded-0 border-secondary"},Ce={class:"dropdown"},$e=e("button",{class:"btn btn-light",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa-solid fa-map-location-dot"})],-1),xe={class:"dropdown-menu",style:{"max-height":"200px","overflow-y":"scroll"},"aria-labelledby":"dropdownMenuButton"},Pe=["onClick"],De={class:"dropdown-item",href:"#"},Ve={class:"form-floating mb-2"},Te=e("label",{for:"delivery-address"},"Адрес доставки",-1),Ue={key:0,class:"alert alert-light rounded-0 border-black"},Ee=e("i",{class:"fa-solid fa-xmark"},null,-1),je=e("p",{class:"mb-2"},"Подъем на этаж",-1),Se={class:"my-2"},Ie=e("h6",{class:"mb-2 fw-bold"},"Установка",-1),Le={class:"my-2"},qe={class:"form-floating mb-2"},ze=e("label",{for:"installation-count"},"Дверей к установке",-1),Me=e("p",{style:{"font-size":"10px"}},"Производить расчет цены",-1),Oe={class:"form-floating my-2"},Be={for:"installation-price"},Re={key:0},Ne={key:1},Ae=e("h6",{class:"mb-2 fw-bold"},"Работа дизайнера",-1),Je={class:"my-2 d-flex justify-content-between align-items-center"},Qe={key:0},Ke={key:1},Ge={class:"form-floating mb-2"},He={for:"installation-count"},We={key:0},Xe={key:1},Ye=["disabled"],Ze=["disabled"];function et(l,t,o,d,s,h){return s.clientForm?(n(),r(w,{key:0},[e("h6",G,[c("Итого цена "+_(Math.round(l.cartTotalPrice*(1-s.discount/100)))+" ₽ ",1),s.discount>0?(n(),r("span",H,"(скидка "+_(s.discount)+"%)",1)):i("",!0)]),e("div",W,[e("label",X,[e("span",{class:f({"fw-bold":!s.need_promo})},"скида",2),c(" \\ "),e("span",{class:f({"fw-bold":s.need_promo})},"промокод",2)]),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.need_promo=a),class:"form-check-input",type:"checkbox",role:"switch",id:"need_promo_switcher"},null,512),[[j,s.need_promo]])]),s.need_promo?i("",!0):(n(),r("div",Y,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>s.discount=a),id:"checkout-promo",placeholder:"name@example.com"},null,512),[[b,s.discount]]),Z])),s.need_promo?(n(),r("div",ee,[y(e("input",{type:"text",class:"form-control",onKeyup:t[2]||(t[2]=(...a)=>h.findPromo&&h.findPromo(...a)),"onUpdate:modelValue":t[3]||(t[3]=a=>s.clientForm.promo=a),id:"checkout-promo",placeholder:"name@example.com"},null,544),[[b,s.clientForm.promo]]),te])):i("",!0),h.hasRoles(["manager","administrator"])?(n(),r("div",oe,[se,e("div",ne,[y(e("input",{type:"text",class:"form-control",onChange:t[4]||(t[4]=(...a)=>h.changeCurrentPayed&&h.changeCurrentPayed(...a)),"onUpdate:modelValue":t[5]||(t[5]=a=>s.clientForm.current_payed=a),id:"checkout-name",placeholder:"",required:""},null,544),[[b,s.clientForm.current_payed]]),le]),ie,e("p",re,[e("span",{onClick:t[6]||(t[6]=a=>h.selectPayedPercentType(0)),class:f([{"btn-dark text-white":s.clientForm.payed_percent_type===0},"btn btn-outline-secondary text-black rounded-0 mr-2"]),style:{"font-size":"10px"}},"50\\50",2),e("span",{onClick:t[7]||(t[7]=a=>h.selectPayedPercentType(1)),class:f([{"btn-dark text-white":s.clientForm.payed_percent_type===1},"btn btn-outline-secondary text-black rounded-0 mr-2"]),style:{"font-size":"10px"}},"70\\30",2),e("span",{onClick:t[8]||(t[8]=a=>h.selectPayedPercentType(2)),class:f([{"btn-dark text-white":s.clientForm.payed_percent_type===2},"btn btn-outline-secondary text-black rounded-0 mr-2"]),style:{"font-size":"10px"}},"100% предоплата",2)]),e("div",ae,[y(e("input",{type:"text",class:"form-control",onChange:t[9]||(t[9]=(...a)=>h.changePayedPercent&&h.changePayedPercent(...a)),"onUpdate:modelValue":t[10]||(t[10]=a=>s.clientForm.payed_percent=a),id:"checkout-name",placeholder:"name@example.com",required:""},null,544),[[b,s.clientForm.payed_percent]]),de]),e("div",ce,[y(e("input",{onClick:t[11]||(t[11]=a=>s.flgDays=!s.flgDays),"onUpdate:modelValue":t[12]||(t[12]=a=>s.flgDays=a),class:"form-check-input",type:"checkbox",role:"switch",id:""},null,512),[[j,s.flgDays]]),ue]),s.flgDays?(n(),r("div",me,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=a=>s.clientForm.work_days=a),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[b,s.clientForm.work_days]]),he])):(n(),r("div",pe,[y(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=a=>s.clientForm.delivery_terms=a),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[b,s.clientForm.delivery_terms]]),fe])),e("div",_e,[e("button",{type:"button",onClick:t[15]||(t[15]=a=>s.clientForm.delivery_type=0),class:f([{"btn-dark text-white":s.clientForm.delivery_type===0},"btn btn-outline-secondary text-black rounded-0 mr-2 mb-2"])},"Доставка до адреса ",2),e("button",{type:"button",onClick:t[16]||(t[16]=a=>s.clientForm.delivery_type=1),class:f([{"btn-dark text-white":s.clientForm.delivery_type===1},"btn btn-outline-secondary text-black rounded-0 mr-2 mb-2"])},"Самовывоз ",2),e("button",{type:"button",onClick:t[17]||(t[17]=a=>s.clientForm.delivery_type=2),class:f([{"btn-dark text-white":s.clientForm.delivery_type===2},"btn btn-outline-secondary text-black rounded-0 mr-2 mb-2"])},"ТК ",2),e("button",{type:"button",onClick:t[18]||(t[18]=a=>s.clientForm.delivery_type=3),class:f([{"btn-dark text-white":s.clientForm.delivery_type===3},"btn btn-outline-secondary text-black rounded-0 mr-2 mb-2"])},"Доставка до проходной ",2)]),s.clientForm.delivery_type===0?(n(),r(w,{key:2},[ye,e("div",be,[y(e("input",{type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=a=>s.clientForm.delivery_price=a),id:"delivery-price",placeholder:"name@example.com",required:""},null,512),[[b,s.clientForm.delivery_price]]),ve]),e("div",ke,[e("div",ge,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=a=>s.clientForm.delivery_city=a),id:"delivery-city",placeholder:"name@example.com"},null,512),[[b,s.clientForm.delivery_city]]),we]),e("span",Fe,[e("div",Ce,[$e,e("ul",xe,[(n(!0),r(w,null,T(s.delivery_services,a=>(n(),r("li",{onClick:m=>h.selectDeliveryVariant(a)},[e("a",De,_(a.title||"-"),1)],8,Pe))),256))])])])]),e("div",Ve,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[21]||(t[21]=a=>s.clientForm.delivery_address=a),id:"delivery-address",placeholder:"name@example.com"},null,512),[[b,s.clientForm.delivery_address]]),Te]),s.clientForm.delivery_service?(n(),r("p",Ue,[e("span",null,_(s.clientForm.delivery_service),1),e("a",{href:"javascript:void(0)",class:"d-block p-0 m-0 text-danger",style:{"font-size":"10px"},onClick:t[22]||(t[22]=a=>s.clientForm.delivery_service=null)},[Ee,c(" убрать сервис")])])):i("",!0),je,e("div",Se,[e("button",{type:"button",onClick:t[23]||(t[23]=a=>s.clientForm.ascent_floor=!0),class:f([{"btn-dark text-white":s.clientForm.ascent_floor===!0},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Нужен ",2),e("button",{type:"button",onClick:t[24]||(t[24]=a=>s.clientForm.ascent_floor=!1),class:f([{"btn-dark text-white":s.clientForm.ascent_floor===!1},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Не нужен ",2)])],64)):i("",!0),Ie,e("div",Le,[e("button",{type:"button",onClick:t[25]||(t[25]=a=>s.clientForm.installation.need_door_install=!0),class:f([{"btn-dark text-white":s.clientForm.installation.need_door_install===!0},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Нужна ",2),e("button",{type:"button",onClick:t[26]||(t[26]=a=>s.clientForm.installation.need_door_install=!1),class:f([{"btn-dark text-white":s.clientForm.installation.need_door_install===!1},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Не нужна ",2)]),s.clientForm.installation.need_door_install?(n(),r(w,{key:3},[e("div",qe,[y(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[27]||(t[27]=a=>s.clientForm.installation.count=a),id:"installation-count",placeholder:"name@example.com"},null,512),[[b,s.clientForm.installation.count]]),ze]),Me,e("button",{type:"button",onClick:t[28]||(t[28]=a=>s.clientForm.installation.recount_type=0),style:{"font-size":"10px"},class:f([{"btn-dark text-white":s.clientForm.installation.recount_type===0},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Суммарно ",2),e("button",{type:"button",style:{"font-size":"10px"},onClick:t[29]||(t[29]=a=>s.clientForm.installation.recount_type=1),class:f([{"btn-dark text-white":s.clientForm.installation.recount_type===1},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"За единицу ",2),e("div",Oe,[y(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[30]||(t[30]=a=>s.clientForm.installation.price=a),id:"installation-price",placeholder:"name@example.com"},null,512),[[b,s.clientForm.installation.price]]),e("label",Be,[c("Цена за установку, руб "),s.clientForm.installation.recount_type===1?(n(),r("span",Re,"(за единицу)")):i("",!0),s.clientForm.installation.recount_type===0?(n(),r("span",Ne,"(суммарно)")):i("",!0)])])],64)):i("",!0),Ae,e("div",Je,[e("div",null,[e("button",{type:"button",onClick:t[31]||(t[31]=a=>s.clientForm.designer.is_fix=!0),class:f([{"btn-dark text-white":s.clientForm.designer.is_fix===!0},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Фикс ",2),e("button",{type:"button",onClick:t[32]||(t[32]=a=>s.clientForm.designer.is_fix=!1),class:f([{"btn-dark text-white":s.clientForm.designer.is_fix===!1},"btn btn-outline-secondary text-black rounded-0 mr-2"])},"Процент ",2)]),s.clientForm.designer.is_fix?i("",!0):(n(),r("span",Qe,_(h.designerPrice)+" руб",1)),s.clientForm.designer.is_fix?(n(),r("span",Ke,_(s.clientForm.designer.value)+" руб",1)):i("",!0)]),e("div",Ge,[y(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[33]||(t[33]=a=>s.clientForm.designer.value=a),id:"designer-value",placeholder:"name@example.com"},null,512),[[b,s.clientForm.designer.value]]),e("label",He,[s.clientForm.designer.is_fix?(n(),r("span",We,"Фиксированная оплата, руб")):i("",!0),s.clientForm.designer.is_fix?i("",!0):(n(),r("span",Xe,"Процент за работу,%"))])]),F(l.$slots,"loader"),e("button",{disabled:o.disabled,class:"btn btn-dark w-100 my-2 rounded-0 p-3"}," Отправить ",8,Ye)])):(n(),r("button",{key:3,disabled:o.disabled,class:"btn btn-dark w-100 my-2 rounded-0 p-3"},"Отправить ",8,Ze))],64)):i("",!0)}const tt=D(K,[["render",et]]),ot={props:["modelValue"],data(){return{clientForm:null}},watch:{clientForm:{handler(l){this.$emit("update:modelValue",this.clientForm)},deep:!0}},mounted(){this.clientForm=this.modelValue}},st={class:"form-floating mb-3"},nt=e("label",{for:"checkout-phone"},"Номер телефона",-1),lt={class:"form-floating mb-3"},it=e("label",{for:"checkout-email"},"Электронная почта",-1),rt={class:"form-floating"},at=e("label",{for:"checkout-info"},"Дополнительная информация",-1),dt={class:"row my-3"},ct={class:"col-md-4"},ut={class:"form-check"},mt=e("label",{class:"form-check-label",for:"work-with-nds"}," С НДС ",-1),ht={class:"col-md-4"},pt={class:"form-check"},ft=e("label",{class:"form-check-label",for:"work-without-nds"}," Без НДС ",-1),_t={class:"col-md-4"},yt={class:"form-check"},bt=e("label",{class:"form-check-label",for:"work-without-nds"}," Физ-лицо ",-1);function vt(l,t,o,d,s,h){const a=L("mask");return s.clientForm?(n(),r(w,{key:0},[e("div",st,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=m=>s.clientForm.phone=m),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[a,"+7(###)###-##-##"],[b,s.clientForm.phone]]),nt]),e("div",lt,[y(e("input",{type:"email",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=m=>s.clientForm.email=m),id:"checkout-email",placeholder:"name@example.com"},null,512),[[b,s.clientForm.email]]),it]),e("div",rt,[y(e("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":t[2]||(t[2]=m=>s.clientForm.info=m),placeholder:"Оставьте свой комментарий",id:"checkout-info"},null,512),[[b,s.clientForm.info]]),at]),e("div",dt,[e("div",ct,[e("div",ut,[y(e("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":t[3]||(t[3]=m=>s.clientForm.work_with_nds=m),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[V,s.clientForm.work_with_nds]]),mt])]),e("div",ht,[e("div",pt,[y(e("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":t[4]||(t[4]=m=>s.clientForm.work_with_nds=m),id:"work-without-nds"},null,512),[[V,s.clientForm.work_with_nds]]),ft])]),e("div",_t,[e("div",yt,[y(e("input",{class:"form-check-input",type:"radio",value:"2",name:"flexRadioDefault","onUpdate:modelValue":t[5]||(t[5]=m=>s.clientForm.work_with_nds=m),id:"work-without-nds"},null,512),[[V,s.clientForm.work_with_nds]]),bt])])])],64)):i("",!0)}const kt=D(ot,[["render",vt]]),gt={props:["modelValue"],data(){return{clientForm:null}},watch:{clientForm:{handler(l){this.$emit("update:modelValue",this.clientForm)},deep:!0}},mounted(){this.clientForm=this.modelValue}},wt={class:"form-floating mb-3"},Ft=e("label",{for:"checkout-phone"},"Номер телефона",-1),Ct={class:"form-floating mb-3"},$t=e("label",{for:"checkout-email"},"Электронная почта",-1),xt={class:"form-floating mb-3"},Pt=e("label",{for:"checkout-email"},"Паспорт",-1),Dt={class:"form-floating mb-3"},Vt=e("label",{for:"checkout-email"},"Выдан",-1),Tt={class:"form-floating mb-3"},Ut=e("label",{for:"checkout-email"},"Адрес доставки",-1),Et={class:"form-floating mb-3"},jt=e("label",{for:"checkout-email"},"Дополнительная информация",-1);function St(l,t,o,d,s,h){const a=L("mask");return s.clientForm?(n(),r(w,{key:0},[e("div",wt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=m=>s.clientForm.phone=m),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[a,"+7(###)###-##-##"],[b,s.clientForm.phone]]),Ft]),e("div",Ct,[y(e("input",{type:"email",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=m=>s.clientForm.email=m),id:"checkout-email",placeholder:"name@example.com"},null,512),[[b,s.clientForm.email]]),$t]),e("div",xt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=m=>s.clientForm.passport=m),id:"checkout-email",placeholder:"name@example.com"},null,512),[[a,"## ##  ######"],[b,s.clientForm.passport]]),Pt]),e("div",Dt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=m=>s.clientForm.passport_issued=m),id:"checkout-email",placeholder:"name@example.com"},null,512),[[b,s.clientForm.passport_issued]]),Vt]),e("div",Tt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=m=>s.clientForm.delivery_address=m),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[b,s.clientForm.delivery_address]]),Ut]),e("div",Et,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=m=>s.clientForm.info=m),id:"checkout-email",placeholder:"name@example.com"},null,512),[[b,s.clientForm.info]]),jt])],64)):i("",!0)}const It=D(gt,[["render",St]]),Lt={class:"input-group mb-3"},qt={class:"form-floating"},zt=e("label",{for:"checkout-name"},"Название компании\\Ф.И.О. ИП",-1),Mt={key:0,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Ot=e("i",{class:"fa-solid fa-up-right-and-down-left-from-center"},null,-1),Bt=[Ot],Rt={style:{"overflow-y":"scroll",height:"400px",width:"100%"},class:"dropdown-menu dropdown-menu-end rounded-0"},Nt=e("i",{class:"fa-solid fa-ban"},null,-1),At=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),Jt=e("i",{class:"fa-solid fa-plus"},null,-1),Qt=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),Kt={class:"p-2"},Gt={class:"form-floating mb-3"},Ht={for:"floatingInput"},Wt=["onClick"],Xt=e("br",null,null,-1),Yt={class:"badge rounded-0 btn-dark",style:{"font-size":"8px"}},Zt=["href"],eo={key:0,class:"d-flex justify-content-center my-3"},to=e("div",{class:"spinner-border text-primary mx-2",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),oo={key:1,class:"card rounded-0"},so=e("div",{class:"card-body"},[e("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),no=[so],lo={props:["type","action"],directives:{mask:q.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"]),filteredClients(){if(!this.search)return this.self_clients||[];const l=this.search.toLowerCase();return this.self_clients.filter(t=>(t.title||"").toLowerCase().includes(l)||(t.fio||"").toLowerCase().includes(l))}},watch:{},data(){return{edit_requisites:!1,search:null,tab:0,timer:null,step:0,editor_modal:null,self_clients:[],clientForm:{id:null,name:null,phone:null,email:null,info:null,promo:null,work_with_nds:1,items:[],current_payed:0,payed_percent:70,payed_percent_type:1,delivery_terms:null,ascent_floor:!1,work_days:0,installation:{need_door_install:!1,count:0,price:0,recount_type:0},designer:{is_fix:!1,value:0,price:0},passport:null,passport_issued:null,need_delivery:!1,delivery_type:1,delivery_address:null,delivery_price:null,delivery_city:null,delivery_service:null}}},mounted(){this.loadSelfClients(),this.cartProducts.forEach(l=>{l.product.need_door_install&&(this.clientForm.installation.need_door_install=!0,this.clientForm.installation.count+=l.quantity)})},methods:{showEditorForm(){window.location.href="/clients"},selectItem(){},back(){this.$emit("back")},preparedLawStatus(l){let o=(this.getDictionary.statuses||[]).find(d=>d.value===l)||null;return o?o.title:null},selectInfo(l){if(l==null){this.clientForm.id=null,this.clientForm.name=null,this.clientForm.email=null,this.clientForm.phone=null,this.clientForm.pasport=null,this.clientForm.pasport_issued=null,this.clientForm.fact_address=null;return}this.clientForm.id=l.id||null,this.clientForm.name=l.title||null,this.clientForm.email=l.email||null,this.clientForm.phone=l.phone||null,this.clientForm.delivery_address=l.fact_address||null,this.clientForm.pasport=l.pasport||null,this.clientForm.pasport_issued=l.pasport_issued||null},clearCart(){this.$store.dispatch("clearCart").then(l=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"})}).catch(l=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(l=>{this.discount=l.discount||0})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(l=>{this.self_clients=l.data||[]}).catch(()=>{})},submit(){this.timer=0;let l=setInterval(()=>{this.timer++},1e3);this.clientForm.items=this.cartProducts;let t=new FormData;Object.keys(this.clientForm).forEach(o=>{const d=this.clientForm[o]||"";typeof d=="object"?t.append(o,JSON.stringify(d)):t.append(o,d)}),t.append("action",this.action),t.append("total_price",this.cartTotalPrice),t.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:t}).then(o=>{clearInterval(l),this.timer=null,this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null,passport:null,passport_issued:null,delivery_address:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(o=>{clearInterval(l),this.timer=null,this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},io=Object.assign(lo,{__name:"CartCheckoutForm",setup(l){return(t,o)=>t.cartTotalCount>0?(n(),r("form",{key:0,onSubmit:o[8]||(o[8]=R((...d)=>t.submit&&t.submit(...d),["prevent"]))},[e("div",Lt,[e("div",qt,[y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=d=>t.clientForm.name=d),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[b,t.clientForm.name]]),zt]),t.self_clients.length>0?(n(),r("button",Mt,Bt)):i("",!0),e("ul",Rt,[e("li",null,[e("a",{class:"dropdown-item",onClick:o[1]||(o[1]=d=>t.selectInfo(null)),href:"javascript:void(0)"},[Nt,c(" Не выбрано")])]),At,e("li",null,[e("a",{class:"dropdown-item",onClick:o[2]||(o[2]=(...d)=>t.showEditorForm&&t.showEditorForm(...d)),href:"javascript:void(0)"},[Jt,c(" Создать нового")])]),Qt,e("li",null,[e("div",Kt,[e("div",Gt,[y(e("input",{type:"search","onUpdate:modelValue":o[3]||(o[3]=d=>t.search=d),class:"form-control",id:"floatingInput",placeholder:"Имя"},null,512),[[b,t.search]]),e("label",Ht,"Поиск (найдено "+_(t.filteredClients.length||0)+" клиентов) ",1)])]),(n(!0),r(w,null,T(t.filteredClients,(d,s)=>(n(),r("a",{class:f([{"btn-light":s%2===0},"p-2 d-block btn rounded-0"]),style:{"word-wrap":"break-word","overflow-wrap":"break-word"},href:"javascript:void(0)",onClick:h=>t.selectInfo(d)},[c(_(d.title||d.phone)+" ",1),Xt,e("span",Yt,_(t.preparedLawStatus(d.status)||"Не указан"),1)],10,Wt))),256))])])]),t.clientForm.id?(n(),r("a",{key:0,class:"btn btn-link mb-3 p-0",href:"/client/"+t.clientForm.id,target:"_blank"},"Редактировать клиента",8,Zt)):i("",!0),(l.type||0)===0?(n(),p(kt,{key:1,modelValue:t.clientForm,"onUpdate:modelValue":o[4]||(o[4]=d=>t.clientForm=d)},null,8,["modelValue"])):i("",!0),(l.type||0)===1?(n(),p(It,{key:2,modelValue:t.clientForm,"onUpdate:modelValue":o[5]||(o[5]=d=>t.clientForm=d)},null,8,["modelValue"])):i("",!0),k(tt,{disabled:t.timer,modelValue:t.clientForm,"onUpdate:modelValue":o[6]||(o[6]=d=>t.clientForm=d)},{loader:u(()=>[t.timer?(n(),r("div",eo,[to,c(" Отправляем... ")])):i("",!0)]),_:1},8,["disabled","modelValue"]),e("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0",onClick:o[7]||(o[7]=(...d)=>t.back&&t.back(...d))},"Назад ")],32)):(n(),r("div",oo,no))}}),ro={props:["item"],methods:{editDoorItem(){window.dispatchEvent(new CustomEvent("select-door-item",{detail:{item:this.item}}))},removeProduct(){this.$store.dispatch("removeProduct",this.item.product.id)},changeQuantityProductInCart(l="increment"){let t=l==="increment"?this.item.quantity+1:this.item.quantity-1;if(t===0){this.$store.dispatch("removeProduct",this.item.product.id);return}this.$store.dispatch("setQuantity",{id:this.item.product.id,quantity:t})}}},ao={class:"card mb-2 rounded-0"},co={class:"card-body"},uo={class:"row"},mo={class:"col-md-12"},ho={class:"text-muted font-bold"},po={class:"text-black mb-0"},fo={key:0},_o={key:1,class:"ml-1"},yo={key:2,class:"ml-1"},bo={key:3},vo={key:4,class:"ml-1"},ko={key:5,class:"ml-1"},go={key:6,class:"ml-1"},wo={key:7,class:"ml-1"},Fo={key:8,class:"ml-1"},Co={key:9,class:"ml-1"},$o={key:10,class:"ml-1"},xo={key:11,class:"ml-1"},Po={key:12,class:"ml-1"},Do={key:13,class:"ml-1"},Vo={key:14,class:"ml-1"},To={key:15,class:"ml-1"},Uo={key:16,class:"ml-1"},Eo={class:"row d-flex align-items-center"},jo={class:"col-5 col-md-5 col-lg-5 col-xl-5 d-flex justify-content-center mt-2"},So=e("i",{class:"fas fa-minus"},null,-1),Io=[So],Lo={class:"btn",style:{color:"black"}},qo=e("i",{class:"fas fa-plus"},null,-1),zo=[qo],Mo={class:"col-5 col-md-5 col-lg-5 col-xl-5"},Oo={class:"mb-0 text-center font-bold"},Bo={class:"col-2 col-md-2 col-lg-2 col-xl-2 text-center"},Ro=e("i",{class:"fas fa-times"},null,-1),No=[Ro],Ao={class:"col-12"},Jo=e("i",{class:"fa-regular fa-pen-to-square mr-2"},null,-1);function Qo(l,t,o,d,s,h){var a;return n(),r("div",ao,[e("div",co,[e("div",uo,[e("div",mo,[e("h6",ho,_(o.item.product.purpose||"-")+": "+_(o.item.product.door_type.title)+" "+_(o.item.product.width)+"x"+_(o.item.product.height)+"x "+_(((a=o.item.product.opening_type)==null?void 0:a.depth)||0),1),e("h6",po,[o.item.product.box_and_frame_color.title?(n(),r("span",fo,"("+_(o.item.product.box_and_frame_color.title)+")",1)):i("",!0),c(" лицо "),o.item.product.front_side_finish.title?(n(),r("span",_o,_(o.item.product.front_side_finish.title),1)):i("",!0),c("/ "),o.item.product.back_side_finish.title?(n(),r("span",yo,_(o.item.product.back_side_finish.title)+",",1)):i("",!0),c(" петли "),o.item.product.loops.title?(n(),r("span",bo,_(o.item.product.loops.title)+",",1)):i("",!0),o.item.product.hinge_manufacturer.title?(n(),r("span",vo,_(o.item.product.hinge_manufacturer.title)+",",1)):i("",!0),o.item.product.fittings_color.title?(n(),r("span",ko,"("+_(o.item.product.fittings_color.title)+"),",1)):i("",!0),o.item.product.opening_type.title?(n(),r("span",go,_(o.item.product.opening_type.title)+",",1)):i("",!0),o.item.product.handle_holes.title?(n(),r("span",wo,_(o.item.product.handle_holes.title)+",",1)):i("",!0),o.item.product.need_automatic_doorstep?(n(),r("span",Fo," автоматический порожек,")):i("",!0),o.item.product.need_upper_jumper?(n(),r("span",Co," верхняя перемычка,")):i("",!0),o.item.product.need_handle_holes?(n(),r("span",$o," дверная ручка,")):i("",!0),o.item.product.handle_holes_type.title?(n(),r("span",xo,_(o.item.product.handle_holes_type.title)+",",1)):i("",!0),o.item.product.handle_holes.title?(n(),r("span",Po,_(o.item.product.handle_holes.title)+",",1)):i("",!0),o.item.product.need_hidden_door_closer?(n(),r("span",Do," скрытый доводчик,")):i("",!0),o.item.product.need_hidden_skirting_board?(n(),r("span",Vo," скрытый плинтус,")):i("",!0),o.item.product.need_hidden_stopper?(n(),r("span",To," скрытый стопор,")):i("",!0),o.item.product.need_door_install?(n(),r("span",Uo," установка двери")):i("",!0)])])]),e("div",Eo,[e("div",jo,[e("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:t[0]||(t[0]=m=>h.changeQuantityProductInCart("decrement"))},Io),e("span",Lo,_(o.item.quantity),1),e("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:t[1]||(t[1]=m=>h.changeQuantityProductInCart("increment"))},zo)]),e("div",Mo,[e("h6",Oo,_(o.item.quantity*(o.item.product.price||0))+" ₽",1)]),e("div",Bo,[e("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...m)=>h.removeProduct&&h.removeProduct(...m)),class:"text-muted"},No)]),e("div",Ao,[e("button",{type:"button",style:{color:"black"},class:"btn btn-link",onClick:t[3]||(t[3]=(...m)=>h.editDoorItem&&h.editDoorItem(...m))},[Jo,c("Редактировать")])])])])])}const Ko=D(ro,[["render",Qo]]),Go={class:"offcanvas offcanvas-end",tabindex:"-1",id:"cart","aria-labelledby":"cart"},Ho={class:"offcanvas-header"},Wo={class:"offcanvas-title font-bold"},Xo={key:0},Yo={key:1},Zo=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),es={key:0,class:"offcanvas-body"},ts=e("div",{class:"hr my-3"},null,-1),os={key:1,class:"card rounded-0"},ss=e("div",{class:"card-body"},[e("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),ns=[ss],ls={key:1,class:"offcanvas-body"},is={key:2,class:"offcanvas-footer p-3"},rs={class:"card rounded-0"},as={class:"card-body"},ds={key:0},cs={class:"d-flex justify-content-between mb-2"},us={for:"send-to-mail"},ms={key:1,class:"fa-solid fa-check"},hs=e("button",{class:"btn btn-dark rounded-0 ml-2"},[e("i",{class:"fa-solid fa-paper-plane"})],-1),ps={key:0,class:"alert alert-light rounded-0 mb-2",style:{"font-size":"10px"}},fs={class:"d-flex justify-content-between mb-2"},_s={for:"send-to-telegram"},ys={key:1,class:"fa-solid fa-check"},bs=e("button",{class:"btn btn-dark rounded-0 ml-2"},[e("i",{class:"fa-solid fa-paper-plane"})],-1),vs={key:1,class:"alert alert-light rounded-0 mb-2",style:{"font-size":"10px"}},ks=e("i",{class:"fa-solid fa-floppy-disk"},null,-1),gs={props:["orderId"],directives:{mask:q.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},data(){return{tab:0,step:0,action:[],discount:0}},mounted(){},methods:{back(){this.step=0,this.tab=0},checkout(l){this.step=1,this.tab=1,this.preCheckAction(l)},preCheckAction(l){let t=this.action.findIndex(o=>o===l);if(t!==-1){this.action.splice(t,1);return}this.action.push(l)},clearCart(){this.$store.dispatch("clearCart").then(l=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"}),window.dispatchEvent(new CustomEvent("clear-cart"))}).catch(l=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},downloadCartExcel(){let l=this.cartProducts,t=new FormData;t.append("items",JSON.stringify(l)),this.$store.dispatch("downloadExcel",{cardData:t}).then(o=>{var d=window.URL.createObjectURL(new Blob([o])),s=document.createElement("a");s.href=d,s.setAttribute("download","cart.xls"),document.body.appendChild(s),s.click(),this.$notify({title:"DoDoors",text:"Excel успешно скачан!",type:"success"})}).catch(o=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(l=>{this.self_clients=l.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let l=new FormData;Object.keys(this.clientForm).forEach(t=>{const o=this.clientForm[t]||"";typeof o=="object"?l.append(t,JSON.stringify(o)):l.append(t,o)}),this.orderId&&l.append("order_id",this.orderId),l.append("total_price",this.cartTotalPrice),l.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:l}).then(t=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(t=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},ws=Object.assign(gs,{__name:"CalcCartSimple",setup(l){return(t,o)=>(n(),r("div",Go,[e("div",Ho,[e("h5",Wo,[t.tab===0?(n(),r("span",Xo,"Вы выбрали")):i("",!0),t.tab===1?(n(),r("span",Yo,"Оформление заказа")):i("",!0)]),Zo]),t.tab===0?(n(),r("div",es,[t.cartProducts.length>0?(n(),r(w,{key:0},[(n(!0),r(w,null,T(t.cartProducts,d=>(n(),p(Ko,{item:d},null,8,["item"]))),256)),ts,e("button",{onClick:o[0]||(o[0]=(...d)=>t.downloadCartExcel&&t.downloadCartExcel(...d)),class:"btn btn-dark rounded-0 w-100 mb-2"}," Скачать в виде Excel-файла "),e("button",{onClick:o[1]||(o[1]=(...d)=>t.clearCart&&t.clearCart(...d)),class:"btn btn-outline-secondary rounded-0 w-100 mb-2"}," Очистить корзину ")],64)):(n(),r("div",os,ns))])):i("",!0),t.tab===1?(n(),r("div",ls,[t.step===1?(n(),p(io,{key:0,onBack:t.back,action:t.action},null,8,["onBack","action"])):i("",!0)])):i("",!0),t.cartProducts.length>0&&t.tab===0?(n(),r("div",is,[e("div",rs,[e("div",as,[t.step===0?(n(),r("div",ds,[e("div",cs,[e("label",us,[e("button",{id:"send-to-mail",class:f([{"btn-outline-secondary":t.action.indexOf(1)!==-1},"btn btn-outline-light text-gray-400 rounded-0 mr-2"]),onClick:o[2]||(o[2]=d=>t.preCheckAction(1))},[t.action.indexOf(1)!==-1?(n(),r("i",{key:0,class:f([{"text-success":t.action.indexOf(1)!==-1},"fa-solid fa-check-double"])},null,2)):(n(),r("i",ms))],2),c(" Отправить КП на почту клиента ")]),hs]),t.action.indexOf(1)!==-1?(n(),r("p",ps,"Вы отправите КП на почту клиента при отправке в CRM")):i("",!0),e("div",fs,[e("label",_s,[e("button",{id:"send-to-telegram",class:f([{"btn-outline-secondary":t.action.indexOf(2)!==-1},"btn btn-outline-light text-gray-400 rounded-0 mr-2"]),onClick:o[3]||(o[3]=d=>t.preCheckAction(2))},[t.action.indexOf(2)!==-1?(n(),r("i",{key:0,class:f([{"text-success":t.action.indexOf(2)!==-1},"fa-solid fa-check-double"])},null,2)):(n(),r("i",ys))],2),c(" Отправить КП в телеграм ")]),bs]),t.action.indexOf(2)!==-1?(n(),r("p",vs,"Вы отправите КП в телеграм компании при отправке в CRM, после чего сможете переслать его клиенту в телеграм")):i("",!0),e("button",{class:"btn btn-success rounded-0 w-100 mb-2",onClick:o[4]||(o[4]=d=>t.checkout(0))},"Отправить сделку в СРМ "),e("button",{class:"btn btn-outline-dark rounded-0 w-100 mb-2",onClick:o[5]||(o[5]=d=>t.checkout(3))},[ks,c(" Сохранить ")])])):i("",!0)])])])):i("",!0)]))}}),Fs={class:"min-h-screen bg-gray-100"},Cs={class:"bg-white border-b border-gray-100"},$s={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xs={class:"flex justify-between h-16"},Ps={class:"flex"},Ds={class:"shrink-0 flex items-center"},Vs={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},Ts={class:"badge bg-danger ml-1 rounded-full"},Us={class:"hidden sm:flex sm:items-center sm:ms-6"},Es={class:"ms-3 relative"},js={class:"inline-flex rounded-0"},Ss={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-0 text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},Is=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Ls={class:"-me-2 flex items-center sm:hidden"},qs={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},zs={class:"pt-2 pb-3 space-y-1"},Ms={class:"pt-4 pb-1 border-t border-gray-200"},Os={class:"px-4"},Bs={class:"font-medium text-base text-gray-800"},Rs={class:"font-medium text-sm text-gray-500"},Ns={class:"mt-3 space-y-1"},As=e("hr",null,null,-1),Js={class:"mt-3 space-y-1"},Qs=e("i",{class:"fa-solid fa-lock"},null,-1),Ks=e("i",{class:"fa-solid fa-lock"},null,-1),Gs={key:0,class:"bg-white shadow"},Hs={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Ws=A('<div class="container border-b border-gray-100"><footer class="py-3 my-4"><div class="d-flex justify-center"><img src="/images/logo.jpg" style="width:100px;" alt=""></div><p class="text-center text-muted">© 2024 DoDoors</p></footer></div>',1),Xs={key:0,class:"cart-fixed-btn"},Ys={class:"btn rounded-0 shadow-lg","data-bs-toggle":"offcanvas",href:"#cart",role:"button","aria-controls":"cart"},Zs=e("i",{class:"fa-solid fa-basket-shopping text-primary"},null,-1),en={class:"badge text-primary font-bold"},tn={class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",tabindex:"-1",id:"main-side-admin-menu","aria-labelledby":"offcanvasExampleLabel"},on=e("div",{class:"offcanvas-header"},[e("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"}," DoDoors "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},[e("i",{class:"fa-solid fa-xmark"})])],-1),sn={class:"offcanvas-body"},nn={class:"row"},ln={class:"col-md-6"},rn=e("i",{class:"fa-solid fa-user-tie mr-2"},null,-1),an={class:"col-md-6"},dn=e("i",{class:"fa-solid fa-screwdriver-wrench mr-2"},null,-1),cn={class:"py-5"},un={key:0,class:"d-flex flex-col align-items-center"},mn={key:1,class:"d-flex flex-col align-items-center"},hn={props:["orderId"],data(){return{menuTab:0}},computed:{...P(["getErrors","cartTotalCount","cartProducts"])},mounted(){},methods:{hasRoles(l){return(this.$page.props.auth.roles||[]).includes(l)},can(l){return(this.$page.props.auth.permissions||[]).includes(l)}}},bn=Object.assign(hn,{__name:"AuthenticatedLayout",setup(l){const t=I(!1);return(o,d)=>{const s=N("notifications");return n(),r(w,null,[e("div",null,[k(s,{position:"top right"}),e("div",Fs,[e("nav",Cs,[e("div",$s,[e("div",xs,[e("div",Ps,[e("div",Ds,[k($(x),{href:o.route("dashboard")},{default:u(()=>[k(z,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),e("div",Vs,[o.can("manage-views-adminmenu")?(n(),p(v,{key:0,"data-bs-toggle":"offcanvas",href:"#main-side-admin-menu",role:"button","aria-controls":"main-side-admin-menu"},{default:u(()=>[c(" Админ.меню ")]),_:1})):i("",!0),k(v,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:u(()=>[c(" Главная ")]),_:1},8,["href","active"]),o.cartTotalCount>0?(n(),p(v,{key:1,href:o.route("basket"),active:o.route().current("basket")},{default:u(()=>[c(" Корзина "),e("span",Ts,_(o.cartTotalCount),1)]),_:1},8,["href","active"])):i("",!0)])]),e("div",Us,[e("div",Es,[k(Q,{align:"right",width:"48"},{trigger:u(()=>[e("span",js,[e("button",Ss,[c(_(o.$page.props.auth.user.name)+" ",1),Is])])]),content:u(()=>[k(S,{href:o.route("profile.edit")},{default:u(()=>[c(" Профиль")]),_:1},8,["href"]),k(S,{href:o.route("logout"),method:"post",as:"button"},{default:u(()=>[c(" Выход ")]),_:1},8,["href"])]),_:1})])]),e("div",Ls,[e("button",{onClick:d[0]||(d[0]=h=>t.value=!t.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(n(),r("svg",qs,[e("path",{class:f({hidden:t.value,"inline-flex":!t.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:f({hidden:!t.value,"inline-flex":t.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:f([{block:t.value,hidden:!t.value},"sm:hidden"])},[e("div",zs,[k(g,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:u(()=>[c(" Главная страница ")]),_:1},8,["href","active"])]),e("div",Ms,[e("div",Os,[e("div",Bs,_(o.$page.props.auth.user.name),1),e("div",Rs,_(o.$page.props.auth.user.email),1)]),e("div",Ns,[k(g,{href:o.route("profile.edit")},{default:u(()=>[c(" Профиль")]),_:1},8,["href"]),k(g,{href:o.route("logout"),method:"post",as:"button"},{default:u(()=>[c(" Выход ")]),_:1},8,["href"]),As]),e("div",Js,[o.can("manage-users")?(n(),p(g,{key:0,class:"p-3",href:o.route("users"),active:o.route().current("users")},{default:u(()=>[c(" Пользователи ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-clients")?(n(),p(g,{key:1,class:"p-3"},{default:u(()=>[c(" Клиенты "),Qs]),_:1})):i("",!0),o.can("manage-orders")?(n(),p(g,{key:2,class:"p-3"},{default:u(()=>[c(" Заказы "),Ks]),_:1})):i("",!0),o.can("manage-materials")?(n(),p(g,{key:3,class:"p-3",href:o.route("materials"),active:o.route().current("materials")},{default:u(()=>[c(" Материалы ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-handles")?(n(),p(g,{key:4,class:"p-3",href:o.route("handles"),active:o.route().current("handles")},{default:u(()=>[c(" Ручки ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-hinges")?(n(),p(g,{key:5,class:"p-3",href:o.route("hinges"),active:o.route().current("hinges")},{default:u(()=>[c(" Петли ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-door-variants")?(n(),p(g,{key:6,class:"p-3",href:o.route("door-variants"),active:o.route().current("door-variants")},{default:u(()=>[c(" Типы дверей ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-colors")?(n(),p(g,{key:7,class:"p-3",href:o.route("colors"),active:o.route().current("colors")},{default:u(()=>[c(" Цвета ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-sizes")?(n(),p(g,{key:8,class:"p-3",href:o.route("sizes"),active:o.route().current("sizes")},{default:u(()=>[c(" Размеры ")]),_:1},8,["href","active"])):i("",!0)])])],2)]),o.$slots.header?(n(),r("header",Gs,[e("div",Hs,[F(o.$slots,"header")])])):i("",!0),e("main",null,[F(o.$slots,"default")])])]),Ws,o.cartTotalCount>0?(n(),r("div",Xs,[e("a",Ys,[Zs,e("span",en,_(o.cartTotalCount)+" шт.",1)])])):i("",!0),k(ws,{"order-id":l.orderId},null,8,["order-id"]),e("div",tn,[on,e("div",sn,[e("div",nn,[e("div",ln,[e("button",{class:f(["btn w-100 rounded-0",{"btn-dark":o.menuTab===0,"btn-outline-secondary":o.menuTab!==0}]),onClick:d[1]||(d[1]=h=>o.menuTab=0)},[rn,c("Общее ")],2)]),e("div",an,[e("button",{class:f(["btn w-100 rounded-0",{"btn-dark":o.menuTab===1,"btn-outline-secondary":o.menuTab!==1}]),onClick:d[2]||(d[2]=h=>o.menuTab=1)},[dn,c("Админ ")],2)])]),e("div",cn,[o.menuTab===0?(n(),r("nav",un,[o.can("manage-calc")?(n(),p(v,{key:0,class:"p-3",href:o.route("calc"),active:o.route().current("calc")},{default:u(()=>[c(" Калькулятор ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-clients")?(n(),p(v,{key:1,class:"p-3",href:o.route("clients"),active:o.route().current("clients")},{default:u(()=>[c(" Клиенты ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-clients")?(n(),p(v,{key:2,class:"p-3",href:o.route("documents"),active:o.route().current("documents")},{default:u(()=>[c(" Договора (Документы) ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-orders")?(n(),p(v,{key:3,class:"p-3",href:o.route("orders"),active:o.route().current("orders")},{default:u(()=>[c(" Заказы ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-promo-codes")?(n(),p(v,{key:4,class:"p-3",href:o.route("promo-codes"),active:o.route().current("promo-codes")},{default:u(()=>[c(" Промокоды ")]),_:1},8,["href","active"])):i("",!0)])):i("",!0),o.menuTab===1?(n(),r("nav",mn,[o.can("manage-users")?(n(),p(v,{key:0,class:"p-3",href:o.route("users"),active:o.route().current("users")},{default:u(()=>[c(" Пользователи ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-roles")?(n(),p(v,{key:1,class:"p-3",href:o.route("roles"),active:o.route().current("roles")},{default:u(()=>[c(" Роли пользователей ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-permissions")?(n(),p(v,{key:2,class:"p-3",href:o.route("permissions"),active:o.route().current("permissions")},{default:u(()=>[c(" Разрешения пользователей ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-services")?(n(),p(v,{key:3,class:"p-3",href:o.route("services"),active:o.route().current("services")},{default:u(()=>[c(" Сервисы ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-materials")?(n(),p(v,{key:4,class:"p-3",href:o.route("materials"),active:o.route().current("materials")},{default:u(()=>[c(" Материалы ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-handles")?(n(),p(v,{key:5,class:"p-3",href:o.route("handles"),active:o.route().current("handles")},{default:u(()=>[c(" Ручки ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-hinges")?(n(),p(v,{key:6,class:"p-3",href:o.route("hinges"),active:o.route().current("hinges")},{default:u(()=>[c(" Петли ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-door-variants")?(n(),p(v,{key:7,class:"p-3",href:o.route("door-variants"),active:o.route().current("door-variants")},{default:u(()=>[c(" Типы дверей ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-colors")?(n(),p(v,{key:8,class:"p-3",href:o.route("colors"),active:o.route().current("colors")},{default:u(()=>[c(" Цвета ")]),_:1},8,["href","active"])):i("",!0),o.can("manage-sizes")?(n(),p(v,{key:9,class:"p-3",href:o.route("sizes"),active:o.route().current("sizes")},{default:u(()=>[c(" Размеры ")]),_:1},8,["href","active"])):i("",!0)])):i("",!0)])])])],64)}}});export{bn as _,io as a};
