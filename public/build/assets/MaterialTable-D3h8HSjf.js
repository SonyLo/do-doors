import{m as _,o as e,c as i,b as t,f as p,v as m,g as r,e as a,F as h,r as f,d as g,t as d}from"./app-PaeVRU1m.js";import{P as k}from"./Pagination-dbUYlKos.js";const v={class:"row"},y={class:"col-12"},b={class:"input-group mb-3"},w={class:"form-floating"},$=t("label",{for:"search-materials"},"Поиск по материалам",-1),C=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),M=[C],j={style:{"overflow-y":"auto"}},I={key:0,class:"table"},L={key:0},A=t("i",{class:"fa-solid fa-caret-down"},null,-1),P=[A],V={key:1},B=t("i",{class:"fa-solid fa-caret-up"},null,-1),O=[B],D={key:0},N=t("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],F={key:1},E=t("i",{class:"fa-solid fa-caret-up"},null,-1),G=[E],S={key:0},U=t("i",{class:"fa-solid fa-caret-down"},null,-1),W=[U],q={key:1},z=t("i",{class:"fa-solid fa-caret-up"},null,-1),H=[z],J={key:1,scope:"col",class:"text-center"},K={key:2,scope:"col",class:"text-center"},Q={key:0},R=t("i",{class:"fa-solid fa-caret-down"},null,-1),X=[R],Y={key:1},Z=t("i",{class:"fa-solid fa-caret-up"},null,-1),x=[Z],tt={key:4,scope:"col",class:"text-center"},st={scope:"row"},et=["onClick"],ot={key:0,class:"text-center"},it={key:1,class:"text-center"},at={key:2,class:"text-center"},nt={key:3,class:"text-center"},lt={key:4,class:"text-center"},rt={class:"dropdown"},dt=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),ct={class:"dropdown-menu"},ht=["onClick"],ut=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),_t=["onClick"],pt=t("i",{class:"fa-regular fa-copy mr-2"},null,-1),mt=["onClick"],ft=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),gt={key:0,class:"alert alert-success",role:"alert"},kt=t("h4",{class:"alert-heading"},"Материалы",-1),vt=t("p",null,"К сожалению, раздел материалов пуст. Вы еще не добавили ни одного материала, который можно отобразить на этой странице.",-1),yt=t("hr",null,null,-1),bt=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый материал",-1),wt=[kt,vt,yt,bt],$t={key:1,class:"row mb-3"},Ct={class:"col-12"},Mt={props:["simple"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,wrapper_variants:[],door_variants:[]}]}},computed:{..._(["getMaterialsPaginateObject","getMaterials"])},mounted(){this.loadMaterials()},methods:{sortAndLoad(o){this.sort.column=o,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadMaterials(this.current_page)},loadMaterials(o=0){this.current_page=o,this.$store.dispatch("loadMaterials",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(s=>{this.items=this.getMaterials,this.paginate_object=this.getMaterialsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(o){this.$emit("select",o)},duplicateItem(o){this.$store.dispatch("duplicateMaterial",{materialId:o}).then(()=>{this.sortAndLoad("id")})},removeItem(o){this.$store.dispatch("removeMaterial",{materialId:o}).then(()=>{this.sortAndLoad("id")})},showWrapperVariants(o){this.$emit("show-wrapper-variants",o.wrapper_variants)},showDoorVariants(o){this.$emit("show-door-variants",o.door_variants)}}},Lt=Object.assign(Mt,{__name:"MaterialTable",setup(o){return(s,l)=>(e(),i(h,null,[t("form",v,[t("div",y,[t("div",b,[t("div",w,[p(t("input",{type:"search","onUpdate:modelValue":l[0]||(l[0]=n=>s.search=n),class:"form-control",id:"search-materials"},null,512),[[m,s.search]]),$]),t("button",{type:"button",onClick:l[1]||(l[1]=n=>s.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},M)])])]),t("div",j,[s.items.length>0?(e(),i("table",I,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:l[2]||(l[2]=n=>s.sortAndLoad("id"))},[r("# "),s.sort.direction==="desc"&&s.sort.column==="id"?(e(),i("span",L,P)):a("",!0),s.sort.direction==="asc"&&s.sort.column==="id"?(e(),i("span",V,O)):a("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:l[3]||(l[3]=n=>s.sortAndLoad("title"))},[r("Название "),s.sort.direction==="desc"&&s.sort.column==="title"?(e(),i("span",D,T)):a("",!0),s.sort.direction==="asc"&&s.sort.column==="title"?(e(),i("span",F,G)):a("",!0)]),o.simple?a("",!0):(e(),i("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:l[4]||(l[4]=n=>s.sortAndLoad("order_position"))},[r("Позиция в выдаче "),s.sort.direction==="desc"&&s.sort.column==="order_position"?(e(),i("span",S,W)):a("",!0),s.sort.direction==="asc"&&s.sort.column==="order_position"?(e(),i("span",q,H)):a("",!0)])),o.simple?a("",!0):(e(),i("th",J,"Варианты двери")),o.simple?a("",!0):(e(),i("th",K,"Варианты контура вокруг")),o.simple?a("",!0):(e(),i("th",{key:3,scope:"col",class:"text-center cursor-pointer",onClick:l[5]||(l[5]=n=>s.sortAndLoad("updated_at"))},[r(" Дата изменения "),s.sort.direction==="desc"&&s.sort.column==="updated_at"?(e(),i("span",Q,X)):a("",!0),s.sort.direction==="asc"&&s.sort.column==="updated_at"?(e(),i("span",Y,x)):a("",!0)])),o.simple?a("",!0):(e(),i("th",tt,"Действие"))])]),t("tbody",null,[(e(!0),i(h,null,f(s.items,(n,u)=>(e(),i("tr",null,[t("th",st,d(n.id||u),1),t("td",{class:"text-center cursor-pointer",onClick:c=>s.selectItem(n)},d(n.title||"-"),9,et),o.simple?a("",!0):(e(),i("td",ot,d(n.order_position||0),1)),o.simple?a("",!0):(e(),i("td",it,d((n.door_variants||[]).length),1)),o.simple?a("",!0):(e(),i("td",at,d((n.wrapper_variants||[]).length),1)),o.simple?a("",!0):(e(),i("td",nt,d(n.updated_at||"-"),1)),o.simple?a("",!0):(e(),i("td",lt,[t("div",rt,[dt,t("ul",ct,[t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.selectItem(n),href:"javascript:void(0)"},[ut,r("Редактировать")],8,ht)]),t("li",null,[t("a",{class:"dropdown-item",onClick:c=>s.duplicateItem(n.id),href:"javascript:void(0)"},[pt,r("Дублировать")],8,_t)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:c=>s.removeItem(n.id),href:"javascript:void(0)"},[ft,r("Удалить")],8,mt)])])])]))]))),256))])])):a("",!0)]),s.items.length===0?(e(),i("div",gt,wt)):a("",!0),s.items.length>0?(e(),i("div",$t,[t("div",Ct,[s.paginate_object?(e(),g(k,{key:0,onPagination_page:s.loadMaterials,pagination:s.paginate_object},null,8,["onPagination_page","pagination"])):a("",!0)])])):a("",!0)],64))}});export{Lt as _};
