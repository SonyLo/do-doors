import{m as x,o as d,c as h,b as o,x as ne,d as y,v as M,F as V,r as ee,t as k,f as m,g as te,e as Y,i as U,j as z,a as N,w as q}from"./app-n5g1UPt_.js";import{P as oe}from"./Pagination-T7_qpnq1.js";const ae={class:"dropdown"},ce={class:"btn btn-outline-secondary w-100 p-3",type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},de={class:"dropdown-menu w-100"},he={class:"px-4 py-3"},ue={class:"form-floating mb-3"},pe=o("label",{for:"search-materials"},"Поиск по материалам",-1),fe={key:0,class:"list-group"},me=["onClick"],be={key:1,class:"alert alert-success",role:"alert"},ge=o("p",null,"Ничего не найдено",-1),ve=[ge],_e={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,wrapper_variants:[],door_variants:[]}]}},computed:{...x(["getMaterialsPaginateObject","getMaterials"])},mounted(){this.loadMaterials()},methods:{sortAndLoad(t){this.sort.column=t,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadMaterials(this.current_page)},loadMaterials(t=0){this.current_page=t,this.$store.dispatch("loadMaterials",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(e=>{this.items=this.getMaterials,this.paginate_object=this.getMaterialsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(t){this.$emit("select",t)}}},K=Object.assign(_e,{__name:"MaterialDropdown",setup(t){return(e,s)=>(d(),h("div",ae,[o("button",ce,[ne(e.$slots,"default")]),o("div",de,[o("div",he,[o("div",ue,[y(o("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=r=>e.search=r),onKeyup:s[1]||(s[1]=r=>e.sortAndLoad("id")),class:"form-control",id:"search-materials"},null,544),[[M,e.search]]),pe]),e.items.length>0?(d(),h("div",fe,[(d(!0),h(V,null,ee(e.items,(r,i)=>(d(),h("a",{href:"javascript:void(0)",onClick:a=>e.selectItem(r),class:"list-group-item list-group-item-action","aria-current":"true"},k(r.title||"-"),9,me))),256))])):m("",!0),e.items.length===0?(d(),h("div",be,ve)):m("",!0),e.paginate_object&&e.items.length>0?(d(),te(oe,{key:2,class:"my-3",onPagination_page:e.loadMaterials,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):m("",!0)])])]))}}),ye={class:"row"},we={class:"col-12"},ke={class:"input-group mb-3"},Me={class:"form-floating"},Se=o("button",{type:"submit",class:"btn btn-outline-primary"},[o("i",{class:"fa-solid fa-magnifying-glass"})],-1),Ye={class:"row"},Le={class:"col-12 d-flex"},Fe={class:"dropdown"},Xe=o("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[o("i",{class:"fa-solid fa-bars mr-2"}),Y("Управление разделом ")],-1),We={class:"dropdown-menu"},Te=o("li",null,[o("a",{class:"dropdown-item",href:"/sizes/export-prices"},"Скачать шаблон таблицы")],-1),Re={class:"d-flex scrollable-area"},He={key:0,class:"table table-responsive"},Ce={key:0},Ee=o("i",{class:"fa-solid fa-caret-down"},null,-1),Pe=[Ee],$e={key:1},Ae=o("i",{class:"fa-solid fa-caret-up"},null,-1),De=[Ae],je={key:0},Ie=o("i",{class:"fa-solid fa-caret-down"},null,-1),Be=[Ie],Oe={key:1},Ue=o("i",{class:"fa-solid fa-caret-up"},null,-1),ze=[Ue],Ve={key:0},Ne=o("i",{class:"fa-solid fa-caret-down"},null,-1),qe=[Ne],Ke={key:1},Ge=o("i",{class:"fa-solid fa-caret-up"},null,-1),Je=[Ge],Qe={key:0},Ze=o("i",{class:"fa-solid fa-caret-down"},null,-1),xe=[Ze],et={key:1},tt=o("i",{class:"fa-solid fa-caret-up"},null,-1),ot=[tt],st={key:0},rt=o("i",{class:"fa-solid fa-caret-down"},null,-1),lt=[rt],it={key:1},nt=o("i",{class:"fa-solid fa-caret-up"},null,-1),at=[nt],ct={key:0},dt=o("i",{class:"fa-solid fa-caret-down"},null,-1),ht=[dt],ut={key:1},pt=o("i",{class:"fa-solid fa-caret-up"},null,-1),ft=[pt],mt={key:0},bt=o("i",{class:"fa-solid fa-caret-down"},null,-1),gt=[bt],vt={key:1},_t=o("i",{class:"fa-solid fa-caret-up"},null,-1),yt=[_t],wt={key:0},kt=o("i",{class:"fa-solid fa-caret-down"},null,-1),Mt=[kt],St={key:1},Yt=o("i",{class:"fa-solid fa-caret-up"},null,-1),Lt=[Yt],Ft=o("th",{scope:"col",class:"text-center"},"Действие",-1),Xt={scope:"row"},Wt=["onClick"],Tt=["onClick"],Rt={class:"text-center"},Ht=o("thead",null,[o("th",null,"опт"),o("th",null,"дилер"),o("th",null,"розница"),o("th",null,"себестоимость")],-1),Ct={style:{"min-width":"100px","text-align":"center"}},Et={style:{"min-width":"100px","text-align":"center"}},Pt={style:{"min-width":"100px","text-align":"center"}},$t={style:{"min-width":"100px","text-align":"center"}},At={class:"text-center"},Dt=["onClick"],jt=["onBlur","onChange","onUpdate:modelValue"],It={class:"text-center"},Bt={class:"text-center"},Ot={key:0},Ut={key:1},zt={class:"text-center"},Vt={class:"text-center"},Nt={class:"dropdown"},qt=o("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[o("i",{class:"fa-solid fa-bars"})],-1),Kt={class:"dropdown-menu"},Gt=["onClick"],Jt=o("i",{class:"fa-solid fa-pen mr-2"},null,-1),Qt=["onClick"],Zt=o("i",{class:"fa-solid fa-bolt mr-2"},null,-1),xt=["onClick"],eo=o("i",{class:"fa-regular fa-copy mr-2"},null,-1),to=["onClick"],oo=o("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),so={key:0,class:"alert alert-success my-3",role:"alert"},ro=o("h4",{class:"alert-heading"},"Размеры",-1),lo=o("p",null,"К сожалению, раздел размеров пуст. Вы еще не добавили ни одного размера, который можно отобразить на этой странице.",-1),io=o("hr",null,null,-1),no=o("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый размер",-1),ao=[ro,lo,io,no],co={key:1,class:"row mb-3"},ho={class:"col-12"},uo={class:"modal fade",id:"import-prices-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},po={class:"modal-dialog"},fo={class:"modal-content"},mo=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Форма загрузки таблицы"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),bo={class:"modal-body"},go={class:"form-check form-switch"},vo={class:"form-check-label",for:"need_rewrite"},_o={key:0},yo={key:1},wo={class:"form-floating my-3 border-gray-100 border"},ko=o("label",{for:"excel-file-for-import"},"Файл-эксель",-1),Mo=["disabled"],So={key:0},Yo=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),Lo={class:"modal fade",id:"recount-prices",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Fo={class:"modal-dialog"},Xo={class:"modal-content"},Wo=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Форма пересчета показателей"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),To={class:"modal-body"},Ro={class:"form-check form-switch"},Ho=o("label",{class:"form-check-label",for:"recount-by-width"}," Пересчитать по ширине ",-1),Co={key:0,class:"form-floating mb-3"},Eo=o("label",{for:"base-width"},"Базовая ширина",-1),Po={class:"form-check form-switch"},$o=o("label",{class:"form-check-label",for:"recount-by-height"}," Пересчитать по высоте ",-1),Ao={key:1,class:"form-floating mb-3"},Do=o("label",{for:"base-height"},"Базовая высота",-1),jo={key:0},Io={key:1},Bo={class:"form-floating mb-3"},Oo=o("label",{for:"base-price"},"Цена для пересчета",-1),Uo={key:2,class:"alert alert-success mb-3",role:"alert"},zo=["disabled"],Vo=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),No={class:"modal fade",id:"generate-sizes",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qo={class:"modal-dialog"},Ko={class:"modal-content"},Go=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Форма генерации размерности"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Jo={class:"modal-body"},Qo={class:"row"},Zo={class:"col-md-6"},xo={class:"form-floating mb-3"},es=o("label",{for:"generate-base-width"},"Базовая ширина",-1),ts={class:"col-md-6"},os={class:"form-floating mb-3"},ss=o("label",{for:"generate-step-width"},"Шаг генерации ширины",-1),rs={class:"row"},ls={class:"col-md-6"},is={class:"form-floating mb-3"},ns=o("label",{for:"generate-base-width"},"Базовая высота",-1),as={class:"col-md-6"},cs={class:"form-floating mb-3"},ds=o("label",{for:"generate-step-width"},"Шаг генерации высоты",-1),hs={class:"row"},us={class:"col-md-6"},ps={class:"form-floating mb-3"},fs=o("label",{for:"generate-base-width"},"Базовый коэффициент",-1),ms={class:"col-md-6"},bs={class:"form-floating mb-3"},gs=o("label",{for:"generate-step-width"},"Шаг генерации коэффициента",-1),vs={class:"row"},_s={class:"col-md-6"},ys={class:"form-floating mb-3"},ws=o("label",{for:"generate-base-loops"},"Базовое число петель",-1),ks={class:"col-md-6"},Ms={class:"form-floating mb-3"},Ss=o("label",{for:"generate-step-width"},"Шаг генерации петель",-1),Ys={class:"row"},Ls={class:"col-md-6"},Fs={class:"form-floating mb-3"},Xs=o("label",{for:"generate-base-price"},"Базовая цена",-1),Ws={class:"col-md-6"},Ts={class:"form-floating mb-3"},Rs=o("label",{for:"generate-step-width"},"Шаг генерации цены",-1),Hs={class:"form-floating mb-3"},Cs=o("label",{for:"generate-step-width"},"Число шагов генерации",-1),Es={key:0},Ps={key:1},$s={key:0,class:"alert alert-success mb-3",role:"alert"},As=["disabled"],Ds=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),js={class:"modal fade",id:"confirm-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Is={class:"modal-dialog"},Bs={class:"modal-content"},Os={class:"modal-body"},Us=o("p",null,"Вы хотите обновить JSON-файл с размерами?",-1),zs={class:"row"},Vs={class:"col-6"},Ns={class:"col-6"},qs={data(){return{timer:null,affected:null,sort:{column:null,direction:"desc"},search:null,generateForm:{base_width:0,base_height:0,base_koef:0,base_loops:0,base_price:0,width_step:0,height_step:0,koef_step:0,loops_step:0,price_step:0,selected_material:null,steps:0},importForm:{need_rewrite:!1,files:[]},recountForm:{selected_material:null,need_recount_by_width:!1,need_recount_by_height:!1,base_width:null,base_height:null,recount_price:null},recountModal:null,confirmModal:null,importPricesModal:null,generateModal:null,current_page:0,paginate_object:null,items:[]}},computed:{...x(["getSizesPaginateObject","getSizes"])},mounted(){this.loadSizes(),this.confirmModal=new bootstrap.Modal(document.getElementById("confirm-modal"),{}),this.recountModal=new bootstrap.Modal(document.getElementById("recount-prices"),{}),this.importPricesModal=new bootstrap.Modal(document.getElementById("import-prices-form"),{}),this.generateModal=new bootstrap.Modal(document.getElementById("generate-sizes"),{})},methods:{openConfirmModal(){this.confirmModal.show()},onChangeFile(t){const e=t.target.files;for(let s=0;s<e.length;s++)this.importForm.files.push(e[s])},saveFormattedSizes(){this.$store.dispatch("loadFormattedSizes").then(t=>{this.confirmModal.hide(),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})}).catch(()=>{this.$notify({title:"DoDoors",text:"Ошибка обновления данных",type:"error"})})},openImportFormModal(){this.importPricesModal.show()},generateModalShow(){this.generateModal.show()},recountModalShow(){this.affected=null,this.recountForm.recount_price=0,this.recountForm.need_recount_by_height=!1,this.recountForm.need_recount_by_width=!1,this.recountForm.base_height=0,this.recountForm.base_width=0,this.recountForm.selected_material=null,this.recountModal.show()},recountByKoef(t){this.affected=null,this.recountForm.recount_price=t.price,this.recountForm.need_recount_by_height=!0,this.recountForm.need_recount_by_width=!0,this.recountForm.base_height=t.height,this.recountForm.base_width=t.width,this.recountForm.selected_material=t.material,this.recountModal.show()},importSubmit(){let t=new FormData;this.timer=0;let e=setInterval(()=>{this.timer++},1e3);if(Object.keys(this.importForm).forEach(s=>{const r=this.importForm[s]||"";typeof r=="object"?t.append(s,JSON.stringify(r)):t.append(s,r)}),this.importForm.files.length>0){t.delete("files");for(let s=0;s<this.importForm.files.length;s++)t.append("files[]",this.importForm.files[s])}this.$store.dispatch("importSizes",{importForm:t}).then(s=>{this.loadSizes(),this.importPricesModal.hide(),this.$notify({title:"DoDoors",text:"Вы успешно загрузили данные"}),clearInterval(e),this.timer=null,this.confirmModal.show()}).catch(()=>{clearInterval(e),this.timer=null,this.$notify({title:"DoDoors",text:"Ошибка загрузки данных",type:"error"})})},submitRecountForm(){this.affected=null;let t=new FormData;t.append("material_id",this.recountForm.selected_material.id),Object.keys(this.recountForm).forEach(e=>{const s=this.recountForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.$store.dispatch("recountPrice",{recountForm:t}).then(e=>{this.affected=e.affected||0,this.loadSizes()})},submitGenerateForm(){let t=new FormData;t.append("material_id",this.generateForm.selected_material.id),Object.keys(this.generateForm).forEach(e=>{const s=this.generateForm[e]||"";typeof s=="object"?t.append(e,JSON.stringify(s)):t.append(e,s)}),this.$store.dispatch("generateSizes",{generateForm:t}).then(e=>{this.loadSizes(),this.generateModal.hide()})},selectMaterialForRecount(t){this.recountForm.selected_material=t},selectMaterialForGeneration(t){this.generateForm.selected_material=t},sortAndLoad(t){this.sort.column=t,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadSizes(this.current_page)},loadSizes(t=0){this.current_page=t,this.$store.dispatch("loadSizes",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(e=>{this.items=this.getSizes,this.paginate_object=this.getSizesPaginateObject}).catch(()=>{this.loading=!1})},selectItem(t){this.$emit("select",t)},duplicateItem(t){this.$store.dispatch("duplicateSize",{sizeId:t}).then(()=>{this.sortAndLoad("id")})},removeItem(t){this.$store.dispatch("removeSize",{sizeId:t}).then(()=>{this.sortAndLoad("id")})},blurParams(t,e){this.items[e].need_edit_wholesale_price=!1,this.items[e].need_edit_dealer_price=!1,this.items[e].need_edit_retail_price=!1,this.items[e].need_edit_cost_price=!1,this.items[e].need_edit_koef=!1},saveParam(t,e){this.$store.dispatch("updateSizeParam",{dataObject:{id:this.items[e].id,key:t,value:this.items[e][t]}}).then(s=>{this.items[e].need_edit_wholesale_price=!1,this.items[e].need_edit_dealer_price=!1,this.items[e].need_edit_retail_price=!1,this.items[e].need_edit_cost_price=!1,this.items[e].need_edit_koef=!1,this.$notify({title:"DoDoors",text:"Параметры успешно обновлены"})}).catch(()=>{})}}},ar=Object.assign(qs,{__name:"SizeTable",setup(t){return(e,s)=>(d(),h(V,null,[o("form",ye,[o("div",we,[o("div",ke,[o("div",Me,[y(o("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=r=>e.search=r),class:"form-control",id:"search-sizes"},null,512),[[M,e.search]]),o("label",{onClick:s[1]||(s[1]=r=>e.sortAndLoad("id")),for:"search-sizes"},"Поиск по размерам и материалам")]),Se])])]),o("div",Ye,[o("div",Le,[o("div",Fe,[Xe,o("ul",We,[Te,o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[2]||(s[2]=(...r)=>e.openImportFormModal&&e.openImportFormModal(...r))},"Загрузить данные из Excel")]),o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[3]||(s[3]=(...r)=>e.openConfirmModal&&e.openConfirmModal(...r))},"Обновить JSON")]),o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[4]||(s[4]=(...r)=>e.recountModalShow&&e.recountModalShow(...r))},"Пересчет показателей")]),o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[5]||(s[5]=(...r)=>e.generateModalShow&&e.generateModalShow(...r))}," Генерация размеров")])])])])]),o("div",Re,[e.items.length>0?(d(),h("table",He,[o("thead",null,[o("tr",null,[o("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=r=>e.sortAndLoad("id"))},[Y("# "),e.sort.direction==="desc"&&e.sort.column==="id"?(d(),h("span",Ce,Pe)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="id"?(d(),h("span",$e,De)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[7]||(s[7]=r=>e.sortAndLoad("width"))},[Y("Ширина, см "),e.sort.direction==="desc"&&e.sort.column==="width"?(d(),h("span",je,Be)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="width"?(d(),h("span",Oe,ze)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[8]||(s[8]=r=>e.sortAndLoad("height"))},[Y("Высота, см "),e.sort.direction==="desc"&&e.sort.column==="height"?(d(),h("span",Ve,qe)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="height"?(d(),h("span",Ke,Je)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[9]||(s[9]=r=>e.sortAndLoad("price"))},[Y("Цена, руб "),e.sort.direction==="desc"&&e.sort.column==="price"?(d(),h("span",Qe,xe)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="price"?(d(),h("span",et,ot)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[10]||(s[10]=r=>e.sortAndLoad("price_koef"))},[Y("Ценовой коэффициент "),e.sort.direction==="desc"&&e.sort.column==="price_koef"?(d(),h("span",st,lt)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="price_koef"?(d(),h("span",it,at)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[11]||(s[11]=r=>e.sortAndLoad("loops_count"))},[Y("Число петель "),e.sort.direction==="desc"&&e.sort.column==="loops_count"?(d(),h("span",ct,ht)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="loops_count"?(d(),h("span",ut,ft)):m("",!0)]),o("th",{scope:"col",class:"text-center",onClick:s[12]||(s[12]=r=>e.sortAndLoad("material_id"))},[Y("Материал "),e.sort.direction==="desc"&&e.sort.column==="material_id"?(d(),h("span",mt,gt)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="material_id"?(d(),h("span",vt,yt)):m("",!0)]),o("th",{scope:"col",class:"text-center cursor-pointer",onClick:s[13]||(s[13]=r=>e.sortAndLoad("updated_at"))},[Y(" Дата изменения "),e.sort.direction==="desc"&&e.sort.column==="updated_at"?(d(),h("span",wt,Mt)):m("",!0),e.sort.direction==="asc"&&e.sort.column==="updated_at"?(d(),h("span",St,Lt)):m("",!0)]),Ft])]),o("tbody",null,[(d(!0),h(V,null,ee(e.items,(r,i)=>(d(),h("tr",null,[o("th",Xt,k(r.id||i),1),o("td",{class:"text-center",onClick:a=>e.selectItem(r)},k(r.width||0),9,Wt),o("td",{class:"text-center",onClick:a=>e.selectItem(r)},k(r.height||0),9,Tt),o("td",Rt,[o("table",null,[Ht,o("tbody",null,[o("tr",null,[o("td",Ct,k(e.items[i].price.wholesale||0),1),o("td",Et,k(e.items[i].price.dealer||0),1),o("td",Pt,k(e.items[i].price.retail||0),1),o("td",$t,k(e.items[i].price.cost||0),1)])])])]),o("td",At,[e.items[i].need_edit_koef?m("",!0):(d(),h("p",{key:0,onClick:a=>e.items[i].need_edit_koef=!0},k(e.items[i].price_koef||0),9,Dt)),e.items[i].need_edit_koef?y((d(),h("input",{key:1,type:"number",step:"0.1",min:"0",onBlur:a=>e.blurParams("price_koef",i),onChange:a=>e.saveParam("price_koef",i),"onUpdate:modelValue":a=>e.items[i].price_koef=a,class:"form-control text-center",id:"floatingInput",placeholder:"name@example.com"},null,40,jt)),[[M,e.items[i].price_koef]]):m("",!0)]),o("td",It,k(r.loops_count||0),1),o("td",Bt,[r.material?(d(),h("p",Ot,k(r.material.title||"-")+" (#"+k(r.material_id||"-")+") ",1)):(d(),h("p",Ut,"Материал не выбран"))]),o("td",zt,k(r.updated_at||"-"),1),o("td",Vt,[o("div",Nt,[qt,o("ul",Kt,[o("li",null,[o("a",{class:"dropdown-item",onClick:a=>e.selectItem(r),href:"javascript:void(0)"},[Jt,Y("Редактировать")],8,Gt)]),o("li",null,[o("a",{class:"dropdown-item",onClick:a=>e.recountByKoef(r),href:"javascript:void(0)"},[Zt,Y("Пересчитать по коэффициенту")],8,Qt)]),o("li",null,[o("a",{class:"dropdown-item",onClick:a=>e.duplicateItem(r.id),href:"javascript:void(0)"},[eo,Y("Дублировать")],8,xt)]),o("li",null,[o("a",{class:"dropdown-item text-danger",onClick:a=>e.removeItem(r.id),href:"javascript:void(0)"},[oo,Y("Удалить")],8,to)])])])])]))),256))])])):m("",!0)]),e.items.length===0?(d(),h("div",so,ao)):m("",!0),e.items.length>0?(d(),h("div",co,[o("div",ho,[e.paginate_object?(d(),te(oe,{key:0,onPagination_page:e.loadSizes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):m("",!0)])])):m("",!0),o("div",uo,[o("div",po,[o("div",fo,[mo,o("div",bo,[o("form",{onSubmit:s[16]||(s[16]=U((...r)=>e.importSubmit&&e.importSubmit(...r),["prevent"]))},[o("div",go,[y(o("input",{class:"form-check-input","onUpdate:modelValue":s[14]||(s[14]=r=>e.importForm.need_rewrite=r),type:"checkbox",role:"switch",id:"need_rewrite"},null,512),[[z,e.importForm.need_rewrite]]),o("label",vo,[e.importForm.need_rewrite?(d(),h("span",_o,"Перезаписать старые значения")):(d(),h("span",yo,"Добавить новые значения"))])]),o("div",wo,[o("input",{type:"file",class:"form-control",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"excel-file-for-import",ref:"importPriceFromExcel",onChange:s[15]||(s[15]=r=>e.onChangeFile(r))},null,544),ko]),o("button",{type:"submit",disabled:e.timer!=null,class:"btn btn-outline-primary w-100 p-3"},[Y("Загрузить "),e.timer!=null?(d(),h("span",So,k(e.timer)+" сек",1)):m("",!0)],8,Mo)],32)]),Yo])])]),o("div",Lo,[o("div",Fo,[o("div",Xo,[Wo,o("div",To,[o("form",{onSubmit:s[22]||(s[22]=U((...r)=>e.submitRecountForm&&e.submitRecountForm(...r),["prevent"]))},[o("div",Ro,[y(o("input",{class:"form-check-input","onUpdate:modelValue":s[17]||(s[17]=r=>e.recountForm.need_recount_by_width=r),type:"checkbox",role:"switch",id:"recount-by-width"},null,512),[[z,e.recountForm.need_recount_by_width]]),Ho]),e.recountForm.need_recount_by_width?(d(),h("div",Co,[y(o("input",{type:"number","onUpdate:modelValue":s[18]||(s[18]=r=>e.recountForm.base_width=r),class:"form-control",id:"base-width",required:""},null,512),[[M,e.recountForm.base_width]]),Eo])):m("",!0),o("div",Po,[y(o("input",{class:"form-check-input","onUpdate:modelValue":s[19]||(s[19]=r=>e.recountForm.need_recount_by_height=r),type:"checkbox",role:"switch",id:"recount-by-height"},null,512),[[z,e.recountForm.need_recount_by_height]]),$o]),e.recountForm.need_recount_by_height?(d(),h("div",Ao,[y(o("input",{type:"number","onUpdate:modelValue":s[20]||(s[20]=r=>e.recountForm.base_height=r),class:"form-control",id:"base-height",required:""},null,512),[[M,e.recountForm.base_height]]),Do])):m("",!0),N(K,{onSelect:e.selectMaterialForRecount,class:"mb-3"},{default:q(()=>[e.recountForm.selected_material==null?(d(),h("span",jo,"Выбор материала")):(d(),h("span",Io,k(e.recountForm.selected_material.title||"-"),1))]),_:1},8,["onSelect"]),o("div",Bo,[y(o("input",{type:"number","onUpdate:modelValue":s[21]||(s[21]=r=>e.recountForm.recount_price=r),class:"form-control",id:"base-price",required:""},null,512),[[M,e.recountForm.recount_price]]),Oo]),e.affected?(d(),h("div",Uo," Выполнен перерасчет. Затронуто "+k(e.affected)+" строк. ",1)):m("",!0),o("button",{type:"submit",disabled:e.recountForm.selected_material==null,class:"btn btn-outline-primary w-100 p-3"},"Выполнить пересчет ",8,zo)],32)]),Vo])])]),o("div",No,[o("div",qo,[o("div",Ko,[Go,o("div",Jo,[o("form",{onSubmit:s[34]||(s[34]=U((...r)=>e.submitGenerateForm&&e.submitGenerateForm(...r),["prevent"]))},[o("div",Qo,[o("div",Zo,[o("div",xo,[y(o("input",{type:"number","onUpdate:modelValue":s[23]||(s[23]=r=>e.generateForm.base_width=r),class:"form-control",id:"generate-base-width",required:""},null,512),[[M,e.generateForm.base_width]]),es])]),o("div",ts,[o("div",os,[y(o("input",{type:"number","onUpdate:modelValue":s[24]||(s[24]=r=>e.generateForm.width_step=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.width_step]]),ss])])]),o("div",rs,[o("div",ls,[o("div",is,[y(o("input",{type:"number","onUpdate:modelValue":s[25]||(s[25]=r=>e.generateForm.base_height=r),class:"form-control",id:"generate-base-width",required:""},null,512),[[M,e.generateForm.base_height]]),ns])]),o("div",as,[o("div",cs,[y(o("input",{type:"number","onUpdate:modelValue":s[26]||(s[26]=r=>e.generateForm.height_step=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.height_step]]),ds])])]),o("div",hs,[o("div",us,[o("div",ps,[y(o("input",{type:"number","onUpdate:modelValue":s[27]||(s[27]=r=>e.generateForm.base_koef=r),class:"form-control",id:"generate-base-width",required:""},null,512),[[M,e.generateForm.base_koef]]),fs])]),o("div",ms,[o("div",bs,[y(o("input",{type:"number",step:"0.1","onUpdate:modelValue":s[28]||(s[28]=r=>e.generateForm.koef_step=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.koef_step]]),gs])])]),o("div",vs,[o("div",_s,[o("div",ys,[y(o("input",{type:"number","onUpdate:modelValue":s[29]||(s[29]=r=>e.generateForm.base_loops=r),class:"form-control",id:"generate-base-loops",required:""},null,512),[[M,e.generateForm.base_loops]]),ws])]),o("div",ks,[o("div",Ms,[y(o("input",{type:"number",step:"0.1","onUpdate:modelValue":s[30]||(s[30]=r=>e.generateForm.loops_step=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.loops_step]]),Ss])])]),o("div",Ys,[o("div",Ls,[o("div",Fs,[y(o("input",{type:"number","onUpdate:modelValue":s[31]||(s[31]=r=>e.generateForm.base_price=r),class:"form-control",id:"generate-base-price",required:""},null,512),[[M,e.generateForm.base_price]]),Xs])]),o("div",Ws,[o("div",Ts,[y(o("input",{type:"number",step:"0.1","onUpdate:modelValue":s[32]||(s[32]=r=>e.generateForm.price_step=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.price_step]]),Rs])])]),o("div",Hs,[y(o("input",{type:"number","onUpdate:modelValue":s[33]||(s[33]=r=>e.generateForm.steps=r),class:"form-control",id:"generate-step-width",required:""},null,512),[[M,e.generateForm.steps]]),Cs]),N(K,{onSelect:e.selectMaterialForGeneration,class:"mb-3"},{default:q(()=>[e.generateForm.selected_material==null?(d(),h("span",Es,"Выбор материала")):(d(),h("span",Ps,k(e.generateForm.selected_material.title||"-"),1))]),_:1},8,["onSelect"]),e.affected?(d(),h("div",$s," Выполнен перерасчет. Затронуто "+k(e.affected)+" строк. ",1)):m("",!0),o("button",{type:"submit",disabled:e.generateForm.selected_material==null,class:"btn btn-outline-primary w-100 p-3"},"Выполнить генерацию ",8,As)],32)]),Ds])])]),o("div",js,[o("div",Is,[o("div",Bs,[o("div",Os,[Us,o("div",zs,[o("div",Vs,[o("button",{class:"btn btn-outline-success w-100",type:"button",onClick:s[35]||(s[35]=(...r)=>e.saveFormattedSizes&&e.saveFormattedSizes(...r))},"Да, продолжить")]),o("div",Ns,[o("button",{class:"btn btn-outline-danger w-100",onClick:s[36]||(s[36]=r=>e.confirmModal.hide())},"Нет, отменить")])])])])])])],64))}});/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function R(t){return getComputedStyle(t)}function L(t,e){for(var s in e){var r=e[s];typeof r=="number"&&(r=r+"px"),t.style[s]=r}return t}function j(t){var e=document.createElement("div");return e.className=t,e}var G=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function C(t,e){if(!G)throw new Error("No element matching method supported");return G.call(t,e)}function $(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function J(t,e){return Array.prototype.filter.call(t.children,function(s){return C(s,e)})}var w={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},se={x:null,y:null};function re(t,e){var s=t.element.classList,r=w.state.scrolling(e);s.contains(r)?clearTimeout(se[e]):s.add(r)}function le(t,e){se[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(w.state.scrolling(e))},t.settings.scrollingThreshold)}function Ks(t,e){re(t,e),le(t,e)}var D=function(e){this.element=e,this.handlers={}},ie={isEmpty:{configurable:!0}};D.prototype.bind=function(e,s){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(s),this.element.addEventListener(e,s,!1)};D.prototype.unbind=function(e,s){var r=this;this.handlers[e]=this.handlers[e].filter(function(i){return s&&i!==s?!0:(r.element.removeEventListener(e,i,!1),!1)})};D.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};ie.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(D.prototype,ie);var A=function(){this.eventElements=[]};A.prototype.eventElement=function(e){var s=this.eventElements.filter(function(r){return r.element===e})[0];return s||(s=new D(e),this.eventElements.push(s)),s};A.prototype.bind=function(e,s,r){this.eventElement(e).bind(s,r)};A.prototype.unbind=function(e,s,r){var i=this.eventElement(e);i.unbind(s,r),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)};A.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};A.prototype.once=function(e,s,r){var i=this.eventElement(e),a=function(n){i.unbind(s,a),r(n)};i.bind(s,a)};function I(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function B(t,e,s,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var a;if(e==="top")a=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")a=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Gs(t,s,a,r,i)}function Gs(t,e,s,r,i){var a=s[0],n=s[1],c=s[2],l=s[3],u=s[4],v=s[5];r===void 0&&(r=!0),i===void 0&&(i=!1);var S=t.element;t.reach[l]=null,S[c]<1&&(t.reach[l]="start"),S[c]>t[a]-t[n]-1&&(t.reach[l]="end"),e&&(S.dispatchEvent(I("ps-scroll-"+l)),e<0?S.dispatchEvent(I("ps-scroll-"+u)):e>0&&S.dispatchEvent(I("ps-scroll-"+v)),r&&Ks(t,l)),t.reach[l]&&(e||i)&&S.dispatchEvent(I("ps-"+l+"-reach-"+t.reach[l]))}function g(t){return parseInt(t,10)||0}function Js(t){return C(t,"input,[contenteditable]")||C(t,"select,[contenteditable]")||C(t,"textarea,[contenteditable]")||C(t,"button,[contenteditable]")}function Qs(t){var e=R(t);return g(e.width)+g(e.paddingLeft)+g(e.paddingRight)+g(e.borderLeftWidth)+g(e.borderRightWidth)}var P={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function H(t){var e=t.element,s=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(J(e,w.element.rail("x")).forEach(function(i){return $(i)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(J(e,w.element.rail("y")).forEach(function(i){return $(i)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=Q(t,g(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=g((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=Q(t,g(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=g(s*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),Zs(e,t),t.scrollbarXActive?e.classList.add(w.state.active("x")):(e.classList.remove(w.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(w.state.active("y")):(e.classList.remove(w.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function Q(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function Zs(t,e){var s={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?s.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:s.left=t.scrollLeft,e.isScrollbarXUsingBottom?s.bottom=e.scrollbarXBottom-r:s.top=e.scrollbarXTop+r,L(e.scrollbarXRail,s);var i={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?i.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:i.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:i.left=e.scrollbarYLeft+t.scrollLeft,L(e.scrollbarYRail,i),L(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),L(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function xs(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var s=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=s>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,H(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var s=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=s>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,H(t),e.stopPropagation()})}function er(t){Z(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Z(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Z(t,e){var s=e[0],r=e[1],i=e[2],a=e[3],n=e[4],c=e[5],l=e[6],u=e[7],v=e[8],S=t.element,X=null,T=null,p=null;function _(f){f.touches&&f.touches[0]&&(f[i]=f.touches[0].pageY),S[l]=X+p*(f[i]-T),re(t,u),H(t),f.stopPropagation(),f.type.startsWith("touch")&&f.changedTouches.length>1&&f.preventDefault()}function F(){le(t,u),t[v].classList.remove(w.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",_)}function b(f,W){X=S[l],W&&f.touches&&(f[i]=f.touches[0].pageY),T=f[i],p=(t[r]-t[s])/(t[a]-t[c]),W?t.event.bind(t.ownerDocument,"touchmove",_):(t.event.bind(t.ownerDocument,"mousemove",_),t.event.once(t.ownerDocument,"mouseup",F),f.preventDefault()),t[v].classList.add(w.state.clicking),f.stopPropagation()}t.event.bind(t[n],"mousedown",function(f){b(f)}),t.event.bind(t[n],"touchstart",function(f){b(f,!0)})}function tr(t){var e=t.element,s=function(){return C(e,":hover")},r=function(){return C(t.scrollbarX,":focus")||C(t.scrollbarY,":focus")};function i(a,n){var c=Math.floor(e.scrollTop);if(a===0){if(!t.scrollbarYActive)return!1;if(c===0&&n>0||c>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(n===0){if(!t.scrollbarXActive)return!1;if(l===0&&a<0||l>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)&&!(!s()&&!r())){var n=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(n){if(n.tagName==="IFRAME")n=n.contentDocument.activeElement;else for(;n.shadowRoot;)n=n.shadowRoot.activeElement;if(Js(n))return}var c=0,l=0;switch(a.which){case 37:a.metaKey?c=-t.contentWidth:a.altKey?c=-t.containerWidth:c=-30;break;case 38:a.metaKey?l=t.contentHeight:a.altKey?l=t.containerHeight:l=30;break;case 39:a.metaKey?c=t.contentWidth:a.altKey?c=t.containerWidth:c=30;break;case 40:a.metaKey?l=-t.contentHeight:a.altKey?l=-t.containerHeight:l=-30;break;case 32:a.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&c!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=c,H(t),i(c,l)&&a.preventDefault())}})}function or(t){var e=t.element;function s(n,c){var l=Math.floor(e.scrollTop),u=e.scrollTop===0,v=l+e.offsetHeight===e.scrollHeight,S=e.scrollLeft===0,X=e.scrollLeft+e.offsetWidth===e.scrollWidth,T;return Math.abs(c)>Math.abs(n)?T=u||v:T=S||X,T?!t.settings.wheelPropagation:!0}function r(n){var c=n.deltaX,l=-1*n.deltaY;return(typeof c>"u"||typeof l>"u")&&(c=-1*n.wheelDeltaX/6,l=n.wheelDeltaY/6),n.deltaMode&&n.deltaMode===1&&(c*=10,l*=10),c!==c&&l!==l&&(c=0,l=n.wheelDelta),n.shiftKey?[-l,-c]:[c,l]}function i(n,c,l){if(!P.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(n))return!1;for(var u=n;u&&u!==e;){if(u.classList.contains(w.element.consuming))return!0;var v=R(u);if(l&&v.overflowY.match(/(scroll|auto)/)){var S=u.scrollHeight-u.clientHeight;if(S>0&&(u.scrollTop>0&&l<0||u.scrollTop<S&&l>0))return!0}if(c&&v.overflowX.match(/(scroll|auto)/)){var X=u.scrollWidth-u.clientWidth;if(X>0&&(u.scrollLeft>0&&c<0||u.scrollLeft<X&&c>0))return!0}u=u.parentNode}return!1}function a(n){var c=r(n),l=c[0],u=c[1];if(!i(n.target,l,u)){var v=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(u?e.scrollTop-=u*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,v=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=u*t.settings.wheelSpeed,v=!0):(e.scrollTop-=u*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),H(t),v=v||s(l,u),v&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",a):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",a)}function sr(t){if(!P.supportsTouch&&!P.supportsIePointer)return;var e=t.element;function s(p,_){var F=Math.floor(e.scrollTop),b=e.scrollLeft,f=Math.abs(p),W=Math.abs(_);if(W>f){if(_<0&&F===t.contentHeight-t.containerHeight||_>0&&F===0)return window.scrollY===0&&_>0&&P.isChrome}else if(f>W&&(p<0&&b===t.contentWidth-t.containerWidth||p>0&&b===0))return!0;return!0}function r(p,_){e.scrollTop-=_,e.scrollLeft-=p,H(t)}var i={},a=0,n={},c=null;function l(p){return p.targetTouches?p.targetTouches[0]:p}function u(p){return p.pointerType&&p.pointerType==="pen"&&p.buttons===0?!1:!!(p.targetTouches&&p.targetTouches.length===1||p.pointerType&&p.pointerType!=="mouse"&&p.pointerType!==p.MSPOINTER_TYPE_MOUSE)}function v(p){if(u(p)){var _=l(p);i.pageX=_.pageX,i.pageY=_.pageY,a=new Date().getTime(),c!==null&&clearInterval(c)}}function S(p,_,F){if(!e.contains(p))return!1;for(var b=p;b&&b!==e;){if(b.classList.contains(w.element.consuming))return!0;var f=R(b);if(F&&f.overflowY.match(/(scroll|auto)/)){var W=b.scrollHeight-b.clientHeight;if(W>0&&(b.scrollTop>0&&F<0||b.scrollTop<W&&F>0))return!0}if(_&&f.overflowX.match(/(scroll|auto)/)){var E=b.scrollWidth-b.clientWidth;if(E>0&&(b.scrollLeft>0&&_<0||b.scrollLeft<E&&_>0))return!0}b=b.parentNode}return!1}function X(p){if(u(p)){var _=l(p),F={pageX:_.pageX,pageY:_.pageY},b=F.pageX-i.pageX,f=F.pageY-i.pageY;if(S(p.target,b,f))return;r(b,f),i=F;var W=new Date().getTime(),E=W-a;E>0&&(n.x=b/E,n.y=f/E,a=W),s(b,f)&&p.preventDefault()}}function T(){t.settings.swipeEasing&&(clearInterval(c),c=setInterval(function(){if(t.isInitialized){clearInterval(c);return}if(!n.x&&!n.y){clearInterval(c);return}if(Math.abs(n.x)<.01&&Math.abs(n.y)<.01){clearInterval(c);return}if(!t.element){clearInterval(c);return}r(n.x*30,n.y*30),n.x*=.8,n.y*=.8},10))}P.supportsTouch?(t.event.bind(e,"touchstart",v),t.event.bind(e,"touchmove",X),t.event.bind(e,"touchend",T)):P.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",v),t.event.bind(e,"pointermove",X),t.event.bind(e,"pointerup",T)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",v),t.event.bind(e,"MSPointerMove",X),t.event.bind(e,"MSPointerUp",T)))}var rr=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},lr={"click-rail":xs,"drag-thumb":er,keyboard:tr,wheel:or,touch:sr},O=function(e,s){var r=this;if(s===void 0&&(s={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(w.main),this.settings=rr();for(var i in s)this.settings[i]=s[i];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var a=function(){return e.classList.add(w.state.focus)},n=function(){return e.classList.remove(w.state.focus)};this.isRtl=R(e).direction==="rtl",this.isRtl===!0&&e.classList.add(w.rtl),this.isNegativeScroll=function(){var u=e.scrollLeft,v=null;return e.scrollLeft=-1,v=e.scrollLeft<0,e.scrollLeft=u,v}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new A,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=j(w.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=j(w.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",a),this.event.bind(this.scrollbarX,"blur",n),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=R(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=g(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=g(c.borderLeftWidth)+g(c.borderRightWidth),L(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=g(c.marginLeft)+g(c.marginRight),L(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=j(w.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=j(w.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",a),this.event.bind(this.scrollbarY,"blur",n),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=R(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=g(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Qs(this.scrollbarY):null,this.railBorderYWidth=g(l.borderTopWidth)+g(l.borderBottomWidth),L(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=g(l.marginTop)+g(l.marginBottom),L(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(u){return lr[u](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(u){return r.onScroll(u)}),H(this)};O.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,L(this.scrollbarXRail,{display:"block"}),L(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=g(R(this.scrollbarXRail).marginLeft)+g(R(this.scrollbarXRail).marginRight),this.railYMarginHeight=g(R(this.scrollbarYRail).marginTop)+g(R(this.scrollbarYRail).marginBottom),L(this.scrollbarXRail,{display:"none"}),L(this.scrollbarYRail,{display:"none"}),H(this),B(this,"top",0,!1,!0),B(this,"left",0,!1,!0),L(this.scrollbarXRail,{display:""}),L(this.scrollbarYRail,{display:""}))};O.prototype.onScroll=function(e){this.isAlive&&(H(this),B(this,"top",this.element.scrollTop-this.lastScrollTop),B(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};O.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),$(this.scrollbarX),$(this.scrollbarY),$(this.scrollbarXRail),$(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};O.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};export{O as P,ar as _};
