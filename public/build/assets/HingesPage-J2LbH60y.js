import{_ as y}from"./AuthenticatedLayout-B_8yiM0x.js";import{m as $,o as s,c as i,b as t,d as m,v as p,e as h,f as l,F as _,r as k,g,t as u,i as w,a as f,u as H,w as b,Z as C}from"./app-CxvvOq_N.js";import{P as j}from"./Pagination-BPSVTZqd.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-y5LP3kTs.js";const L={class:"row"},A={class:"col-12"},I={class:"input-group mb-3"},O={class:"form-floating"},P=t("label",{for:"search-hinges"},"Поиск по производителям петель",-1),V=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),T=[V],N={style:{"overflow-y":"auto"}},S={key:0,class:"table"},B={key:0},M=t("i",{class:"fa-solid fa-caret-down"},null,-1),D=[M],U={key:1},q=t("i",{class:"fa-solid fa-caret-up"},null,-1),E=[q],G={key:0},J=t("i",{class:"fa-solid fa-caret-down"},null,-1),Z=[J],z={key:1},K=t("i",{class:"fa-solid fa-caret-up"},null,-1),Q=[K],R={key:0},W=t("i",{class:"fa-solid fa-caret-down"},null,-1),X=[W],Y={key:1},x=t("i",{class:"fa-solid fa-caret-up"},null,-1),tt=[x],et={key:0},st=t("i",{class:"fa-solid fa-caret-down"},null,-1),ot=[st],it={key:1},nt=t("i",{class:"fa-solid fa-caret-up"},null,-1),lt=[nt],rt=t("th",{scope:"col",class:"text-center"},"Действие",-1),at={scope:"row"},dt=["onClick"],ct={class:"text-center"},ht={class:"text-center"},ut={class:"text-center"},_t={class:"dropdown"},mt=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),pt={class:"dropdown-menu"},gt=["onClick"],ft=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),bt=["onClick"],kt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),vt={key:0,class:"alert alert-success",role:"alert"},yt=t("h4",{class:"alert-heading"},"Петли",-1),$t=t("p",null,"К сожалению, раздел петель пуст. Вы еще не добавили ни одного производителя петель, которые можно отобразить на этой странице.",-1),wt=t("hr",null,null,-1),Ht=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте своего первого производителя петель",-1),Ct=[yt,$t,wt,Ht],jt={key:1,class:"row mb-3"},Ft={class:"col-12"},Lt={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0}]}},computed:{...$(["getHinges","getHingesPaginateObject"])},mounted(){this.loadHinges()},methods:{sortAndLoad(o){this.sort.column=o,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadHinges(this.current_page)},loadHinges(o=0){this.current_page=o,this.$store.dispatch("loadHinges",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(e=>{this.items=this.getHinges,this.paginate_object=this.getHingesPaginateObject}).catch(()=>{this.loading=!1})},selectItem(o){this.$emit("select",o)},duplicateItem(o){this.$store.dispatch("duplicateHinge",{hingeId:o}).then(()=>{this.sortAndLoad("id")})},removeItem(o){this.$store.dispatch("removeHinge",{hingeId:o}).then(()=>{this.sortAndLoad("id")})}}},At=Object.assign(Lt,{__name:"HingeTable",setup(o){return(e,n)=>(s(),i(_,null,[t("form",L,[t("div",A,[t("div",I,[t("div",O,[m(t("input",{type:"search","onUpdate:modelValue":n[0]||(n[0]=r=>e.search=r),class:"form-control",id:"search-hinges"},null,512),[[p,e.search]]),P]),t("button",{type:"button",onClick:n[1]||(n[1]=r=>e.sortAndLoad("id")),class:"btn btn-outline-primary"},T)])])]),t("div",N,[e.items.length>0?(s(),i("table",S,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=r=>e.sortAndLoad("id"))},[h("# "),e.sort.direction==="desc"&&e.sort.column==="id"?(s(),i("span",B,D)):l("",!0),e.sort.direction==="asc"&&e.sort.column==="id"?(s(),i("span",U,E)):l("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[3]||(n[3]=r=>e.sortAndLoad("title"))},[h("Название "),e.sort.direction==="desc"&&e.sort.column==="title"?(s(),i("span",G,Z)):l("",!0),e.sort.direction==="asc"&&e.sort.column==="title"?(s(),i("span",z,Q)):l("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[4]||(n[4]=r=>e.sortAndLoad("price"))},[h("Цена "),e.sort.direction==="desc"&&e.sort.column==="price"?(s(),i("span",R,X)):l("",!0),e.sort.direction==="asc"&&e.sort.column==="price"?(s(),i("span",Y,tt)):l("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[5]||(n[5]=r=>e.sortAndLoad("updated_at"))},[h(" Дата изменения "),e.sort.direction==="desc"&&e.sort.column==="updated_at"?(s(),i("span",et,ot)):l("",!0),e.sort.direction==="asc"&&e.sort.column==="updated_at"?(s(),i("span",it,lt)):l("",!0)]),rt])]),t("tbody",null,[(s(!0),i(_,null,k(e.items,(r,a)=>(s(),i("tr",null,[t("th",at,u(r.id||a),1),t("td",{class:"text-center",onClick:d=>e.selectItem(r)},u(r.title||"-"),9,dt),t("td",ct,u(r.price||0),1),t("td",ht,u(r.updated_at||"-"),1),t("td",ut,[t("div",_t,[mt,t("ul",pt,[t("li",null,[t("a",{class:"dropdown-item",onClick:d=>e.selectItem(r),href:"javascript:void(0)"},[ft,h("Редактировать")],8,gt)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:d=>e.removeItem(r.id),href:"javascript:void(0)"},[kt,h("Удалить")],8,bt)])])])])]))),256))])])):l("",!0)]),e.items.length===0?(s(),i("div",vt,Ct)):l("",!0),e.items.length>0?(s(),i("div",jt,[t("div",Ft,[e.paginate_object?(s(),g(j,{key:0,onPagination_page:e.loadHinges,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):l("",!0)])])):l("",!0)],64))}}),It={props:["item"],data(){return{messages:[],loading:!1,form:{id:null,title:null,price:null}}},computed:{needClearForm(){return this.form.id||this.form.title||this.form.price}},mounted(){this.item&&this.$nextTick(()=>{this.form={id:this.item.id||null,title:this.item.title||null,price:this.item.price||0}})},methods:{alert(o){this.messages.push(o)},resetForm(){this.form.id=null,this.form.title=null,this.form.price=0,this.$emit("callback")},removeMessage(o){this.messages.splice(o,1)},submit(){let o=new FormData;Object.keys(this.form).forEach(e=>{const n=this.form[e]||"";typeof n=="object"?o.append(e,JSON.stringify(n)):o.append(e,n)}),this.$store.dispatch("storeHinge",{hingeForm:o}).then(e=>{this.$emit("callback"),this.resetForm()}).catch(e=>{})}}},Ot={class:"form-floating mb-3"},Pt=t("label",{for:"hinge-title"},"Наименование производителя петель",-1),Vt={class:"form-floating mb-3"},Tt=t("label",{for:"hinge-title"},"Цена петель",-1),Nt={class:"row"},St={class:"col-12"},Bt={class:"alert alert-danger alert-dismissible fade show",role:"alert"},Mt=t("strong",null,"Внимание!",-1),Dt=["onClick"],Ut={class:"row mt-5"},qt={class:"col-12 d-flex justify-content-center"},Et=["disabled"],Gt={key:0,class:"fa-regular fa-floppy-disk mr-1"},Jt={key:1,class:"spinner-border spinner-border-sm text-success",role:"status"},Zt=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1);function zt(o,e,n,r,a,d){return s(),i("form",{action:"",onSubmit:e[3]||(e[3]=w((...c)=>d.submit&&d.submit(...c),["prevent"]))},[t("div",Ot,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>a.form.title=c),class:"form-control",id:"hinge-title",required:""},null,512),[[p,a.form.title]]),Pt]),t("div",Vt,[m(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=c=>a.form.price=c),class:"form-control",id:"hinge-price",required:""},null,512),[[p,a.form.price]]),Tt]),t("div",Nt,[t("div",St,[a.messages.length>0?(s(!0),i(_,{key:0},k(a.messages,(c,v)=>(s(),i("div",Bt,[Mt,h(" "+u(c||"Ошибка")+" ",1),t("button",{type:"button",class:"btn-close",onClick:ee=>d.removeMessage(v)},null,8,Dt)]))),256)):l("",!0)])]),t("div",Ut,[t("div",qt,[t("button",{disabled:!d.needClearForm,class:"btn btn-outline-success rounded-5"},[a.loading?(s(),i("span",Jt)):(s(),i("i",Gt)),h(" Сохранить производителя петель ")],8,Et),d.needClearForm&&!a.loading?(s(),i("button",{key:0,type:"button",onClick:e[2]||(e[2]=(...c)=>d.resetForm&&d.resetForm(...c)),class:"btn btn-outline-danger rounded-5 ml-2"},[Zt,h(" Очистить форму ")])):l("",!0)])])],32)}const Kt=F(It,[["render",zt]]),Qt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Петли",-1),Rt={class:"py-12"},Wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Xt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Yt={class:"p-6 text-gray-900"},xt=t("hr",{class:"hr my-5"},null,-1),te={data(){return{loading:!1,selectedHinge:null}},methods:{selectHinge(o){this.selectedHinge=o,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackHingeForm(){this.loading=!0,this.selectedHinge=null,this.$nextTick(()=>{this.loading=!1})}}},re=Object.assign(te,{__name:"HingesPage",setup(o){return(e,n)=>(s(),i(_,null,[f(H(C),{title:"Петли"}),f(y,null,{header:b(()=>[Qt]),default:b(()=>[t("div",Rt,[t("div",Wt,[t("div",Xt,[t("div",Yt,[e.loading?l("",!0):(s(),g(Kt,{key:0,item:e.selectedHinge,onCallback:e.callbackHingeForm},null,8,["item","onCallback"])),xt,e.loading?l("",!0):(s(),g(At,{key:1,onSelect:e.selectHinge},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{re as default};
