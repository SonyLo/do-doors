import{A as M}from"./ApplicationLogo-CqQg-KHy.js";import{B as I,D as R,G as F,x as j,o as s,c as i,b as t,I as $,f as _,S as E,a as b,w as c,q as k,T as B,d as m,u as C,Y as D,m as P,g as d,t as f,e as r,v as y,h as N,F as w,k as q,p as U,r as x,j as z,_ as O,$ as A}from"./app-eMIHPZyw.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{v as L}from"./vue-the-mask-RBq02Si5.js";const Q={class:"relative"},J={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white"}},setup(n){const o=n,e=h=>{p.value&&h.key==="Escape"&&(p.value=!1)};I(()=>document.addEventListener("keydown",e)),R(()=>document.removeEventListener("keydown",e));const a=F(()=>({48:"w-48"})[o.width.toString()]),l=F(()=>o.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":o.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),p=j(!1);return(h,u)=>(s(),i("div",Q,[t("div",{onClick:u[0]||(u[0]=T=>p.value=!p.value)},[$(h.$slots,"trigger")]),_(t("div",{class:"fixed inset-0 z-40",onClick:u[1]||(u[1]=T=>p.value=!1)},null,512),[[E,p.value]]),b(B,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:c(()=>[_(t("div",{class:k(["absolute z-50 mt-2 rounded-md shadow-lg",[a.value,l.value]]),style:{display:"none"},onClick:u[2]||(u[2]=T=>p.value=!1)},[t("div",{class:k(["rounded-md ring-1 ring-black ring-opacity-5",n.contentClasses])},[$(h.$slots,"content")],2)],2),[[E,p.value]])]),_:3})]))}},S={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(n){return(o,e)=>(s(),m(C(D),{href:n.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out"},{default:c(()=>[$(o.$slots,"default")]),_:3},8,["href"]))}},v={__name:"NavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(n){const o=n,e=F(()=>o.active?"inline-flex items-center px-1 pt-1 border-b-2 border-indigo-400 text-sm font-medium leading-5 text-gray-900 focus:outline-none focus:border-indigo-700 transition duration-150 ease-in-out":"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 transition duration-150 ease-in-out");return(a,l)=>(s(),m(C(D),{href:n.href,class:k(e.value)},{default:c(()=>[$(a.$slots,"default")]),_:3},8,["href","class"]))}},g={__name:"ResponsiveNavLink",props:{href:{type:String,required:!0},active:{type:Boolean}},setup(n){const o=n,e=F(()=>o.active?"block w-full ps-3 pe-4 py-2 border-l-4 border-indigo-400 text-start text-base font-medium text-indigo-700 bg-indigo-50 focus:outline-none focus:text-indigo-800 focus:bg-indigo-100 focus:border-indigo-700 transition duration-150 ease-in-out":"block w-full ps-3 pe-4 py-2 border-l-4 border-transparent text-start text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 transition duration-150 ease-in-out");return(a,l)=>(s(),m(C(D),{href:n.href,class:k(e.value)},{default:c(()=>[$(a.$slots,"default")]),_:3},8,["href","class"]))}},G={props:["modelValue"],data(){return{flgDays:!0,discount:0,clientForm:null}},mounted(){this.clientForm=this.modelValue},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},watch:{clientForm:{handler(n){this.$emit("update:modelValue",this.clientForm)},deep:!0}},methods:{hasRoles(n){let o=!1;return typeof n=="object"?this.$page.props.auth.roles.forEach(e=>{o=o||n.includes(e)}):this.$page.props.auth.roles.includes(n),o},changeCurrentPayed(){this.clientForm.payed_percent=Math.round(this.clientForm.current_payed/this.cartTotalPrice*100)},changePayedPercent(){this.clientForm.current_payed=Math.round(this.cartTotalPrice*this.clientForm.payed_percent/100)},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(n=>{this.discount=n.discount||0})}}},K={class:"font-bold"},Y={key:0},H=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),W=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),X={class:"form-floating mb-3"},Z=t("label",{for:"checkout-promo"},"Промокод",-1),ee={key:0},te={class:"form-floating mb-3"},oe=t("label",{for:"checkout-name"},"Начальная внесенная покупателем сумма, руб",-1),se={class:"form-floating mb-3"},ne=t("label",{for:"checkout-name"},"Процент внесенной суммы от полной стоимости",-1),re={class:"form-check form-switch"},le=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Указать кол-во рабочих дней / Выбрать конкретную дату",-1),ae={key:0,class:"form-floating mb-3"},ie=t("label",{for:"checkout-name"},"Кол-во рабочих дней",-1),de={key:1,class:"form-floating mb-3"},ce=t("label",{for:"checkout-name"},"Срок передачи товара покупателю",-1),ue=t("button",{class:"btn btn-dark w-100 my-2 rounded-0"},"Отправить и скачать договор ",-1),me={key:1,class:"btn btn-dark w-100 my-2 rounded-0"};function he(n,o,e,a,l,p){return l.clientForm?(s(),i(w,{key:0},[t("h6",K,[d("Итого цена "+f(Math.round(n.cartTotalPrice*(1-l.discount/100)))+" ₽ ",1),l.discount>0?(s(),i("span",Y,"(скидка "+f(l.discount)+"%)",1)):r("",!0)]),H,W,t("div",X,[_(t("input",{type:"text",class:"form-control",onKeyup:o[0]||(o[0]=(...h)=>p.findPromo&&p.findPromo(...h)),"onUpdate:modelValue":o[1]||(o[1]=h=>l.clientForm.promo=h),id:"checkout-promo",placeholder:"name@example.com"},null,544),[[y,l.clientForm.promo]]),Z]),p.hasRoles(["manager","administrator"])?(s(),i("div",ee,[t("div",te,[_(t("input",{type:"text",class:"form-control",onChange:o[2]||(o[2]=(...h)=>p.changeCurrentPayed&&p.changeCurrentPayed(...h)),"onUpdate:modelValue":o[3]||(o[3]=h=>l.clientForm.current_payed=h),id:"checkout-name",placeholder:"",required:""},null,544),[[y,l.clientForm.current_payed]]),oe]),t("div",se,[_(t("input",{type:"text",class:"form-control",onChange:o[4]||(o[4]=(...h)=>p.changePayedPercent&&p.changePayedPercent(...h)),"onUpdate:modelValue":o[5]||(o[5]=h=>l.clientForm.payed_percent=h),id:"checkout-name",placeholder:"name@example.com",required:""},null,544),[[y,l.clientForm.payed_percent]]),ne]),t("div",re,[_(t("input",{onClick:o[6]||(o[6]=h=>l.flgDays=!l.flgDays),"onUpdate:modelValue":o[7]||(o[7]=h=>l.flgDays=h),class:"form-check-input",type:"checkbox",role:"switch",id:""},null,512),[[N,l.flgDays]]),le]),l.flgDays?(s(),i("div",ae,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[8]||(o[8]=h=>l.clientForm.work_days=h),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[y,l.clientForm.work_days]]),ie])):(s(),i("div",de,[_(t("input",{type:"date",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=h=>l.clientForm.delivery_terms=h),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[y,l.clientForm.delivery_terms]]),ce])),ue])):(s(),i("button",me,"Отправить"))],64)):r("",!0)}const pe=V(G,[["render",he]]),fe={props:["modelValue"],data(){return{clientForm:null}},watch:{clientForm:{handler(n){this.$emit("update:modelValue",this.clientForm)},deep:!0}},mounted(){this.clientForm=this.modelValue}},_e={class:"form-floating mb-3"},ve=t("label",{for:"checkout-phone"},"Ваш номер телефона",-1),ye={class:"form-floating mb-3"},be=t("label",{for:"checkout-email"},"Ваш email",-1),ge={class:"form-floating"},ke=t("label",{for:"checkout-info"},"Дополнительная информация",-1),we={class:"row my-3"},$e={class:"col-md-6"},Fe={class:"form-check"},Ce=t("label",{class:"form-check-label",for:"work-with-nds"}," Для ООО ",-1),De={class:"col-md-6"},Pe={class:"form-check"},Ve=t("label",{class:"form-check-label",for:"work-without-nds"}," Для ИП ",-1);function Te(n,o,e,a,l,p){const h=q("mask");return l.clientForm?(s(),i(w,{key:0},[t("div",_e,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=u=>l.clientForm.phone=u),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[h,"+7(###)###-##-##"],[y,l.clientForm.phone]]),ve]),t("div",ye,[_(t("input",{type:"email",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=u=>l.clientForm.email=u),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[y,l.clientForm.email]]),be]),t("div",ge,[_(t("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":o[2]||(o[2]=u=>l.clientForm.info=u),placeholder:"Оставьте свой комментарий",id:"checkout-info"},null,512),[[y,l.clientForm.info]]),ke]),t("div",we,[t("div",$e,[t("div",Fe,[_(t("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":o[3]||(o[3]=u=>l.clientForm.work_with_nds=u),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[U,l.clientForm.work_with_nds]]),Ce])]),t("div",De,[t("div",Pe,[_(t("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":o[4]||(o[4]=u=>l.clientForm.work_with_nds=u),id:"work-without-nds"},null,512),[[U,l.clientForm.work_with_nds]]),Ve])])])],64)):r("",!0)}const Ee=V(fe,[["render",Te]]),Ue={props:["modelValue"],data(){return{clientForm:null}},watch:{clientForm:{handler(n){this.$emit("update:modelValue",this.clientForm)},deep:!0}},mounted(){this.clientForm=this.modelValue}},Se={class:"form-floating mb-3"},je=t("label",{for:"checkout-phone"},"Ваш номер телефона",-1),qe={class:"form-floating mb-3"},xe=t("label",{for:"checkout-email"},"Ваш email",-1),Le={class:"form-floating mb-3"},Me=t("label",{for:"checkout-email"},"Паспорт",-1),Ie={class:"form-floating mb-3"},Re=t("label",{for:"checkout-email"},"Выдан",-1),Be={class:"form-floating mb-3"},Ne=t("label",{for:"checkout-email"},"Адрес доставки",-1),ze={class:"form-floating mb-3"},Oe=t("label",{for:"checkout-email"},"Дополнительная информация",-1);function Ae(n,o,e,a,l,p){const h=q("mask");return l.clientForm?(s(),i(w,{key:0},[t("div",Se,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=u=>l.clientForm.phone=u),id:"checkout-phone",placeholder:"name@example.com",required:""},null,512),[[h,"+7(###)###-##-##"],[y,l.clientForm.phone]]),je]),t("div",qe,[_(t("input",{type:"email",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=u=>l.clientForm.email=u),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[y,l.clientForm.email]]),xe]),t("div",Le,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=u=>l.clientForm.passport=u),id:"checkout-email",placeholder:"name@example.com"},null,512),[[h,"## ##  ######"],[y,l.clientForm.passport]]),Me]),t("div",Ie,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=u=>l.clientForm.passport_issued=u),id:"checkout-email",placeholder:"name@example.com"},null,512),[[y,l.clientForm.passport_issued]]),Re]),t("div",Be,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=u=>l.clientForm.delivery_address=u),id:"checkout-email",placeholder:"name@example.com",required:""},null,512),[[y,l.clientForm.delivery_address]]),Ne]),t("div",ze,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=u=>l.clientForm.info=u),id:"checkout-email",placeholder:"name@example.com"},null,512),[[y,l.clientForm.info]]),Oe])],64)):r("",!0)}const Qe=V(Ue,[["render",Ae]]),Je={class:"input-group mb-3"},Ge={class:"form-floating"},Ke=t("label",{for:"checkout-name"},"Ваше Ф.И.О.",-1),Ye={key:0,class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},He=t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"},null,-1),We=[He],Xe={class:"dropdown-menu dropdown-menu-end rounded-0"},Ze=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),et=["onClick"],tt={key:1,class:"card rounded-0"},ot=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),st=[ot],nt={props:["type"],directives:{mask:L.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},watch:{},data(){return{tab:0,step:0,self_clients:[],clientForm:{id:null,name:null,phone:null,email:null,info:null,promo:null,work_with_nds:1,items:[],current_payed:0,payed_percent:0,delivery_terms:null,work_days:0,passport:null,passport_issued:null,delivery_address:null}}},mounted(){this.loadSelfClients()},methods:{back(){this.$emit("back")},preparedLawStatus(n){let e=(this.getDictionary.statuses||[]).find(a=>a.value===n)||null;return e?e.title:null},selectInfo(n){if(n==null){this.clientForm.id=null,this.clientForm.name=null,this.clientForm.email=null,this.clientForm.phone=null,this.clientForm.pasport=null,this.clientForm.pasport_issued=null,this.clientForm.fact_address=null;return}this.clientForm.id=n.id||null,this.clientForm.name=n.title||null,this.clientForm.email=n.email||null,this.clientForm.phone=n.phone||null,this.clientForm.delivery_address=n.fact_address||null,this.clientForm.pasport=n.pasport||null,this.clientForm.pasport_issued=n.pasport_issued||null},clearCart(){this.$store.dispatch("clearCart").then(n=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"})}).catch(n=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},findPromo(){this.discount=0,!((this.clientForm.promo||"").length<=5)&&this.$store.dispatch("findPromoCode",{code:this.clientForm.promo}).then(n=>{this.discount=n.discount||0})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(n=>{this.self_clients=n.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let n=new FormData;Object.keys(this.clientForm).forEach(o=>{const e=this.clientForm[o]||"";typeof e=="object"?n.append(o,JSON.stringify(e)):n.append(o,e)}),n.append("total_price",this.cartTotalPrice),n.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:n}).then(o=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null,passport:null,passport_issued:null,delivery_address:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(o=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},rt=Object.assign(nt,{__name:"CartCheckoutForm",setup(n){return(o,e)=>o.cartTotalCount>0?(s(),i("form",{key:0,onSubmit:e[6]||(e[6]=z((...a)=>o.submit&&o.submit(...a),["prevent"]))},[t("div",Je,[t("div",Ge,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>o.clientForm.name=a),id:"checkout-name",placeholder:"name@example.com",required:""},null,512),[[y,o.clientForm.name]]),Ke]),o.self_clients.length>0?(s(),i("button",Ye,We)):r("",!0),t("ul",Xe,[t("li",null,[t("a",{class:"dropdown-item",onClick:e[1]||(e[1]=a=>o.selectInfo(null)),href:"javascript:void(0)"},"Не выбрано")]),Ze,t("li",null,[(s(!0),i(w,null,x(o.self_clients,a=>(s(),i(w,null,[a.status!="individual"?(s(),i("a",{key:0,class:"dropdown-item",href:"javascript:void(0)",onClick:l=>o.selectInfo(a)},f(a.title||null)+" ("+f(o.preparedLawStatus(a.status)||"Не указан")+")",9,et)):r("",!0)],64))),256))])])]),(n.type||0)===0?(s(),m(Ee,{key:0,modelValue:o.clientForm,"onUpdate:modelValue":e[2]||(e[2]=a=>o.clientForm=a)},null,8,["modelValue"])):r("",!0),(n.type||0)===1?(s(),m(Qe,{key:1,modelValue:o.clientForm,"onUpdate:modelValue":e[3]||(e[3]=a=>o.clientForm=a)},null,8,["modelValue"])):r("",!0),b(pe,{modelValue:o.clientForm,"onUpdate:modelValue":e[4]||(e[4]=a=>o.clientForm=a)},null,8,["modelValue"]),t("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0",onClick:e[5]||(e[5]=(...a)=>o.back&&o.back(...a))},"Назад ")],32)):(s(),i("div",tt,st))}}),lt={props:["item"],methods:{editDoorItem(){window.dispatchEvent(new CustomEvent("select-door-item",{detail:{item:this.item}}))},removeProduct(){this.$store.dispatch("removeProduct",this.item.product.id)},changeQuantityProductInCart(n="increment"){let o=n==="increment"?this.item.quantity+1:this.item.quantity-1;if(o===0){this.$store.dispatch("removeProduct",this.item.product.id);return}this.$store.dispatch("setQuantity",{id:this.item.product.id,quantity:o})}}},at={class:"card mb-2 rounded-0"},it={class:"card-body"},dt={class:"row"},ct={class:"col-md-12"},ut={class:"text-muted font-bold"},mt={class:"text-black mb-0"},ht={key:0},pt={key:1,class:"ml-1"},ft={key:2,class:"ml-1"},_t={key:3},vt={key:4,class:"ml-1"},yt={key:5,class:"ml-1"},bt={key:6,class:"ml-1"},gt={key:7,class:"ml-1"},kt={key:8,class:"ml-1"},wt={key:9,class:"ml-1"},$t={key:10,class:"ml-1"},Ft={key:11,class:"ml-1"},Ct={key:12,class:"ml-1"},Dt={key:13,class:"ml-1"},Pt={key:14,class:"ml-1"},Vt={key:15,class:"ml-1"},Tt={key:16,class:"ml-1"},Et={class:"row d-flex align-items-center"},Ut={class:"col-5 col-md-5 col-lg-5 col-xl-5 d-flex justify-content-center mt-2"},St=t("i",{class:"fas fa-minus"},null,-1),jt=[St],qt={class:"btn",style:{color:"black"}},xt=t("i",{class:"fas fa-plus"},null,-1),Lt=[xt],Mt={class:"col-5 col-md-5 col-lg-5 col-xl-5"},It={class:"mb-0 text-center font-bold"},Rt={class:"col-2 col-md-2 col-lg-2 col-xl-2 text-center"},Bt=t("i",{class:"fas fa-times"},null,-1),Nt=[Bt],zt={class:"col-12"},Ot=t("i",{class:"fa-regular fa-pen-to-square mr-2"},null,-1);function At(n,o,e,a,l,p){var h;return s(),i("div",at,[t("div",it,[t("div",dt,[t("div",ct,[t("h6",ut,f(e.item.product.purpose||"-")+": "+f(e.item.product.door_type.title)+" "+f(e.item.product.width)+"x"+f(e.item.product.height)+"x "+f(((h=e.item.product.opening_type)==null?void 0:h.depth)||0),1),t("h6",mt,[e.item.product.box_and_frame_color.title?(s(),i("span",ht,"("+f(e.item.product.box_and_frame_color.title)+")",1)):r("",!0),d(" лицо "),e.item.product.front_side_finish.title?(s(),i("span",pt,f(e.item.product.front_side_finish.title),1)):r("",!0),d("/ "),e.item.product.back_side_finish.title?(s(),i("span",ft,f(e.item.product.back_side_finish.title)+",",1)):r("",!0),d(" петли "),e.item.product.loops.title?(s(),i("span",_t,f(e.item.product.loops.title)+",",1)):r("",!0),e.item.product.hinge_manufacturer.title?(s(),i("span",vt,f(e.item.product.hinge_manufacturer.title)+",",1)):r("",!0),e.item.product.fittings_color.title?(s(),i("span",yt,"("+f(e.item.product.fittings_color.title)+"),",1)):r("",!0),e.item.product.opening_type.title?(s(),i("span",bt,f(e.item.product.opening_type.title)+",",1)):r("",!0),e.item.product.handle_holes.title?(s(),i("span",gt,f(e.item.product.handle_holes.title)+",",1)):r("",!0),e.item.product.need_automatic_doorstep?(s(),i("span",kt," автоматический порожек,")):r("",!0),e.item.product.need_upper_jumper?(s(),i("span",wt," верхняя перемычка,")):r("",!0),e.item.product.need_handle_holes?(s(),i("span",$t," дверная ручка,")):r("",!0),e.item.product.handle_holes_type.title?(s(),i("span",Ft,f(e.item.product.handle_holes_type.title)+",",1)):r("",!0),e.item.product.handle_holes.title?(s(),i("span",Ct,f(e.item.product.handle_holes.title)+",",1)):r("",!0),e.item.product.need_hidden_door_closer?(s(),i("span",Dt," скрытый доводчик,")):r("",!0),e.item.product.need_hidden_skirting_board?(s(),i("span",Pt," скрытый плинтус,")):r("",!0),e.item.product.need_hidden_stopper?(s(),i("span",Vt," скрытый стопор,")):r("",!0),e.item.product.need_door_install?(s(),i("span",Tt," установка двери")):r("",!0)])])]),t("div",Et,[t("div",Ut,[t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:o[0]||(o[0]=u=>p.changeQuantityProductInCart("decrement"))},jt),t("span",qt,f(e.item.quantity),1),t("button",{class:"btn btn-link px-2",type:"button",style:{color:"black"},onClick:o[1]||(o[1]=u=>p.changeQuantityProductInCart("increment"))},Lt)]),t("div",Mt,[t("h6",It,f(e.item.quantity*(e.item.product.price||0))+" ₽",1)]),t("div",Rt,[t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=(...u)=>p.removeProduct&&p.removeProduct(...u)),class:"text-muted"},Nt)]),t("div",zt,[t("button",{type:"button",style:{color:"black"},class:"btn btn-link",onClick:o[3]||(o[3]=(...u)=>p.editDoorItem&&p.editDoorItem(...u))},[Ot,d("Редактировать")])])])])])}const Qt=V(lt,[["render",At]]),Jt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"cart","aria-labelledby":"cart"},Gt={class:"offcanvas-header"},Kt={class:"offcanvas-title font-bold"},Yt={key:0},Ht={key:1},Wt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),Xt={key:0,class:"offcanvas-body"},Zt=t("div",{class:"hr my-3"},null,-1),eo={key:1,class:"card rounded-0"},to=t("div",{class:"card-body"},[t("p",null,"Вы должны добавить в корзину хотя бы одно изделие")],-1),oo=[to],so={key:1,class:"offcanvas-body"},no={key:2,class:"offcanvas-footer p-3"},ro={class:"card rounded-0"},lo={class:"card-body"},ao={class:"font-bold"},io=t("p",{class:"mb-2"},[t("small",null,"Возможно в рассрочку!")],-1),co=t("p",{class:"mb-2",style:{"line-height":"80%"}},[t("small",null,"От цвета шпона или цвета покраски стекла цена не зависит, просто уточните эти детали в беседе с менеджером")],-1),uo={key:0},mo={directives:{mask:L.mask},computed:{...P(["getErrors","getDictionary","cartTotalCount","cartTotalPrice","cartProducts"])},data(){return{tab:0,step:0,discount:0}},mounted(){},methods:{back(){this.step=0,this.tab=0},checkout(){this.step=1,this.tab=1},clearCart(){this.$store.dispatch("clearCart").then(n=>{this.$notify({title:"DoDoors",text:"Успешно очищено",type:"success"}),window.dispatchEvent(new CustomEvent("clear-cart"))}).catch(n=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},downloadCartExcel(){let n=this.cartProducts,o=new FormData;o.append("items",JSON.stringify(n)),this.$store.dispatch("downloadExcel",{cardData:o}).then(e=>{var a=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.href=a,l.setAttribute("download","cart.xls"),document.body.appendChild(l),l.click(),this.$notify({title:"DoDoors",text:"Excel успешно скачан!",type:"success"})}).catch(e=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},loadSelfClients(){this.$store.dispatch("loadSelfClients").then(n=>{this.self_clients=n.data||[]}).catch(()=>{})},submit(){this.clientForm.items=this.cartProducts;let n=new FormData;Object.keys(this.clientForm).forEach(o=>{const e=this.clientForm[o]||"";typeof e=="object"?n.append(o,JSON.stringify(e)):n.append(o,e)}),n.append("total_price",this.cartTotalPrice),n.append("total_count",this.cartTotalCount),this.$store.dispatch("checkoutItems",{clientForm:n}).then(o=>{this.step=0,this.$store.dispatch("clearCart"),this.clientForm={name:null,phone:null,email:null,info:null},this.$notify({title:"DoDoors",text:"Заказ передан менеджеру!",type:"success"})}).catch(o=>{this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})}}},ho=Object.assign(mo,{__name:"CalcCartSimple",setup(n){return(o,e)=>(s(),i("div",Jt,[t("div",Gt,[t("h5",Kt,[o.tab===0?(s(),i("span",Yt,"Вы выбрали")):r("",!0),o.tab===1?(s(),i("span",Ht,"Оформление заказа")):r("",!0)]),Wt]),o.tab===0?(s(),i("div",Xt,[o.cartProducts.length>0?(s(),i(w,{key:0},[(s(!0),i(w,null,x(o.cartProducts,a=>(s(),m(Qt,{item:a},null,8,["item"]))),256)),Zt,t("button",{onClick:e[0]||(e[0]=(...a)=>o.downloadCartExcel&&o.downloadCartExcel(...a)),class:"btn btn-dark rounded-0 w-100 mb-2"}," Скачать в виде Excel-файла "),t("button",{onClick:e[1]||(e[1]=(...a)=>o.clearCart&&o.clearCart(...a)),class:"btn btn-outline-secondary rounded-0 w-100 mb-2"}," Очистить корзину ")],64)):(s(),i("div",eo,oo))])):r("",!0),o.tab===1?(s(),i("div",so,[o.step===1?(s(),m(rt,{key:0,onBack:o.back},null,8,["onBack"])):r("",!0)])):r("",!0),o.cartProducts.length>0&&o.tab===0?(s(),i("div",no,[t("div",ro,[t("div",lo,[t("h6",ao,"Итого цена "+f(o.cartTotalPrice)+" ₽",1),io,co,o.step===0?(s(),i("div",uo,[t("button",{class:"btn btn-dark rounded-0 w-100 mb-2",onClick:e[2]||(e[2]=(...a)=>o.checkout&&o.checkout(...a))},"Обсудить заказ с менеджером "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[3]||(e[3]=(...a)=>o.checkout&&o.checkout(...a))},"Получить цену на почту "),t("button",{class:"btn btn-outline-secondary rounded-0 w-100 mb-2",onClick:e[4]||(e[4]=(...a)=>o.checkout&&o.checkout(...a))},"Получить цену в Telegram ")])):r("",!0)])])])):r("",!0)]))}}),po={class:"min-h-screen bg-gray-100"},fo={class:"bg-white border-b border-gray-100"},_o={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},vo={class:"flex justify-between h-16"},yo={class:"flex"},bo={class:"shrink-0 flex items-center"},go={class:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex"},ko={class:"badge bg-danger ml-1 rounded-full"},wo={class:"hidden sm:flex sm:items-center sm:ms-6"},$o={class:"ms-3 relative"},Fo={class:"inline-flex rounded-0"},Co={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-0 text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},Do=t("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Po={class:"-me-2 flex items-center sm:hidden"},Vo={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},To={class:"pt-2 pb-3 space-y-1"},Eo={class:"pt-4 pb-1 border-t border-gray-200"},Uo={class:"px-4"},So={class:"font-medium text-base text-gray-800"},jo={class:"font-medium text-sm text-gray-500"},qo={class:"mt-3 space-y-1"},xo=t("hr",null,null,-1),Lo={class:"mt-3 space-y-1"},Mo=t("i",{class:"fa-solid fa-lock"},null,-1),Io=t("i",{class:"fa-solid fa-lock"},null,-1),Ro={key:0,class:"bg-white shadow"},Bo={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},No=A('<div class="container border-b border-gray-100"><footer class="py-3 my-4"><div class="d-flex justify-center"><img src="/images/logo.jpg" style="width:100px;" alt=""></div><p class="text-center text-muted">© 2024 DoDoors</p></footer></div>',1),zo={key:0,class:"cart-fixed-btn"},Oo={class:"btn rounded-0 shadow-lg","data-bs-toggle":"offcanvas",href:"#cart",role:"button","aria-controls":"cart"},Ao=t("i",{class:"fa-solid fa-basket-shopping text-primary"},null,-1),Qo={class:"badge text-primary font-bold"},Jo={class:"offcanvas offcanvas-start","data-bs-scroll":"true","data-bs-backdrop":"false",tabindex:"-1",id:"main-side-admin-menu","aria-labelledby":"offcanvasExampleLabel"},Go=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"}," DoDoors "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),Ko={class:"offcanvas-body"},Yo={class:"row"},Ho={class:"col-md-6"},Wo=t("i",{class:"fa-solid fa-user-tie mr-2"},null,-1),Xo={class:"col-md-6"},Zo=t("i",{class:"fa-solid fa-screwdriver-wrench mr-2"},null,-1),es={class:"py-5"},ts={key:0,class:"d-flex flex-col align-items-center"},os={key:1,class:"d-flex flex-col align-items-center"},ss={data(){return{menuTab:0}},computed:{...P(["getErrors","cartTotalCount","cartProducts"])},mounted(){},methods:{hasRoles(n){return(this.$page.props.auth.roles||[]).includes(n)},can(n){return(this.$page.props.auth.permissions||[]).includes(n)}}},is=Object.assign(ss,{__name:"AuthenticatedLayout",setup(n){const o=j(!1);return(e,a)=>{const l=O("notifications");return s(),i(w,null,[t("div",null,[b(l,{position:"top right"}),t("div",po,[t("nav",fo,[t("div",_o,[t("div",vo,[t("div",yo,[t("div",bo,[b(C(D),{href:e.route("dashboard")},{default:c(()=>[b(M,{class:"block h-9 w-auto fill-current text-gray-800"})]),_:1},8,["href"])]),t("div",go,[e.can("manage-views-adminmenu")?(s(),m(v,{key:0,"data-bs-toggle":"offcanvas",href:"#main-side-admin-menu",role:"button","aria-controls":"main-side-admin-menu"},{default:c(()=>[d(" Админ.меню ")]),_:1})):r("",!0),b(v,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:c(()=>[d(" Главная ")]),_:1},8,["href","active"]),e.cartTotalCount>0?(s(),m(v,{key:1,href:e.route("basket"),active:e.route().current("basket")},{default:c(()=>[d(" Корзина "),t("span",ko,f(e.cartTotalCount),1)]),_:1},8,["href","active"])):r("",!0)])]),t("div",wo,[t("div",$o,[b(J,{align:"right",width:"48"},{trigger:c(()=>[t("span",Fo,[t("button",Co,[d(f(e.$page.props.auth.user.name)+" ",1),Do])])]),content:c(()=>[b(S,{href:e.route("profile.edit")},{default:c(()=>[d(" Профиль")]),_:1},8,["href"]),b(S,{href:e.route("logout"),method:"post",as:"button"},{default:c(()=>[d(" Выход ")]),_:1},8,["href"])]),_:1})])]),t("div",Po,[t("button",{onClick:a[0]||(a[0]=p=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(s(),i("svg",Vo,[t("path",{class:k({hidden:o.value,"inline-flex":!o.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:k({hidden:!o.value,"inline-flex":o.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),t("div",{class:k([{block:o.value,hidden:!o.value},"sm:hidden"])},[t("div",To,[b(g,{href:e.route("dashboard"),active:e.route().current("dashboard")},{default:c(()=>[d(" Главная страница ")]),_:1},8,["href","active"])]),t("div",Eo,[t("div",Uo,[t("div",So,f(e.$page.props.auth.user.name),1),t("div",jo,f(e.$page.props.auth.user.email),1)]),t("div",qo,[b(g,{href:e.route("profile.edit")},{default:c(()=>[d(" Профиль")]),_:1},8,["href"]),b(g,{href:e.route("logout"),method:"post",as:"button"},{default:c(()=>[d(" Выход ")]),_:1},8,["href"]),xo]),t("div",Lo,[e.can("manage-users")?(s(),m(g,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:c(()=>[d(" Пользователи ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(s(),m(g,{key:1,class:"p-3"},{default:c(()=>[d(" Клиенты "),Mo]),_:1})):r("",!0),e.can("manage-orders")?(s(),m(g,{key:2,class:"p-3"},{default:c(()=>[d(" Заказы "),Io]),_:1})):r("",!0),e.can("manage-materials")?(s(),m(g,{key:3,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:c(()=>[d(" Материалы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-handles")?(s(),m(g,{key:4,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:c(()=>[d(" Ручки ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-hinges")?(s(),m(g,{key:5,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:c(()=>[d(" Петли ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-door-variants")?(s(),m(g,{key:6,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:c(()=>[d(" Типы дверей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-colors")?(s(),m(g,{key:7,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:c(()=>[d(" Цвета ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-sizes")?(s(),m(g,{key:8,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:c(()=>[d(" Размеры ")]),_:1},8,["href","active"])):r("",!0)])])],2)]),e.$slots.header?(s(),i("header",Ro,[t("div",Bo,[$(e.$slots,"header")])])):r("",!0),t("main",null,[$(e.$slots,"default")])])]),No,e.cartTotalCount>0?(s(),i("div",zo,[t("a",Oo,[Ao,t("span",Qo,f(e.cartTotalCount)+" шт.",1)])])):r("",!0),b(ho),t("div",Jo,[Go,t("div",Ko,[t("div",Yo,[t("div",Ho,[t("button",{class:k(["btn w-100 rounded-0",{"btn-dark":e.menuTab===0,"btn-outline-secondary":e.menuTab!==0}]),onClick:a[1]||(a[1]=p=>e.menuTab=0)},[Wo,d("Общее ")],2)]),t("div",Xo,[t("button",{class:k(["btn w-100 rounded-0",{"btn-dark":e.menuTab===1,"btn-outline-secondary":e.menuTab!==1}]),onClick:a[2]||(a[2]=p=>e.menuTab=1)},[Zo,d("Админ ")],2)])]),t("div",es,[e.menuTab===0?(s(),i("nav",ts,[e.can("manage-calc")?(s(),m(v,{key:0,class:"p-3",href:e.route("calc"),active:e.route().current("calc")},{default:c(()=>[d(" Калькулятор ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(s(),m(v,{key:1,class:"p-3",href:e.route("clients"),active:e.route().current("clients")},{default:c(()=>[d(" Клиенты ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-clients")?(s(),m(v,{key:2,class:"p-3",href:e.route("documents"),active:e.route().current("documents")},{default:c(()=>[d(" Договора (Документы) ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-orders")?(s(),m(v,{key:3,class:"p-3",href:e.route("orders"),active:e.route().current("orders")},{default:c(()=>[d(" Заказы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-promo-codes")?(s(),m(v,{key:4,class:"p-3",href:e.route("promo-codes"),active:e.route().current("promo-codes")},{default:c(()=>[d(" Промокоды ")]),_:1},8,["href","active"])):r("",!0)])):r("",!0),e.menuTab===1?(s(),i("nav",os,[e.can("manage-users")?(s(),m(v,{key:0,class:"p-3",href:e.route("users"),active:e.route().current("users")},{default:c(()=>[d(" Пользователи ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-roles")?(s(),m(v,{key:1,class:"p-3",href:e.route("roles"),active:e.route().current("roles")},{default:c(()=>[d(" Роли пользователей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-permissions")?(s(),m(v,{key:2,class:"p-3",href:e.route("permissions"),active:e.route().current("permissions")},{default:c(()=>[d(" Разрешения пользователей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-services")?(s(),m(v,{key:3,class:"p-3",href:e.route("services"),active:e.route().current("services")},{default:c(()=>[d(" Сервисы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-materials")?(s(),m(v,{key:4,class:"p-3",href:e.route("materials"),active:e.route().current("materials")},{default:c(()=>[d(" Материалы ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-handles")?(s(),m(v,{key:5,class:"p-3",href:e.route("handles"),active:e.route().current("handles")},{default:c(()=>[d(" Ручки ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-hinges")?(s(),m(v,{key:6,class:"p-3",href:e.route("hinges"),active:e.route().current("hinges")},{default:c(()=>[d(" Петли ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-door-variants")?(s(),m(v,{key:7,class:"p-3",href:e.route("door-variants"),active:e.route().current("door-variants")},{default:c(()=>[d(" Типы дверей ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-colors")?(s(),m(v,{key:8,class:"p-3",href:e.route("colors"),active:e.route().current("colors")},{default:c(()=>[d(" Цвета ")]),_:1},8,["href","active"])):r("",!0),e.can("manage-sizes")?(s(),m(v,{key:9,class:"p-3",href:e.route("sizes"),active:e.route().current("sizes")},{default:c(()=>[d(" Размеры ")]),_:1},8,["href","active"])):r("",!0)])):r("",!0)])])])],64)}}});export{is as _,rt as a};
