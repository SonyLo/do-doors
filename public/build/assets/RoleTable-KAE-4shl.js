import{m as _,o as e,c as o,b as s,f as p,v as m,g as d,e as n,F as u,r as f,d as g,t as r}from"./app-ClIqG0Iz.js";import{P as k}from"./Pagination-BYpzmlX7.js";const v={class:"row"},b={class:"col-12"},y={class:"input-group mb-3"},w={class:"form-floating"},C=s("label",{for:"search-roles"},"Поиск по ролям",-1),$=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),R=[$],j={style:{"overflow-y":"auto"}},I={key:0,class:"table"},L={key:0},A=s("i",{class:"fa-solid fa-caret-down"},null,-1),P=[A],S={key:1},B=s("i",{class:"fa-solid fa-caret-up"},null,-1),O=[B],V={key:0},N=s("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],D={key:1},F=s("i",{class:"fa-solid fa-caret-up"},null,-1),E=[F],G={key:0},M=s("i",{class:"fa-solid fa-caret-down"},null,-1),U=[M],q={key:1},z=s("i",{class:"fa-solid fa-caret-up"},null,-1),H=[z],J={key:0},K=s("i",{class:"fa-solid fa-caret-down"},null,-1),Q=[K],W={key:1},X=s("i",{class:"fa-solid fa-caret-up"},null,-1),Y=[X],Z={key:1,scope:"col",class:"text-center"},x={scope:"row"},ss=["onClick"],ts=["onClick"],es={key:0,class:"text-center"},os={key:1,class:"text-center"},ns={class:"dropdown"},is=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),ls={class:"dropdown-menu"},as=["onClick"],ds=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),rs=["onClick"],cs=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),us={key:0,class:"alert alert-success rounded-0",role:"alert"},hs=s("h4",{class:"alert-heading"},"Роли пользователей",-1),_s=s("p",null,"К сожалению, раздел ролей пуст. Вы еще не добавили ни одной роли, которые можно отобразить на этой странице.",-1),ps=s("hr",null,null,-1),ms=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свою первую роль",-1),fs=[hs,_s,ps,ms],gs={key:1,class:"row mb-3"},ks={class:"col-12"},vs={props:["forSelect"],data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0,variants:[]}]}},computed:{..._(["getRoles","getRolesPaginateObject"])},mounted(){this.loadRoles()},methods:{sortAndLoad(l){this.sort.column=l,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadRoles(this.current_page)},loadRoles(l=0){this.current_page=l,this.$store.dispatch("loadRoles",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getRoles,this.paginate_object=this.getRolesPaginateObject}).catch(()=>{this.loading=!1})},selectItem(l){this.$emit("select",l)},duplicateItem(l){this.$store.dispatch("duplicateRole",{roleId:l}).then(()=>{this.sortAndLoad("id")})},removeItem(l){this.$store.dispatch("removeRole",{roleId:l}).then(()=>{this.sortAndLoad("id")})}}},ws=Object.assign(vs,{__name:"RoleTable",setup(l){return(t,a)=>(e(),o(u,null,[s("form",v,[s("div",b,[s("div",y,[s("div",w,[p(s("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=i=>t.search=i),class:"form-control",id:"search-roles"},null,512),[[m,t.search]]),C]),s("button",{type:"button",onClick:a[1]||(a[1]=i=>t.sortAndLoad("id")),class:"btn btn-outline-secondary rounded-0"},R)])])]),s("div",j,[t.items.length>0?(e(),o("table",I,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=i=>t.sortAndLoad("id"))},[d("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),o("span",L,P)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),o("span",S,O)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[3]||(a[3]=i=>t.sortAndLoad("name"))},[d("Название "),t.sort.direction==="desc"&&t.sort.column==="name"?(e(),o("span",V,T)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="name"?(e(),o("span",D,E)):n("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[4]||(a[4]=i=>t.sortAndLoad("slug"))},[d("Идентификатор "),t.sort.direction==="desc"&&t.sort.column==="slug"?(e(),o("span",G,U)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="slug"?(e(),o("span",q,H)):n("",!0)]),l.forSelect?n("",!0):(e(),o("th",{key:0,scope:"col",class:"text-center cursor-pointer",onClick:a[5]||(a[5]=i=>t.sortAndLoad("updated_at"))},[d(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),o("span",J,Q)):n("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),o("span",W,Y)):n("",!0)])),l.forSelect?n("",!0):(e(),o("th",Z,"Действие"))])]),s("tbody",null,[(e(!0),o(u,null,f(t.items,(i,h)=>(e(),o("tr",null,[s("th",x,r(i.id||h),1),s("td",{class:"text-center",onClick:c=>t.selectItem(i)},r(i.name||"-"),9,ss),s("td",{class:"text-center",onClick:c=>t.selectItem(i)},r(i.slug||"-"),9,ts),l.forSelect?n("",!0):(e(),o("td",es,r(i.updated_at||"-"),1)),l.forSelect?n("",!0):(e(),o("td",os,[s("div",ns,[is,s("ul",ls,[s("li",null,[s("a",{class:"dropdown-item",onClick:c=>t.selectItem(i),href:"javascript:void(0)"},[ds,d("Редактировать")],8,as)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:c=>t.removeItem(i.id),href:"javascript:void(0)"},[cs,d("Удалить")],8,rs)])])])]))]))),256))])])):n("",!0)]),t.items.length===0?(e(),o("div",us,fs)):n("",!0),t.items.length>0?(e(),o("div",gs,[s("div",ks,[t.paginate_object?(e(),g(k,{key:0,onPagination_page:t.loadRoles,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):n("",!0)])])):n("",!0)],64))}});export{ws as _};
