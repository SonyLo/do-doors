import{_ as rt}from"./AuthenticatedLayout-BPpbX5QM.js";import"./CalcForm-CXcKAJzo.js";import{o as i,c,b as s,a as q,f as T,i as nt,e as u,t as g,v as W,F as M,r as P,g as Y,j as at,d as A,m as tt,q as R,y as ct,x as J,E as dt,B as ht,W as ut,w as F,I as pt,N as ft,u as et,Z as mt}from"./app-Bl0GmcH9.js";import{_ as bt}from"./MaterialTable-DFcjygTs.js";import{S as vt}from"./SizeControls-CwjPXCgl.js";import{P as gt}from"./Pagination-kz-VNui7.js";import"./ApplicationLogo-DH-4qB8J.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-the-mask-DPckK8In.js";import"./RalColorSelector-BeuITLoZ.js";const _t={class:"row"},yt={class:"col-md-6 col-12"},wt={class:"row"},$t={class:"col-12 col-md-6"},kt={class:"form-floating mb-3"},Mt=s("option",{value:"sizes"},"Размеры",-1),St=s("option",{value:"loops"},"Петли",-1),Yt=s("option",{value:"colors"},"Цвета",-1),Lt=s("option",{value:"depth"},"Толщина",-1),Tt=[Mt,St,Yt,Lt],Xt=s("label",{for:"floatingSelect"},"Выбор типа",-1),Wt={key:0,class:"col-12 col-md-6"},Ct={class:"form-floating mb-3"},zt={type:"button",class:"btn btn-outline-secondary rounded-0 w-100 p-3 text-left"},Ht=s("i",{class:"fa-solid fa-scroll mr-2"},null,-1),Rt={key:1,class:"mb-2"},Et=s("i",{class:"fa-solid fa-xmark ml-1 text-danger"},null,-1),Pt=[Et],At={key:1,class:"col-12 col-md-6"},Dt=s("div",{class:"card rounded-0"},[s("div",{class:"card-body"},[s("p",{class:"text-secondary"},"Выбор материала не предусмотрен")])],-1),jt=[Dt],Bt={class:"row"},Ot={class:"col-12 col-md-6"},Ut={class:"form-floating mb-3"},It=s("label",{for:"size-width"},"Ширина, см",-1),Vt={class:"col-12 col-md-6"},Nt={class:"form-floating mb-3"},Ft=s("label",{for:"size-height"},"Высота, см",-1),Kt={class:"row"},qt={class:"col-12 col-md-6"},Jt={class:"form-floating mb-3"},Zt=s("label",{for:"size-price-wholesale"},"Цена опт, руб",-1),Gt={class:"col-12 col-md-6"},Qt={class:"form-floating mb-3"},xt=s("label",{for:"size-price-dealer"},"Цена дилеру, руб",-1),te={class:"col-12 col-md-6"},ee={class:"form-floating mb-3"},se=s("label",{for:"size-price-wholesale"},"Цена опт, руб",-1),oe={class:"col-12 col-md-6"},le={class:"form-floating mb-3"},ie=s("label",{for:"size-price-retail"},"Цена розница, руб",-1),re={class:"col-12 col-md-6"},ne={class:"form-floating mb-3"},ae=s("label",{for:"size-price-cost"},"Себестоимость, руб",-1),ce={class:"col-12 col-md-6"},de={class:"form-floating mb-3"},he=s("label",{for:"size-price-koef"},"Ценовой коэффициент",-1),ue={class:"col-12 col-md-6"},pe={key:0,class:"form-floating mb-3"},fe=s("label",{for:"size-loops-count"},"Число петель",-1),me={key:1,class:"form-floating mb-3"},be=s("label",{for:"size-loops-count"},"Толщина",-1),ve={key:2,class:"form-floating mb-3"},ge=s("label",{for:"size-loops-count"},"Цвет",-1),_e={class:"row mt-2"},ye={class:"col-12"},we={class:"alert alert-danger alert-dismissible fade show",role:"alert"},$e=s("strong",null,"Внимание!",-1),ke=["onClick"],Me={class:"row mt-5"},Se={class:"col-12 d-flex justify-content-center"},Ye=["disabled"],Le={key:0,class:"fa-regular fa-floppy-disk mr-1"},Te={key:1,class:"spinner-border spinner-border-sm text-success",role:"status"},Xe=s("i",{class:"fa-solid fa-xmark mr-1"},null,-1),We={class:"modal fade",id:"select-material-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ce={class:"modal-dialog modal-md"},ze={class:"modal-content rounded-0"},He={class:"modal-body"},Re=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-0","data-bs-dismiss":"modal"},"Закрыть ")],-1),Ee={props:["item"],data(){return{tab:0,materialModal:null,messages:[],loading:!1,loadingMaterial:!1,selectedMaterial:null,form:{id:null,width:0,height:0,material_id:null,price:{wholesale:0,dealer:0,retail:0,cost:0},price_koef:0,value:null,type:"sizes"}}},watch:{"form.type":{handler(e){this.form.value=null,this.form.material_id=null,this.selectedMaterial=null},deep:!0}},computed:{needClearForm(){return this.form.id||this.form.width||this.form.height||this.form.size_id||this.form.price||this.form.price_koef||this.form.loops_count}},mounted(){this.materialModal=new bootstrap.Modal(document.getElementById("select-material-modal"),{}),this.item&&this.$nextTick(()=>{this.form={id:this.item.id||null,width:this.item.width||null,height:this.item.height||null,size_id:this.item.size_id||null,price:this.item.price||{wholesale:0,dealer:0,retail:0,cost:0},price_koef:this.item.price_koef||null,loops_count:this.item.loops_count||null,material_id:this.item.material_id||null},this.selectedMaterial=this.item.material||null})},methods:{removeSelectedMaterial(){this.selectedMaterial=null,this.form.material_id=null},openMaterialModal(){this.materialModal.show()},selectMaterial(e){this.selectedMaterial=e,this.form.material_id=e.id,this.loadingMaterial=!0,this.$nextTick(()=>{this.loadingMaterial=!1}),this.materialModal.hide()},alert(e){this.messages.push(e)},resetForm(){this.form={id:this.item.id||null,width:this.item.width||null,height:this.item.height||null,size_id:this.item.size_id||null,price:this.item.price||{wholesale:0,dealer:0,retail:0,cost:0},price_koef:this.item.price_koef||null,loops_count:this.item.loops_count||null},this.$emit("callback")},removeMessage(e){this.messages.splice(e,1)},submit(){let e=new FormData;Object.keys(this.form).forEach(t=>{const o=this.form[t]||"";typeof o=="object"?e.append(t,JSON.stringify(o)):e.append(t,o)}),this.$store.dispatch("storeSize",{sizeForm:e}).then(t=>{this.resetForm(),this.$emit("callback")}).catch(t=>{t.response?this.alert(t.response.data.message):this.alert("Ошибка")})}}},Pe=Object.assign(Ee,{__name:"SizeForm",setup(e){return(t,o)=>(i(),c(M,null,[s("div",_t,[s("div",yt,[q(vt)])]),s("form",{action:"",onSubmit:o[16]||(o[16]=at((...l)=>t.submit&&t.submit(...l),["prevent"]))},[s("div",wt,[s("div",$t,[s("div",kt,[T(s("select",{class:"form-select rounded-0",id:"floatingSelect","onUpdate:modelValue":o[0]||(o[0]=l=>t.form.type=l),"aria-label":"Floating label select example"},Tt,512),[[nt,t.form.type]]),Xt])]),t.form.type==="sizes"||t.form.type==="loops"?(i(),c("div",Wt,[s("div",Ct,[s("button",zt,[Ht,t.selectedMaterial?u("",!0):(i(),c("span",{key:0,onClick:o[1]||(o[1]=(...l)=>t.openMaterialModal&&t.openMaterialModal(...l))}," Выберите материал")),t.selectedMaterial?(i(),c("span",Rt,[s("strong",{onClick:o[2]||(o[2]=(...l)=>t.openMaterialModal&&t.openMaterialModal(...l))},g(t.selectedMaterial.title||"-"),1),s("a",{href:"javascript:void(0)",onClick:o[3]||(o[3]=(...l)=>t.removeSelectedMaterial&&t.removeSelectedMaterial(...l))},Pt)])):u("",!0)])])])):(i(),c("div",At,jt))]),s("div",Bt,[s("div",Ot,[s("div",Ut,[T(s("input",{type:"number","onUpdate:modelValue":o[4]||(o[4]=l=>t.form.width=l),class:"form-control",id:"size-width",required:""},null,512),[[W,t.form.width]]),It])]),s("div",Vt,[s("div",Nt,[T(s("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=l=>t.form.height=l),class:"form-control",id:"size-height",required:""},null,512),[[W,t.form.height]]),Ft])])]),s("div",Kt,[s("div",qt,[s("div",Jt,[T(s("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=l=>t.form.price.wholesale=l),class:"form-control",id:"size-price-wholesale",required:""},null,512),[[W,t.form.price.wholesale]]),Zt])]),s("div",Gt,[s("div",Qt,[T(s("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=l=>t.form.price.dealer=l),class:"form-control",id:"size-price-dealer",required:""},null,512),[[W,t.form.price.dealer]]),xt])]),s("div",te,[s("div",ee,[T(s("input",{type:"number","onUpdate:modelValue":o[8]||(o[8]=l=>t.form.price.wholesale=l),class:"form-control",id:"size-price-wholesale",required:""},null,512),[[W,t.form.price.wholesale]]),se])]),s("div",oe,[s("div",le,[T(s("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=l=>t.form.price.retail=l),class:"form-control",id:"size-price-retail",required:""},null,512),[[W,t.form.price.retail]]),ie])]),s("div",re,[s("div",ne,[T(s("input",{type:"number","onUpdate:modelValue":o[10]||(o[10]=l=>t.form.price.cost=l),class:"form-control",id:"size-price-cost",required:""},null,512),[[W,t.form.price.cost]]),ae])]),s("div",ce,[s("div",de,[T(s("input",{type:"number","onUpdate:modelValue":o[11]||(o[11]=l=>t.form.price_koef=l),step:"0.1",class:"form-control",id:"size-price-koef",required:""},null,512),[[W,t.form.price_koef]]),he])]),s("div",ue,[t.form.type==="loops"?(i(),c("div",pe,[T(s("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),fe])):u("",!0),t.form.type==="depth"?(i(),c("div",me,[T(s("input",{type:"number","onUpdate:modelValue":o[13]||(o[13]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),be])):u("",!0),t.form.type==="colors"?(i(),c("div",ve,[T(s("input",{type:"text","onUpdate:modelValue":o[14]||(o[14]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),ge])):u("",!0)])]),s("div",_e,[s("div",ye,[t.messages.length>0?(i(!0),c(M,{key:0},P(t.messages,(l,n)=>(i(),c("div",we,[$e,Y(" "+g(l||"Ошибка")+" ",1),s("button",{type:"button",class:"btn-close",onClick:d=>t.removeMessage(n)},null,8,ke)]))),256)):u("",!0)])]),s("div",Me,[s("div",Se,[s("button",{disabled:!t.needClearForm||t.form.material_id==null,class:"btn btn-dark rounded-0"},[t.loading?(i(),c("span",Te)):(i(),c("i",Le)),Y(" Сохранить размер ")],8,Ye),t.needClearForm&&!t.loading?(i(),c("button",{key:0,type:"button",onClick:o[15]||(o[15]=(...l)=>t.resetForm&&t.resetForm(...l)),class:"btn btn-outline-secondary rounded-0 ml-2"},[Xe,Y(" Очистить форму ")])):u("",!0)])])],32),s("div",We,[s("div",Ce,[s("div",ze,[s("div",He,[t.loadingMaterial?u("",!0):(i(),A(bt,{key:0,simple:!0,onSelect:t.selectMaterial},null,8,["onSelect"]))]),Re])])])],64))}});({...tt(["getMaterialsPaginateObject","getMaterials"])});const Ae={class:"row"},De={class:"col-12"},je={class:"input-group mb-3"},Be={class:"form-floating"},Oe=s("label",{for:"search-sizes"},"Поиск",-1),Ue=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),Ie=[Ue],Ve={class:"row"},Ne={class:"col-12"},Fe=s("h4",null,"Выбор типа данных",-1),Ke={class:"d-flex py-2"},qe={class:"d-flex scrollable-area"},Je={key:0,class:"table table-responsive"},Ze={key:0},Ge=s("i",{class:"fa-solid fa-caret-down"},null,-1),Qe=[Ge],xe={key:1},ts=s("i",{class:"fa-solid fa-caret-up"},null,-1),es=[ts],ss={key:0},os=s("i",{class:"fa-solid fa-caret-down"},null,-1),ls=[os],is={key:1},rs=s("i",{class:"fa-solid fa-caret-up"},null,-1),ns=[rs],as={key:0},cs=s("i",{class:"fa-solid fa-caret-down"},null,-1),ds=[cs],hs={key:1},us=s("i",{class:"fa-solid fa-caret-up"},null,-1),ps=[us],fs={key:0},ms=s("i",{class:"fa-solid fa-caret-down"},null,-1),bs=[ms],vs={key:1},gs=s("i",{class:"fa-solid fa-caret-up"},null,-1),_s=[gs],ys={key:0},ws=s("i",{class:"fa-solid fa-caret-down"},null,-1),$s=[ws],ks={key:1},Ms=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ss=[Ms],Ys={key:0},Ls=s("i",{class:"fa-solid fa-caret-down"},null,-1),Ts=[Ls],Xs={key:1},Ws=s("i",{class:"fa-solid fa-caret-up"},null,-1),Cs=[Ws],zs={key:0},Hs=s("i",{class:"fa-solid fa-caret-down"},null,-1),Rs=[Hs],Es={key:1},Ps=s("i",{class:"fa-solid fa-caret-up"},null,-1),As=[Ps],Ds={key:0},js=s("i",{class:"fa-solid fa-caret-down"},null,-1),Bs=[js],Os={key:1},Us=s("i",{class:"fa-solid fa-caret-up"},null,-1),Is=[Us],Vs={key:0},Ns=s("i",{class:"fa-solid fa-caret-down"},null,-1),Fs=[Ns],Ks={key:1},qs=s("i",{class:"fa-solid fa-caret-up"},null,-1),Js=[qs],Zs=s("th",{scope:"col",class:"text-center"},"Действие",-1),Gs={scope:"row"},Qs=["onClick"],xs=["onClick"],to={class:"text-center"},eo=s("thead",null,[s("th",null,"опт"),s("th",null,"дилер"),s("th",null,"розница"),s("th",null,"себестоимость")],-1),so={style:{"min-width":"100px","text-align":"center"}},oo={style:{"min-width":"100px","text-align":"center"}},lo={style:{"min-width":"100px","text-align":"center"}},io={style:{"min-width":"100px","text-align":"center"}},ro={class:"text-center"},no=["onClick"],ao=["onBlur","onChange","onUpdate:modelValue"],co={class:"text-center"},ho={key:0},uo={key:1},po={key:2},fo={key:3},mo={class:"text-center"},bo={class:"text-center"},vo={key:0},go={key:1},_o={class:"text-center"},yo={class:"text-center"},wo={class:"dropdown"},$o=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),ko={class:"dropdown-menu"},Mo=["onClick"],So=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),Yo=["onClick"],Lo=s("i",{class:"fa-solid fa-bolt mr-2"},null,-1),To=["onClick"],Xo=s("i",{class:"fa-regular fa-copy mr-2"},null,-1),Wo=["onClick"],Co=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),zo={key:0,class:"alert alert-success my-3",role:"alert"},Ho=s("h4",{class:"alert-heading"},"Размеры",-1),Ro=s("p",null,"К сожалению, раздел размеров пуст. Вы еще не добавили ни одного размера, который можно отобразить на этой странице.",-1),Eo=s("hr",null,null,-1),Po=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый размер",-1),Ao=[Ho,Ro,Eo,Po],Do={key:1,class:"row mb-3"},jo={class:"col-12"},Bo={data(){return{sort:{column:null,direction:"desc",type:"sizes"},search:null,current_page:0,paginate_object:null,items:[]}},computed:{...tt(["getSizesPaginateObject","getSizes"])},watch:{"sort.type":{handler:function(e){this.loadSizes()},deep:!0}},mounted(){this.loadSizes(),window.addEventListener("load-sizes",()=>{this.loadSizes()})},methods:{saveFormattedSizes(){this.$store.dispatch("loadFormattedSizeTable").then(e=>{this.confirmModal.hide(),this.loadSizes(),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})}).catch(()=>{this.$notify({title:"DoDoors",text:"Ошибка обновления данных",type:"error"})})},sortAndLoad(e){this.sort.column=e,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadSizes(this.current_page)},loadSizes(e=0){this.current_page=e,this.$store.dispatch("loadSizes",{dataObject:{search:this.search,order:this.sort.column,type:this.sort.type,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getSizes,this.paginate_object=this.getSizesPaginateObject}).catch(()=>{this.loading=!1})},selectItem(e){this.$emit("select",e)},duplicateItem(e){this.$store.dispatch("duplicateSize",{sizeId:e}).then(()=>{this.sortAndLoad("id")})},removeItem(e){this.$store.dispatch("removeSize",{sizeId:e}).then(()=>{this.sortAndLoad("id")})},blurParams(e,t){this.items[t].need_edit_wholesale_price=!1,this.items[t].need_edit_dealer_price=!1,this.items[t].need_edit_retail_price=!1,this.items[t].need_edit_cost_price=!1,this.items[t].need_edit_koef=!1},saveParam(e,t){this.$store.dispatch("updateSizeParam",{dataObject:{id:this.items[t].id,key:e,value:this.items[t][e]}}).then(o=>{this.items[t].need_edit_wholesale_price=!1,this.items[t].need_edit_dealer_price=!1,this.items[t].need_edit_retail_price=!1,this.items[t].need_edit_cost_price=!1,this.items[t].need_edit_koef=!1,this.$notify({title:"DoDoors",text:"Параметры успешно обновлены"})}).catch(()=>{})}}},Oo=Object.assign(Bo,{__name:"SizeTable",setup(e){return(t,o)=>(i(),c(M,null,[s("form",Ae,[s("div",De,[s("div",je,[s("div",Be,[T(s("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=l=>t.search=l),class:"form-control",id:"search-sizes"},null,512),[[W,t.search]]),Oe]),s("button",{onClick:o[1]||(o[1]=l=>t.sortAndLoad("id")),type:"button",class:"btn btn-outline-secondary rounded-0"},Ie)])])]),s("div",Ve,[s("div",Ne,[Fe,s("div",Ke,[s("button",{class:R([{"btn-dark text-white":t.sort.type===null},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[2]||(o[2]=l=>t.sort.type=null)},"Всё ",2),s("button",{class:R([{"btn-dark text-white":t.sort.type==="sizes"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[3]||(o[3]=l=>t.sort.type="sizes")},"Размеры ",2),s("button",{class:R([{"btn-dark text-white":t.sort.type==="loops"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[4]||(o[4]=l=>t.sort.type="loops")},"Петли ",2),s("button",{class:R([{"btn-dark text-white":t.sort.type==="colors"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[5]||(o[5]=l=>t.sort.type="colors")},"Цвет ",2),s("button",{class:R([{"btn-dark text-white":t.sort.type==="depth"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[6]||(o[6]=l=>t.sort.type="depth")},"Толщина ",2)])])]),s("div",qe,[t.items.length>0?(i(),c("table",Je,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=l=>t.sortAndLoad("id"))},[Y("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(i(),c("span",Ze,Qe)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(i(),c("span",xe,es)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[8]||(o[8]=l=>t.sortAndLoad("width"))},[Y("Ширина, см "),t.sort.direction==="desc"&&t.sort.column==="width"?(i(),c("span",ss,ls)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="width"?(i(),c("span",is,ns)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[9]||(o[9]=l=>t.sortAndLoad("height"))},[Y("Высота, см "),t.sort.direction==="desc"&&t.sort.column==="height"?(i(),c("span",as,ds)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="height"?(i(),c("span",hs,ps)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[10]||(o[10]=l=>t.sortAndLoad("price"))},[Y("Цена, руб "),t.sort.direction==="desc"&&t.sort.column==="price"?(i(),c("span",fs,bs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="price"?(i(),c("span",vs,_s)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[11]||(o[11]=l=>t.sortAndLoad("price_koef"))},[Y("Ценовой коэффициент "),t.sort.direction==="desc"&&t.sort.column==="price_koef"?(i(),c("span",ys,$s)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="price_koef"?(i(),c("span",ks,Ss)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[12]||(o[12]=l=>t.sortAndLoad("type"))},[Y("Тип данных "),t.sort.direction==="desc"&&t.sort.column==="type"?(i(),c("span",Ys,Ts)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="type"?(i(),c("span",Xs,Cs)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[13]||(o[13]=l=>t.sortAndLoad("value"))},[Y("Значение параметра "),t.sort.direction==="desc"&&t.sort.column==="value"?(i(),c("span",zs,Rs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="value"?(i(),c("span",Es,As)):u("",!0)]),s("th",{scope:"col",class:"text-center",onClick:o[14]||(o[14]=l=>t.sortAndLoad("material_id"))},[Y("Материал "),t.sort.direction==="desc"&&t.sort.column==="material_id"?(i(),c("span",Ds,Bs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="material_id"?(i(),c("span",Os,Is)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[15]||(o[15]=l=>t.sortAndLoad("updated_at"))},[Y(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(i(),c("span",Vs,Fs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(i(),c("span",Ks,Js)):u("",!0)]),Zs])]),s("tbody",null,[(i(!0),c(M,null,P(t.items,(l,n)=>(i(),c("tr",null,[s("th",Gs,g(l.id||n),1),s("td",{class:"text-center",onClick:d=>t.selectItem(l)},g(l.width||0),9,Qs),s("td",{class:"text-center",onClick:d=>t.selectItem(l)},g(l.height||0),9,xs),s("td",to,[s("table",null,[eo,s("tbody",null,[s("tr",null,[s("td",so,g(t.items[n].price.wholesale||0),1),s("td",oo,g(t.items[n].price.dealer||0),1),s("td",lo,g(t.items[n].price.retail||0),1),s("td",io,g(t.items[n].price.cost||0),1)])])])]),s("td",ro,[t.items[n].need_edit_koef?u("",!0):(i(),c("p",{key:0,onClick:d=>t.items[n].need_edit_koef=!0},g(t.items[n].price_koef||0),9,no)),t.items[n].need_edit_koef?T((i(),c("input",{key:1,type:"number",step:"0.1",min:"0",onBlur:d=>t.blurParams("price_koef",n),onChange:d=>t.saveParam("price_koef",n),"onUpdate:modelValue":d=>t.items[n].price_koef=d,class:"form-control text-center",id:"floatingInput",placeholder:"name@example.com"},null,40,ao)),[[W,t.items[n].price_koef]]):u("",!0)]),s("td",co,[l.type==="sizes"?(i(),c("span",ho,"Размеры")):u("",!0),l.type==="loops"?(i(),c("span",uo,"Петли")):u("",!0),l.type==="colors"?(i(),c("span",po,"Цвета")):u("",!0),l.type==="depth"?(i(),c("span",fo,"Толщина")):u("",!0)]),s("td",mo,g(l.loops_count||0),1),s("td",bo,[l.material?(i(),c("p",vo,g(l.material.title||"-")+" (#"+g(l.material_id||"-")+") ",1)):(i(),c("p",go,"Материал не выбран"))]),s("td",_o,g(l.updated_at||"-"),1),s("td",yo,[s("div",wo,[$o,s("ul",ko,[s("li",null,[s("a",{class:"dropdown-item",onClick:d=>t.selectItem(l),href:"javascript:void(0)"},[So,Y("Редактировать")],8,Mo)]),s("li",null,[s("a",{class:"dropdown-item",onClick:d=>t.recountByKoef(l),href:"javascript:void(0)"},[Lo,Y("Пересчитать по коэффициенту")],8,Yo)]),s("li",null,[s("a",{class:"dropdown-item",onClick:d=>t.duplicateItem(l.id),href:"javascript:void(0)"},[Xo,Y("Дублировать")],8,To)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:d=>t.removeItem(l.id),href:"javascript:void(0)"},[Co,Y("Удалить")],8,Wo)])])])])]))),256))])])):u("",!0)]),t.items.length===0?(i(),c("div",zo,Ao)):u("",!0),t.items.length>0?(i(),c("div",Do,[s("div",jo,[t.paginate_object?(i(),A(gt,{key:0,onPagination_page:t.loadSizes,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])])):u("",!0)],64))}});/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function z(e){return getComputedStyle(e)}function X(e,t){for(var o in t){var l=t[o];typeof l=="number"&&(l=l+"px"),e.style[o]=l}return e}function V(e){var t=document.createElement("div");return t.className=e,t}var Z=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function E(e,t){if(!Z)throw new Error("No element matching method supported");return Z.call(e,t)}function B(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function G(e,t){return Array.prototype.filter.call(e.children,function(o){return E(o,t)})}var w={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},st={x:null,y:null};function ot(e,t){var o=e.element.classList,l=w.state.scrolling(t);o.contains(l)?clearTimeout(st[t]):o.add(l)}function lt(e,t){st[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(w.state.scrolling(t))},e.settings.scrollingThreshold)}function Uo(e,t){ot(e,t),lt(e,t)}var U=function(t){this.element=t,this.handlers={}},it={isEmpty:{configurable:!0}};U.prototype.bind=function(t,o){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(o),this.element.addEventListener(t,o,!1)};U.prototype.unbind=function(t,o){var l=this;this.handlers[t]=this.handlers[t].filter(function(n){return o&&n!==o?!0:(l.element.removeEventListener(t,n,!1),!1)})};U.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};it.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(U.prototype,it);var O=function(){this.eventElements=[]};O.prototype.eventElement=function(t){var o=this.eventElements.filter(function(l){return l.element===t})[0];return o||(o=new U(t),this.eventElements.push(o)),o};O.prototype.bind=function(t,o,l){this.eventElement(t).bind(o,l)};O.prototype.unbind=function(t,o,l){var n=this.eventElement(t);n.unbind(o,l),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)};O.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};O.prototype.once=function(t,o,l){var n=this.eventElement(t),d=function(r){n.unbind(o,d),l(r)};n.bind(o,d)};function N(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function K(e,t,o,l,n){l===void 0&&(l=!0),n===void 0&&(n=!1);var d;if(t==="top")d=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")d=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Io(e,o,d,l,n)}function Io(e,t,o,l,n){var d=o[0],r=o[1],h=o[2],a=o[3],p=o[4],m=o[5];l===void 0&&(l=!0),n===void 0&&(n=!1);var $=e.element;e.reach[a]=null,$[h]<1&&(e.reach[a]="start"),$[h]>e[d]-e[r]-1&&(e.reach[a]="end"),t&&($.dispatchEvent(N("ps-scroll-"+a)),t<0?$.dispatchEvent(N("ps-scroll-"+p)):t>0&&$.dispatchEvent(N("ps-scroll-"+m)),l&&Uo(e,a)),e.reach[a]&&(t||n)&&$.dispatchEvent(N("ps-"+a+"-reach-"+e.reach[a]))}function y(e){return parseInt(e,10)||0}function Vo(e){return E(e,"input,[contenteditable]")||E(e,"select,[contenteditable]")||E(e,"textarea,[contenteditable]")||E(e,"button,[contenteditable]")}function No(e){var t=z(e);return y(t.width)+y(t.paddingLeft)+y(t.paddingRight)+y(t.borderLeftWidth)+y(t.borderRightWidth)}var j={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function H(e){var t=e.element,o=Math.floor(t.scrollTop),l=t.getBoundingClientRect();e.containerWidth=Math.round(l.width),e.containerHeight=Math.round(l.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(G(t,w.element.rail("x")).forEach(function(n){return B(n)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(G(t,w.element.rail("y")).forEach(function(n){return B(n)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=Q(e,y(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=y((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=Q(e,y(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=y(o*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),Fo(t,e),e.scrollbarXActive?t.classList.add(w.state.active("x")):(t.classList.remove(w.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(w.state.active("y")):(t.classList.remove(w.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function Q(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function Fo(e,t){var o={width:t.railXWidth},l=Math.floor(e.scrollTop);t.isRtl?o.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:o.left=e.scrollLeft,t.isScrollbarXUsingBottom?o.bottom=t.scrollbarXBottom-l:o.top=t.scrollbarXTop+l,X(t.scrollbarXRail,o);var n={top:l,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?n.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:n.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:n.left=t.scrollbarYLeft+e.scrollLeft,X(t.scrollbarYRail,n),X(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),X(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function Ko(e){e.element,e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var o=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,l=o>e.scrollbarYTop?1:-1;e.element.scrollTop+=l*e.containerHeight,H(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var o=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,l=o>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=l*e.containerWidth,H(e),t.stopPropagation()})}function qo(e){x(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),x(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function x(e,t){var o=t[0],l=t[1],n=t[2],d=t[3],r=t[4],h=t[5],a=t[6],p=t[7],m=t[8],$=e.element,k=null,S=null,f=null;function _(b){b.touches&&b.touches[0]&&(b[n]=b.touches[0].pageY),$[a]=k+f*(b[n]-S),ot(e,p),H(e),b.stopPropagation(),b.type.startsWith("touch")&&b.changedTouches.length>1&&b.preventDefault()}function L(){lt(e,p),e[m].classList.remove(w.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",_)}function v(b,C){k=$[a],C&&b.touches&&(b[n]=b.touches[0].pageY),S=b[n],f=(e[l]-e[o])/(e[d]-e[h]),C?e.event.bind(e.ownerDocument,"touchmove",_):(e.event.bind(e.ownerDocument,"mousemove",_),e.event.once(e.ownerDocument,"mouseup",L),b.preventDefault()),e[m].classList.add(w.state.clicking),b.stopPropagation()}e.event.bind(e[r],"mousedown",function(b){v(b)}),e.event.bind(e[r],"touchstart",function(b){v(b,!0)})}function Jo(e){var t=e.element,o=function(){return E(t,":hover")},l=function(){return E(e.scrollbarX,":focus")||E(e.scrollbarY,":focus")};function n(d,r){var h=Math.floor(t.scrollTop);if(d===0){if(!e.scrollbarYActive)return!1;if(h===0&&r>0||h>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(r===0){if(!e.scrollbarXActive)return!1;if(a===0&&d<0||a>=e.contentWidth-e.containerWidth&&d>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(d){if(!(d.isDefaultPrevented&&d.isDefaultPrevented()||d.defaultPrevented)&&!(!o()&&!l())){var r=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(r){if(r.tagName==="IFRAME")r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(Vo(r))return}var h=0,a=0;switch(d.which){case 37:d.metaKey?h=-e.contentWidth:d.altKey?h=-e.containerWidth:h=-30;break;case 38:d.metaKey?a=e.contentHeight:d.altKey?a=e.containerHeight:a=30;break;case 39:d.metaKey?h=e.contentWidth:d.altKey?h=e.containerWidth:h=30;break;case 40:d.metaKey?a=-e.contentHeight:d.altKey?a=-e.containerHeight:a=-30;break;case 32:d.shiftKey?a=e.containerHeight:a=-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&h!==0||e.settings.suppressScrollY&&a!==0||(t.scrollTop-=a,t.scrollLeft+=h,H(e),n(h,a)&&d.preventDefault())}})}function Zo(e){var t=e.element;function o(r,h){var a=Math.floor(t.scrollTop),p=t.scrollTop===0,m=a+t.offsetHeight===t.scrollHeight,$=t.scrollLeft===0,k=t.scrollLeft+t.offsetWidth===t.scrollWidth,S;return Math.abs(h)>Math.abs(r)?S=p||m:S=$||k,S?!e.settings.wheelPropagation:!0}function l(r){var h=r.deltaX,a=-1*r.deltaY;return(typeof h>"u"||typeof a>"u")&&(h=-1*r.wheelDeltaX/6,a=r.wheelDeltaY/6),r.deltaMode&&r.deltaMode===1&&(h*=10,a*=10),h!==h&&a!==a&&(h=0,a=r.wheelDelta),r.shiftKey?[-a,-h]:[h,a]}function n(r,h,a){if(!j.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(r))return!1;for(var p=r;p&&p!==t;){if(p.classList.contains(w.element.consuming))return!0;var m=z(p);if(a&&m.overflowY.match(/(scroll|auto)/)){var $=p.scrollHeight-p.clientHeight;if($>0&&(p.scrollTop>0&&a<0||p.scrollTop<$&&a>0))return!0}if(h&&m.overflowX.match(/(scroll|auto)/)){var k=p.scrollWidth-p.clientWidth;if(k>0&&(p.scrollLeft>0&&h<0||p.scrollLeft<k&&h>0))return!0}p=p.parentNode}return!1}function d(r){var h=l(r),a=h[0],p=h[1];if(!n(r.target,a,p)){var m=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(p?t.scrollTop-=p*e.settings.wheelSpeed:t.scrollTop+=a*e.settings.wheelSpeed,m=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(a?t.scrollLeft+=a*e.settings.wheelSpeed:t.scrollLeft-=p*e.settings.wheelSpeed,m=!0):(t.scrollTop-=p*e.settings.wheelSpeed,t.scrollLeft+=a*e.settings.wheelSpeed),H(e),m=m||o(a,p),m&&!r.ctrlKey&&(r.stopPropagation(),r.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",d):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",d)}function Go(e){if(!j.supportsTouch&&!j.supportsIePointer)return;var t=e.element;function o(f,_){var L=Math.floor(t.scrollTop),v=t.scrollLeft,b=Math.abs(f),C=Math.abs(_);if(C>b){if(_<0&&L===e.contentHeight-e.containerHeight||_>0&&L===0)return window.scrollY===0&&_>0&&j.isChrome}else if(b>C&&(f<0&&v===e.contentWidth-e.containerWidth||f>0&&v===0))return!0;return!0}function l(f,_){t.scrollTop-=_,t.scrollLeft-=f,H(e)}var n={},d=0,r={},h=null;function a(f){return f.targetTouches?f.targetTouches[0]:f}function p(f){return f.pointerType&&f.pointerType==="pen"&&f.buttons===0?!1:!!(f.targetTouches&&f.targetTouches.length===1||f.pointerType&&f.pointerType!=="mouse"&&f.pointerType!==f.MSPOINTER_TYPE_MOUSE)}function m(f){if(p(f)){var _=a(f);n.pageX=_.pageX,n.pageY=_.pageY,d=new Date().getTime(),h!==null&&clearInterval(h)}}function $(f,_,L){if(!t.contains(f))return!1;for(var v=f;v&&v!==t;){if(v.classList.contains(w.element.consuming))return!0;var b=z(v);if(L&&b.overflowY.match(/(scroll|auto)/)){var C=v.scrollHeight-v.clientHeight;if(C>0&&(v.scrollTop>0&&L<0||v.scrollTop<C&&L>0))return!0}if(_&&b.overflowX.match(/(scroll|auto)/)){var D=v.scrollWidth-v.clientWidth;if(D>0&&(v.scrollLeft>0&&_<0||v.scrollLeft<D&&_>0))return!0}v=v.parentNode}return!1}function k(f){if(p(f)){var _=a(f),L={pageX:_.pageX,pageY:_.pageY},v=L.pageX-n.pageX,b=L.pageY-n.pageY;if($(f.target,v,b))return;l(v,b),n=L;var C=new Date().getTime(),D=C-d;D>0&&(r.x=v/D,r.y=b/D,d=C),o(v,b)&&f.preventDefault()}}function S(){e.settings.swipeEasing&&(clearInterval(h),h=setInterval(function(){if(e.isInitialized){clearInterval(h);return}if(!r.x&&!r.y){clearInterval(h);return}if(Math.abs(r.x)<.01&&Math.abs(r.y)<.01){clearInterval(h);return}if(!e.element){clearInterval(h);return}l(r.x*30,r.y*30),r.x*=.8,r.y*=.8},10))}j.supportsTouch?(e.event.bind(t,"touchstart",m),e.event.bind(t,"touchmove",k),e.event.bind(t,"touchend",S)):j.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",m),e.event.bind(t,"pointermove",k),e.event.bind(t,"pointerup",S)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",m),e.event.bind(t,"MSPointerMove",k),e.event.bind(t,"MSPointerUp",S)))}var Qo=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},xo={"click-rail":Ko,"drag-thumb":qo,keyboard:Jo,wheel:Zo,touch:Go},I=function(t,o){var l=this;if(o===void 0&&(o={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(w.main),this.settings=Qo();for(var n in o)this.settings[n]=o[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var d=function(){return t.classList.add(w.state.focus)},r=function(){return t.classList.remove(w.state.focus)};this.isRtl=z(t).direction==="rtl",this.isRtl===!0&&t.classList.add(w.rtl),this.isNegativeScroll=function(){var p=t.scrollLeft,m=null;return t.scrollLeft=-1,m=t.scrollLeft<0,t.scrollLeft=p,m}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new O,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=V(w.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=V(w.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",d),this.event.bind(this.scrollbarX,"blur",r),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=z(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=y(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=y(h.borderLeftWidth)+y(h.borderRightWidth),X(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=y(h.marginLeft)+y(h.marginRight),X(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=V(w.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=V(w.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",d),this.event.bind(this.scrollbarY,"blur",r),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var a=z(this.scrollbarYRail);this.scrollbarYRight=parseInt(a.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=y(a.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?No(this.scrollbarY):null,this.railBorderYWidth=y(a.borderTopWidth)+y(a.borderBottomWidth),X(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=y(a.marginTop)+y(a.marginBottom),X(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(p){return xo[p](l)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(p){return l.onScroll(p)}),H(this)};I.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,X(this.scrollbarXRail,{display:"block"}),X(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=y(z(this.scrollbarXRail).marginLeft)+y(z(this.scrollbarXRail).marginRight),this.railYMarginHeight=y(z(this.scrollbarYRail).marginTop)+y(z(this.scrollbarYRail).marginBottom),X(this.scrollbarXRail,{display:"none"}),X(this.scrollbarYRail,{display:"none"}),H(this),K(this,"top",0,!1,!0),K(this,"left",0,!1,!0),X(this.scrollbarXRail,{display:""}),X(this.scrollbarYRail,{display:""}))};I.prototype.onScroll=function(t){this.isAlive&&(H(this),K(this,"top",this.element.scrollTop-this.lastScrollTop),K(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};I.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),B(this.scrollbarX),B(this.scrollbarY),B(this.scrollbarXRail),B(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};I.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const tl=ct({__name:"PerfectScrollbar",props:{tag:{default:"div"},options:{default:()=>({})}},emits:["scroll","ps-scroll-y","ps-scroll-x","ps-scroll-up","ps-scroll-down","ps-scroll-left","ps-scroll-right","ps-y-reach-start","ps-y-reach-end","ps-x-reach-start","ps-x-reach-end"],setup(e,{expose:t,emit:o}){const l=e,n=o,d=J(null),r=J(null);dt(()=>l.options,()=>{a(),h()},{deep:!0}),ht(()=>{d.value&&h()}),ut(()=>{a()});function h(){d.value&&(r.value=new I(d.value,l.options),$())}function a(){r.value&&($(!1),r.value.destroy(),r.value=null)}const p={scroll:m("scroll"),"ps-scroll-y":m("ps-scroll-y"),"ps-scroll-x":m("ps-scroll-x"),"ps-scroll-up":m("ps-scroll-up"),"ps-scroll-down":m("ps-scroll-down"),"ps-scroll-left":m("ps-scroll-left"),"ps-scroll-right":m("ps-scroll-right"),"ps-y-reach-start":m("ps-y-reach-start"),"ps-y-reach-end":m("ps-y-reach-end"),"ps-x-reach-start":m("ps-x-reach-start"),"ps-x-reach-end":m("ps-x-reach-end")};function m(k){return function(S){n(k,S)}}function $(k=!0){var S;(S=r.value)!=null&&S.element&&Object.entries(p).forEach(([f,_])=>{var L,v;k?(L=r.value)==null||L.element.addEventListener(f,_):(v=r.value)==null||v.element.removeEventListener(f,_)})}return t({ps:r}),(k,S)=>(i(),A(ft(k.tag),{ref_key:"scrollbar",ref:d,class:"ps"},{default:F(()=>[pt(k.$slots,"default")]),_:3},512))}}),el={class:"row"},sl={class:"col-12"},ol={class:"row"},ll={class:"col-12"},il=["onClick"],rl=s("td",{rowspan:"2",class:"table-side-column"},"Высота",-1),nl=s("td",{rowspan:"2",class:"table-side-column"},"Ширина",-1),al={key:0,colspan:"6",width:"200px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada"}},cl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Число петель",-1),dl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Опт",-1),hl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Дилер",-1),ul=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Розница",-1),pl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Себестоимость",-1),fl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada"}}," Коэффициент ",-1),ml={class:"table-side-column"},bl={class:"table-side-column"},vl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},gl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},_l={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},yl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},wl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},$l={width:"100px",style:{"text-align":"center",border:"1px solid #dadada"}},kl={key:1,class:"alert alert-success my-3",role:"alert"},Ml=s("h4",{class:"alert-heading"},"Выберите материалы",-1),Sl=s("p",null,"Для отображения таблицы выберите интересующие материалы",-1),Yl=[Ml,Sl],Ll={key:2,class:"alert alert-success my-3",role:"alert"},Tl=s("h4",{class:"alert-heading"},"Размеры",-1),Xl=s("p",null,"К сожалению, раздел размеров пуст. Вы еще не добавили ни одного размера, который можно отобразить на этой странице.",-1),Wl=s("hr",null,null,-1),Cl=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый размер",-1),zl=[Tl,Xl,Wl,Cl],Hl={data(){return{materials:[],prices:[],selectedMaterials:[],table:null}},mounted(){this.loadSizes()},methods:{switchData(e){this.prices=this.table[e]},toggleMaterialId(e){let t=this.selectedMaterials.findIndex(o=>o===e);t===-1?this.selectedMaterials.push(e):this.selectedMaterials.splice(t,1)},loadSizes(e=0){this.$store.dispatch("loadPreparedPrices").then(t=>{this.table=t,this.materials=t.materials,this.prices=t.loops,this.selectedMaterials=this.materials.map(o=>o.id)}).catch(()=>{})},saveParam(e,t,o){this.$store.dispatch("updateSizeParam",{dataObject:{id:this.prices[t].prices[o].id,key:e,value:this.prices[t].prices[o][e],height:this.prices[t].prices[o].height||null,width:this.prices[t].prices[o].width||null,material_id:this.prices[t].prices[o].material_id||null}}).then(l=>{this.prices[t].prices[o].id||(this.prices[t].prices[o].id=l.data.id),this.$notify({title:"DoDoors",text:"Параметры успешно обновлены"})}).catch(()=>{})}}},Rl=Object.assign(Hl,{__name:"SizeTable2",setup(e){return(t,o)=>(i(),c(M,null,[s("div",el,[s("div",sl,[s("button",{onClick:o[0]||(o[0]=l=>t.switchData("sizes"))},"Размеры"),s("button",{onClick:o[1]||(o[1]=l=>t.switchData("loops"))},"Петли"),s("button",{onClick:o[2]||(o[2]=l=>t.switchData("colors"))},"Цвет"),s("button",{onClick:o[3]||(o[3]=l=>t.switchData("variants"))},"Толщина")])]),s("div",ol,[s("div",ll,[(i(!0),c(M,null,P(t.materials,l=>(i(),c("span",{class:R(["badge mr-2 cursor-pointer",{"bg-primary":t.selectedMaterials.indexOf(l.id)!=-1,"bg-secondary":t.selectedMaterials.indexOf(l.id)==-1}]),onClick:n=>t.toggleMaterialId(l.id)},g(l.title),11,il))),256))])]),t.prices.length>0&&t.selectedMaterials.length>0?(i(),A(et(tl),{key:0,scrollTop:"",class:"py-2"},{default:F(()=>[s("table",null,[s("thead",null,[s("tr",null,[rl,nl,(i(!0),c(M,null,P(t.materials,l=>(i(),c(M,null,[t.selectedMaterials.indexOf(l.id)!=-1?(i(),c("td",al,g(l.title),1)):u("",!0)],64))),256))]),s("tr",null,[(i(!0),c(M,null,P(t.materials,l=>(i(),c(M,null,[t.selectedMaterials.indexOf(l.id)!=-1?(i(),c(M,{key:0},[cl,dl,hl,ul,pl,fl],64)):u("",!0)],64))),256))])]),s("tbody",null,[(i(!0),c(M,null,P(t.prices,(l,n)=>(i(),c("tr",null,[s("td",ml,[s("span",null,g(l.height),1)]),s("td",bl,[s("span",null,g(l.width),1)]),(i(!0),c(M,null,P(l.prices,(d,r)=>(i(),c(M,null,[t.selectedMaterials.indexOf(d.material_id)!=-1?(i(),c(M,{key:0},[s("td",vl,g(l.prices[r].value||0),1),s("td",gl,g(l.prices[r].price.wholesale),1),s("td",_l,g(l.prices[r].price.dealer),1),s("td",yl,g(l.prices[r].price.retail),1),s("td",wl,g(l.prices[r].price.cost),1),s("td",$l,g(l.prices[r].price_koef),1)],64)):u("",!0)],64))),256))]))),256))])])]),_:1})):u("",!0),t.selectedMaterials.length===0?(i(),c("div",kl,Yl)):u("",!0),t.prices.length===0?(i(),c("div",Ll,zl)):u("",!0)],64))}}),El=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Размеры",-1),Pl={class:"py-12"},Al={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Dl={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},jl={class:"p-6 text-gray-900"},Bl=s("hr",{class:"hr my-5"},null,-1),Ol={class:"d-flex justify-center my-2"},Ul={class:"nav nav-tabs"},Il={class:"nav-item"},Vl={class:"nav-item"},Nl={data(){return{tab:0,loading:!1,selectedSize:null}},methods:{selectSize(e){this.selectedSize=e,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackSizeForm(){this.loading=!0,this.selectedSize=null,this.$nextTick(()=>{this.loading=!1})}}},si=Object.assign(Nl,{__name:"SizesPage",setup(e){return(t,o)=>(i(),c(M,null,[q(et(mt),{title:"Размеры"}),q(rt,null,{header:F(()=>[El]),default:F(()=>[s("div",Pl,[s("div",Al,[s("div",Dl,[s("div",jl,[t.loading?u("",!0):(i(),A(Pe,{key:0,item:t.selectedSize,onCallback:t.callbackSizeForm},null,8,["item","onCallback"])),Bl,s("div",Ol,[s("ul",Ul,[s("li",Il,[s("a",{class:R(["nav-link",{active:t.tab===0}]),"aria-current":"page",onClick:o[0]||(o[0]=l=>t.tab=0),href:"javascript:void(0)"},"Таблица размеров",2)]),s("li",Vl,[s("a",{class:R(["nav-link",{active:t.tab===1}]),onClick:o[1]||(o[1]=l=>t.tab=1),href:"javascript:void(0)"},"Сводная таблица",2)])])]),t.tab===0?(i(),c(M,{key:1},[t.loading?u("",!0):(i(),A(Oo,{key:0,onSelect:t.selectSize},null,8,["onSelect"]))],64)):u("",!0),t.tab===1?(i(),A(Rl,{key:2})):u("",!0)])])])])]),_:1})],64))}});export{si as default};
