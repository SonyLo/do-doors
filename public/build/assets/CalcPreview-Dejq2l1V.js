import{m as D,k as C,o as e,c as d,b as o,t,n as p,e as l,i as a,F as u,r as y,p as V,f as b,d as v,j as H,v as M,s as z}from"./app-CVZ-3-e_.js";import{_ as j,a as B}from"./DoorItemEditor-B5IrXQQJ.js";const T={key:0,class:"row"},L={class:"col-md-6"},O={class:"row"},S={class:"col-md-6 col-12 mb-2"},F={class:"card rounded-0 border-black"},I={class:"card-body px-2 py-1"},N=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-signs-post"}),a(" Назначение двери")],-1),P={class:"col-md-6 col-12 mb-2"},W={class:"card rounded-0 border-black"},U={class:"card-body px-2 py-1"},q=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-ruler-vertical"}),a(" Высота, мм")],-1),R=["innerHTML"],G={class:"col-md-6 col-12 mb-2"},J={class:"card rounded-0 border-black"},A={class:"card-body px-2 py-1"},K=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-ruler-horizontal"}),a(" Ширина, мм ")],-1),Q=["innerHTML"],X={class:"col-md-6 col-12 mb-2"},Y={class:"card rounded-0 border-black"},Z={class:"card-body px-2 py-1"},x=o("label",{class:"font-size-10"},[o("i",{class:"fa-brands fa-openid"}),a(" Тип открытия двери и толщина ")],-1),oo={class:"col-md-6 col-12 mb-2"},so={class:"card rounded-0 border-black"},eo={class:"card-body px-2 py-1"},to=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-door-open"}),a(" Тип двери ")],-1),lo={class:"col-md-6 col-12 mb-2"},io={class:"card rounded-0 border-black"},ao={class:"card-body px-2 py-1"},no=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-industry"}),a(" Производитель петель ")],-1),ro={class:"col-md-6 col-12 mb-2"},co={class:"card rounded-0 border-black"},_o={class:"card-body px-2 py-1"},ho=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-angles-left"}),a(" Сторона петель ")],-1),po={class:"col-md-6 col-12 mb-2"},uo={class:"card rounded-0 border-black"},bo={class:"card-body px-2 py-1"},fo=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-paint-roller"}),a(" Отделка первой стороны ")],-1),yo={class:"col-md-6 col-12 mb-2"},vo={class:"card-body px-2 py-1"},mo=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет отделки первой стороны ")],-1),ko={key:1,class:"card rounded-0"},go=o("div",{class:"card-body p-3 disabled-element"},[o("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),wo=[go],$o={class:"col-md-6 col-12 mb-2"},zo={class:"card rounded-0 border-black"},Do={class:"card-body px-2 py-1"},Vo=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-paint-roller"}),a(" Отделка второй стороны ")],-1),Eo={class:"col-md-6 col-12 mb-2"},Co={class:"card-body px-2 py-1"},Ho=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет отделки второй стороны ")],-1),Mo={key:1,class:"card rounded-0"},jo=o("div",{class:"card-body p-3 disabled-element"},[o("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Bo=[jo],To={class:"col-md-6 col-12 mb-2"},Lo={class:"card-body px-2 py-1"},Oo=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет короба и каркаса ")],-1),So={class:"col-md-6 col-12 mb-2"},Fo={class:"card-body px-2 py-1"},Io=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет уплотнителя ")],-1),No={class:"col-md-6 col-12 mb-2"},Po={class:"card-body px-2 py-1"},Wo=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет фурнитуры ")],-1),Uo={key:0,class:"col-md-6 col-12 mb-2"},qo={class:"card-body px-2 py-1"},Ro=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-palette"}),a(" Цвет фурнитуры ")],-1),Go={class:"col-12 mb-2"},Jo={style:{"min-height":"100px"},class:"card rounded-0 border-black"},Ao={class:"card-body px-2 py-1"},Ko=o("label",{class:"font-size-10"},"Комментарий к двери ",-1),Qo={key:0,class:"row py-3"},Xo={class:"col-12 d-flex align-items-center"},Yo={key:0,class:"fw-bold"},Zo={key:1,class:"fw-bold"},xo={key:0,class:"col-md-6 col-12 mb-2"},os={class:"card rounded-0 border-black"},ss={class:"card-body px-2 py-1"},es=o("label",{class:"font-size-10"},"Отверстие под ручку ",-1),ds={key:1,class:"col-md-6 col-12 mb-2"},ts={class:"card rounded-0 border-black"},ls={class:"card-body px-2 py-1"},is=o("label",{class:"font-size-10"},"Вариант ручки ",-1),as={key:2,class:"col-12 mb-2"},ns={class:"card rounded-0 border-black"},rs={class:"card-body px-2 py-1"},cs=o("label",{class:"font-size-10"},"Вариант дополнительного сервиса ",-1),_s={key:3,class:"col-12"},hs={class:"row"},ps={class:"col-12"},us={class:"mb-2"},bs={class:"col-lg-3 col-md-3 col-12 mb-2"},fs=["onClick"],ys={class:"card-img-top",alt:"..."},vs={class:"card-body"},ms={key:0,class:"font-bold"},ks={key:1,class:"card-text"},gs={key:4,class:"col-12"},ws=o("div",{class:"alert alert-warning rounded-0",role:"alert"},[o("p",null,"Вариантов изображений ручки нет")],-1),$s=[ws],zs={class:"col-12 d-flex align-items-center"},Ds={key:0,class:"fw-bold"},Vs={key:1,class:"fw-bold"},Es={class:"col-12 d-flex align-items-center"},Cs={key:0,class:"fw-bold"},Hs={key:1,class:"fw-bold"},Ms={key:5,class:"col-12"},js={class:"card rounded-0 border-black"},Bs={class:"card-body px-2 py-1"},Ts=o("label",{class:"font-size-10"},"Вариант ",-1),Ls={class:"col-12 d-flex align-items-center"},Os={key:0,class:"fw-bold"},Ss={key:1,class:"fw-bold"},Fs={key:6,class:"col-12"},Is={class:"card rounded-0 border-black"},Ns={class:"card-body px-2 py-1"},Ps=o("label",{class:"font-size-10"},"Вариант ",-1),Ws={class:"col-12 d-flex align-items-center"},Us={key:0,class:"fw-bold"},qs={key:1,class:"fw-bold"},Rs={key:7,class:"col-12"},Gs={class:"card rounded-0 border-black"},Js={class:"card-body px-2 py-1"},As=o("label",{class:"font-size-10"},"Вариант ",-1),Ks={class:"col-12 d-flex align-items-center"},Qs={key:0,class:"fw-bold"},Xs={key:1,class:"fw-bold"},Ys={class:"col-12 d-flex align-items-center"},Zs={key:0,class:"fw-bold"},xs={key:1,class:"fw-bold"},oe={class:"col-12 d-flex align-items-center"},se={key:0,class:"fw-bold"},ee={key:1,class:"fw-bold"},de={class:"col-md-6"},te={class:"preview"},le={class:"card rounded-0 mt-3"},ie={class:"card-body"},ae=o("h6",null,"Характеристики",-1),ne={class:"text-muted font-bold"},re={class:"text-black mb-0"},ce={key:0,class:"mr-1"},_e={key:1,class:"mr-1"},he={key:2,class:"mr-1"},pe={key:3,class:"mr-1"},ue={key:4,class:"mr-1"},be={key:5,class:"mr-1"},fe={key:6,class:"mr-1"},ye={key:7,class:"mr-1"},ve={class:"row row-cols-md-2 mt-3"},me={class:"col mb-2"},ke={class:"card rounded-0 border-black"},ge={class:"card-body px-2 py-1"},we=o("label",{class:"font-size-10"},"Тип цены ",-1),$e={key:0,class:"col mb-2"},ze={class:"card rounded-0 border-black"},De={class:"card-body px-2 py-1"},Ve=o("label",{class:"font-size-10"},"Процент дилера ",-1),Ee={class:"col mb-2"},Ce={class:"card rounded-0 border-black"},He={class:"card-body px-2 py-1"},Me=o("label",{class:"font-size-10"},"Кол-во ",-1),je={class:"col mb-2"},Be={class:"card rounded-0 border-black"},Te={class:"card-body px-2 py-1"},Le=o("label",{class:"font-size-10"},"Цена ",-1),Oe={key:1,class:"col d-flex mb-2"},Se=o("i",{class:"fa-solid fa-floppy-disk"},null,-1),Fe={key:1,class:"card rounded-0 mt-3"},Ie={class:"card-body"},Ne={class:"table"},Pe=o("br",null,null,-1),We={key:0},Ue=o("br",null,null,-1),qe={key:1,class:"row"},Re=o("div",{class:"col-12"},[o("div",{class:"d-flex justify-content-center align-items-center flex-column",style:{"min-height":"500px"}},[o("h5",null,"Загружаем страничку...."),o("div",{class:"spinner-border my-3",role:"status"},[o("span",{class:"visually-hidden"},"Loading...")])])],-1),Ge=[Re],Je={name:"MyComponent",props:["modelValue","canEdit"],data(){return{loaded:!1,door:null,type_dictionary:{size:"Петли",handle_holes_type:"Отверстие под ручку",opening_type:"Тип открытия двери и толщина",box_and_frame_color:"Цвет короба и каркаса",door_type:"Тип двери",front_side_finish_color:"Цвет отделки внешней стороны",back_side_finish_color:"Цвет отделки внутренней стороны",seal_color:"Цвет уплотнителя",fittings_color:"Цвет фурнитуры",hinge_manufacturer:"Производитель петель",front_side_finish:"Отделка внешней стороны",back_side_finish:"Отделка внутренней стороны",base:"База (под покраску)",service_doorstep:"Работа с порогом",service_painting:"Покраска фурнитуры",service_door_closer:"Работа с доводчиком",service_handle:"Работа с ручками",service_stopper:"Работа со стопором"},tmp_prices:[],need_addition:!0,messages:[],filterHeight:null,filterWidth:null,selectedColorParam:null,loadedParams:!0,confirmModal:null,finishFrontVariantModal:null,finishBackVariantModal:null,colors:[],confirm:{title:null,message:null},color_sync_update:!1}},computed:{...D(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"])},watch:{door:{handler(r){this.$emit("update:modelValue",this.door)},deep:!0}},mounted(){this.door=this.modelValue},methods:{editVariant(){this.$emit("edit")},invertHex(r){if(!r)return"#000000";var s=r.replace(/#/,""),n=parseInt(s.substr(0,2),16),i=parseInt(s.substr(2,2),16),_=parseInt(s.substr(4,2),16),h=(.2126*n+.7152*i+.0722*_)/255;return h>.5?"#000000":"#ffffff"}}},Ae=Object.assign(Je,{setup(r){return(s,n)=>{var _,h,f,m,k,g,w,$;const i=C("lazy");return s.door?(e(),d("div",T,[o("div",L,[o("div",O,[o("div",S,[o("div",F,[o("div",I,[N,o("p",null,t(s.door.purpose||"Не указано"),1)])])]),o("div",P,[o("div",W,[o("div",U,[q,o("p",{innerHTML:s.door.height},null,8,R)])])]),o("div",G,[o("div",J,[o("div",A,[K,o("p",{innerHTML:s.door.width},null,8,Q)])])]),o("div",X,[o("div",Y,[o("div",Z,[x,o("p",null,t(s.door.opening_type.title||"-")+" (толщина "+t(s.door.opening_type.depth)+" мм)",1)])])]),o("div",oo,[o("div",so,[o("div",eo,[to,o("p",null,t(s.door.door_type.title||"-"),1)])])]),o("div",lo,[o("div",io,[o("div",ao,[no,o("p",null,t(s.door.hinge_manufacturer.title||"-"),1)])])]),o("div",ro,[o("div",co,[o("div",_o,[ho,o("p",null,t(((_=s.door.loops_variants)==null?void 0:_.title)||"-"),1)])])]),o("div",po,[o("div",uo,[o("div",bo,[fo,o("p",null,t(((h=s.door.front_side_finish)==null?void 0:h.title)||"-"),1)])])]),o("div",yo,[s.door.front_side_finish.title!=="Под покраску"?(e(),d("div",{key:0,style:p({"background-color":s.door.front_side_finish.code,color:s.invertHex(s.door.front_side_finish.code)}),class:"card rounded-0 border-black"},[o("div",vo,[mo,o("p",null,t(s.door.front_side_finish.title||"-"),1)])],4)):(e(),d("div",ko,wo))]),o("div",$o,[o("div",zo,[o("div",Do,[Vo,o("p",null,t(s.door.back_side_finish.title||"-"),1)])])]),o("div",Eo,[s.door.back_side_finish.title!=="Под покраску"?(e(),d("div",{key:0,style:p({"background-color":s.door.back_side_finish.code,color:s.invertHex(s.door.back_side_finish.code)}),class:"card rounded-0 border-black"},[o("div",Co,[Ho,o("p",null,t(s.door.back_side_finish.title||"-"),1)])],4)):(e(),d("div",Mo,Bo))]),o("div",To,[o("div",{style:p({"background-color":s.door.box_and_frame_color.code,color:s.invertHex(s.door.box_and_frame_color.code)}),class:"card rounded-0 border-black"},[o("div",Lo,[Oo,o("p",null,t(s.door.box_and_frame_color.title||"-"),1)])],4)]),o("div",So,[o("div",{style:p({"background-color":s.door.seal_color.code,color:s.invertHex(s.door.seal_color.code)}),class:"card rounded-0 border-black"},[o("div",Fo,[Io,o("p",null,t(s.door.seal_color.title||"-"),1)])],4)]),o("div",No,[o("div",{style:p({"background-color":s.door.fittings_color.code,color:s.invertHex(s.door.fittings_color.code)}),class:"card rounded-0 border-black"},[o("div",Po,[Wo,o("p",null,t(s.door.fittings_color.title||"-"),1)])],4)]),s.door.fittings_color.title!=null&&s.door.fittings_color.is_ral?(e(),d("div",Uo,[o("div",{style:p({"background-color":s.door.service_painting.code,color:s.invertHex(s.door.service_painting.code)}),class:"card rounded-0 border-black"},[o("div",qo,[Ro,o("p",null,t(s.door.service_painting.title||"-"),1)])],4)])):l("",!0),o("div",Go,[o("div",Jo,[o("div",Ao,[Ko,o("p",null,t(s.door.comment||"-"),1)])])])]),s.need_addition?(e(),d("div",Qo,[o("div",Xo,[o("p",null,[a(" Ручка: "),s.door.need_handle_holes?(e(),d("span",Yo,"нужна")):(e(),d("span",Zo,"не нужна"))])]),s.door.need_handle_holes?(e(),d("div",xo,[o("div",os,[o("div",ss,[es,o("p",null,t(((f=s.door.handle_holes_variants)==null?void 0:f.title)||"-"),1)])])])):l("",!0),s.door.need_handle_holes&&s.door.handle_holes.id!==3?(e(),d("div",ds,[o("div",ts,[o("div",ls,[is,o("p",null,t(s.door.handle_holes_type.title||"-"),1)])])])):l("",!0),s.door.need_handle_holes&&s.door.handle_holes.id!==3?(e(),d("div",as,[o("div",ns,[o("div",rs,[cs,o("p",null,t(((m=s.door.service_handle)==null?void 0:m.title)||"-"),1)])])])):l("",!0),(s.door.handle_holes_type.variants||[]).length>0&&s.door.need_handle_holes&&s.door.handle_holes.id!==3?(e(),d("div",_s,[o("div",hs,[o("div",ps,[o("p",us,[a("Цвет ручки "+t(s.door.handle_holes_type.color||"не указан")+" ",1),s.door.handle_holes_type.color?(e(),d("span",{key:0,class:"d-inline-block",style:p([{"background-color":s.door.handle_holes_type.color},{width:"50px",height:"10px"}])},null,4)):l("",!0)])]),(e(!0),d(u,null,y(s.door.handle_holes_type.variants,(c,E)=>(e(),d("div",bs,[o("div",{class:V(["card cursor-pointer",{"border-secondary shadow-lg":c.selected}]),onClick:Ud=>s.selectSideFinish("handle_holes_type","variants",E)},[b(o("img",ys,null,512),[[i,c.image]]),o("div",vs,[c.title?(e(),d("h6",ms,t(c.title||"не указано"),1)):l("",!0),c.description?(e(),d("p",ks,t(c.description||"не указано"),1)):l("",!0)])],10,fs)]))),256))])])):l("",!0),(s.door.handle_holes_type.variants||[]).length===0&&s.door.need_handle_holes?(e(),d("div",gs,$s)):l("",!0),o("div",zs,[o("p",null,[a(" Верхняя перемычка: "),s.door.need_upper_jumper?(e(),d("span",Ds,"нужна")):(e(),d("span",Vs,"не нужна"))])]),o("div",Es,[o("p",null,[a(" Автоматический порог: "),s.door.need_upper_jumper?(e(),d("span",Cs,"нужен")):(e(),d("span",Hs,"не нужен"))])]),s.door.need_automatic_doorstep?(e(),d("div",Ms,[o("div",js,[o("div",Bs,[Ts,o("p",null,t(((k=s.door.service_doorstep)==null?void 0:k.title)||"-"),1)])])])):l("",!0),o("div",Ls,[o("p",null,[a(" Скрытый стопор: "),s.door.need_hidden_stopper?(e(),d("span",Os,"нужен")):(e(),d("span",Ss,"не нужен"))])]),s.door.need_hidden_stopper?(e(),d("div",Fs,[o("div",Is,[o("div",Ns,[Ps,o("p",null,t(((g=s.door.service_stopper)==null?void 0:g.title)||"-"),1)])])])):l("",!0),o("div",Ws,[o("p",null,[a(" Скрытый доводчик: "),s.door.need_hidden_door_closer?(e(),d("span",Us,"нужен")):(e(),d("span",qs,"не нужен"))])]),s.door.need_hidden_door_closer?(e(),d("div",Rs,[o("div",Gs,[o("div",Js,[As,o("p",null,t(((w=s.door.service_door_closer)==null?void 0:w.title)||"-"),1)])])])):l("",!0),o("div",Ks,[o("p",null,[a(" Скрытый плинтус: "),s.door.need_hidden_skirting_board?(e(),d("span",Qs,"нужен")):(e(),d("span",Xs,"не нужен"))])]),o("div",Ys,[o("p",null,[a(" Установка двери: "),s.door.need_door_install?(e(),d("span",Zs,"нужна")):(e(),d("span",xs,"не нужна"))])]),o("div",oe,[o("p",null,[a(" Упаковка двери: "),s.door.need_wrapper?(e(),d("span",se,"нужна")):(e(),d("span",ee,"не нужна"))])])])):l("",!0)]),o("div",de,[o("div",te,[s.loadedParams?(e(),v(j,{key:0,disabled:!0,modelValue:s.door,"onUpdate:modelValue":n[0]||(n[0]=c=>s.door=c)},null,8,["modelValue"])):l("",!0),o("div",le,[o("div",ie,[ae,o("h6",ne,t(s.door.door_type.title)+" "+t(s.door.width)+"x"+t(s.door.height)+"x"+t((($=s.door.opening_type)==null?void 0:$.depth)||0),1),o("h6",re,[s.door.box_and_frame_color.title?(e(),d("span",ce,"("+t(s.door.box_and_frame_color.title)+"),",1)):l("",!0),s.door.front_side_finish.title?(e(),d("span",_e,"первая сторона "+t(s.door.front_side_finish.title)+", ",1)):l("",!0),s.door.back_side_finish.title?(e(),d("span",he,"/вторая сторона "+t(s.door.back_side_finish.title)+",",1)):l("",!0),s.door.loops.title?(e(),d("span",pe,"петли "+t(s.door.loops.title),1)):l("",!0),s.door.hinge_manufacturer.title?(e(),d("span",ue,t(s.door.hinge_manufacturer.title),1)):l("",!0),s.door.fittings_color.title?(e(),d("span",be,"("+t(s.door.fittings_color.title)+"),",1)):l("",!0),s.door.opening_type.title?(e(),d("span",fe,t(s.door.opening_type.title)+",",1)):l("",!0),s.door.handle_holes.title?(e(),d("span",ye,t(s.door.handle_holes.title),1)):l("",!0)]),o("div",ve,[o("div",me,[o("div",ke,[o("div",ge,[we,o("p",null,t(s.door.price_type.title||"-"),1)])])]),s.door.price_type.id===3?(e(),d("div",$e,[o("div",ze,[o("div",De,[Ve,o("p",null,t(s.door.dealer_percent||"0"),1)])])])):l("",!0),o("div",Ee,[o("div",Ce,[o("div",He,[Me,o("p",null,t(s.door.count||"0"),1)])])]),o("div",je,[o("div",Be,[o("div",Te,[Le,o("p",null,t(s.door.price)+" ₽",1)])])]),r.canEdit?(e(),d("div",Oe,[o("button",{onClick:n[1]||(n[1]=(...c)=>s.editVariant&&s.editVariant(...c)),type:"button",class:"btn btn-dark rounded-0 w-100"},[Se,a(" Редактировать ")])])):l("",!0)])])]),s.tmp_prices.length>0?(e(),d("div",Fe,[o("div",Ie,[o("table",Ne,[o("tbody",null,[(e(!0),d(u,null,y(s.tmp_prices,c=>(e(),d("tr",null,[o("td",null,[a(t(s.type_dictionary[c.type]||c.type)+" ",1),s.door[c.type]?(e(),d(u,{key:0},[Pe,s.door[c.type].description?(e(),d("small",We,"("+t(s.door[c.type].description)+")",1)):l("",!0)],64)):l("",!0)]),o("td",null,[a(t(c.price||0)+" руб. ",1),c.full_price?(e(),d(u,{key:0},[Ue,o("small",null,"("+t(c.full_price||0)+" руб.)",1)],64)):l("",!0)])]))),256))])])])])):l("",!0)])])])):(e(),d("div",qe,Ge))}}}),Ke={class:"row"},Qe={class:"col-12 mb-2 d-flex align-items-center"},Xe={class:"fw-bold"},Ye=o("button",{class:"btn btn-dark rounded-0 ml-2",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},[o("i",{class:"fa-solid fa-arrow-up-right-from-square"}),a(" Список дверей в заказе ")],-1),Ze=["href"],xe=o("i",{class:"fa-solid fa-up-right-from-square"},null,-1),od=[xe],sd={key:0,class:"row"},ed={class:"col-lg-12"},dd={key:1,class:"row"},td={class:"col-lg-12"},ld={class:"offcanvas offcanvas-end","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},id=o("div",{class:"offcanvas-header"},[o("h5",{class:"offcanvas-title fw-bold",id:"offcanvasWithBothOptionsLabel"},"Двери в заказе"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),ad={class:"offcanvas-body"},nd=["onClick"],rd={class:"card-body"},cd={class:"text-muted font-bold"},_d={class:"text-black mb-0"},hd={key:0},pd={key:1,class:"ml-1"},ud={key:2,class:"ml-1"},bd={key:3},fd={key:4,class:"ml-1"},yd={key:5,class:"ml-1"},vd={key:6,class:"ml-1"},md={key:7,class:"ml-1"},kd={key:8,class:"ml-1"},gd={key:9,class:"ml-1"},wd={key:10,class:"ml-1"},$d={key:11,class:"ml-1"},zd={key:12,class:"ml-1"},Dd={key:13,class:"ml-1"},Vd={key:14,class:"ml-1"},Ed={key:15,class:"ml-1"},Cd={key:16,class:"ml-1"},Hd={class:"form-floating mb-2"},Md=o("label",{for:"contractNumber"},"Номер договора",-1),jd={class:"row my-3"},Bd={class:"col-md-6"},Td={class:"form-check"},Ld=o("label",{class:"form-check-label",for:"work-with-nds"}," С НДС ",-1),Od={class:"col-md-6"},Sd={class:"form-check"},Fd=o("label",{class:"form-check-label",for:"work-without-nds"}," Без НДС ",-1),Id={key:0,class:"d-flex justify-content-center my-3"},Nd=o("div",{class:"spinner-border text-primary mx-2",role:"status"},[o("span",{class:"visually-hidden"},"Loading...")],-1),Pd=["disabled"],Wd={props:["doors","order","canEdit"],name:"MyComponent",data(){return{loading:!1,tab:0,timer:null,selected_index:0,formData:{contract_number:null,work_with_nds:null}}},computed:{...D(["getErrors"])},mounted(){this.formData.contract_number=this.order.contract_number||null},methods:{submit(){this.timer=0;let r=setInterval(()=>{this.timer++},1e3);this.formData.id=this.order.id;let s=new FormData;Object.keys(this.formData).forEach(n=>{const i=this.formData[n]||"";typeof i=="object"?s.append(n,JSON.stringify(i)):s.append(n,i)}),this.$store.dispatch("contractProcessing",{processingForm:s}).then(n=>{clearInterval(r),this.timer=null,this.$notify({title:"DoDoors",text:"Номер договора успешно установлен!",type:"success"})}).catch(n=>{clearInterval(r),this.timer=null,this.$notify({title:"DoDoors",text:"Ошибочка...",type:"error"})})},selectDoor(r){this.loading=!0,this.tab=0,this.selected_index=r,this.$nextTick(()=>{this.loading=!1})},onStartEdit(){this.tab=1}}},Gd=Object.assign(Wd,{setup(r){return(s,n)=>(e(),d(u,null,[o("div",Ke,[o("div",Qe,[o("p",null,[a("Информация о заказе: "),o("span",Xe,"№"+t(r.order.id),1)]),Ye,o("a",{href:"/link/"+r.order.id,target:"_blank",class:"btn btn-dark rounded-0 ml-2"},od,8,Ze)])]),s.tab===0?(e(),d("div",sd,[o("div",ed,[s.loading?l("",!0):(e(),v(Ae,{key:0,"can-edit":r.canEdit,onEdit:s.onStartEdit,modelValue:r.doors[s.selected_index].door,"onUpdate:modelValue":n[0]||(n[0]=i=>r.doors[s.selected_index].door=i)},null,8,["can-edit","onEdit","modelValue"]))])])):l("",!0),s.tab===1?(e(),d("div",dd,[o("div",td,[s.loading?l("",!0):(e(),v(B,{key:0,"edit-order":!0,door:r.doors[s.selected_index]},null,8,["door"]))])])):l("",!0),o("div",ld,[id,o("div",ad,[(e(!0),d(u,null,y(r.doors,(i,_)=>{var h;return e(),d("div",{onClick:f=>s.selectDoor(_),class:V([{"border-black":s.selected_index===_},"card btn btn-light text-left p-0 rounded-0 mb-2 cursor-pointer"])},[o("div",rd,[o("h6",cd,t(i.door.purpose||"-")+": "+t(i.door.door_type.title)+" "+t(i.door.width)+"x"+t(i.door.height)+"x "+t(((h=i.door.opening_type)==null?void 0:h.depth)||0),1),o("h6",_d,[i.door.box_and_frame_color.title?(e(),d("span",hd,"("+t(i.door.box_and_frame_color.title)+")",1)):l("",!0),a(" лицо "),i.door.front_side_finish.title?(e(),d("span",pd,t(i.door.front_side_finish.title),1)):l("",!0),a("/ "),i.door.back_side_finish.title?(e(),d("span",ud,t(i.door.back_side_finish.title)+",",1)):l("",!0),a(" петли "),i.door.loops.title?(e(),d("span",bd,t(i.door.loops.title)+",",1)):l("",!0),i.door.hinge_manufacturer.title?(e(),d("span",fd,t(i.door.hinge_manufacturer.title)+",",1)):l("",!0),i.door.fittings_color.title?(e(),d("span",yd,"("+t(i.door.fittings_color.title)+"),",1)):l("",!0),i.door.opening_type.title?(e(),d("span",vd,t(i.door.opening_type.title)+",",1)):l("",!0),i.door.handle_holes.title?(e(),d("span",md,t(i.door.handle_holes.title)+",",1)):l("",!0),i.door.need_automatic_doorstep?(e(),d("span",kd," автоматический порожек,")):l("",!0),i.door.need_upper_jumper?(e(),d("span",gd," верхняя перемычка,")):l("",!0),i.door.need_handle_holes?(e(),d("span",wd," дверная ручка,")):l("",!0),i.door.handle_holes_type.title?(e(),d("span",$d,t(i.door.handle_holes_type.title)+",",1)):l("",!0),i.door.handle_holes.title?(e(),d("span",zd,t(i.door.handle_holes.title)+",",1)):l("",!0),i.door.need_hidden_door_closer?(e(),d("span",Dd," скрытый доводчик,")):l("",!0),i.door.need_hidden_skirting_board?(e(),d("span",Vd," скрытый плинтус,")):l("",!0),i.door.need_hidden_stopper?(e(),d("span",Ed," скрытый стопор,")):l("",!0),i.door.need_door_install?(e(),d("span",Cd," установка двери")):l("",!0)])])],10,nd)}),256))]),r.canEdit?(e(),d("form",{key:0,onSubmit:n[4]||(n[4]=H((...i)=>s.submit&&s.submit(...i),["prevent"])),class:"offcanvas-footer p-3"},[o("div",Hd,[b(o("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=i=>s.formData.contract_number=i),class:"form-control",id:"contractNumber",required:"",placeholder:"Введите номер договора"},null,512),[[M,s.formData.contract_number]]),Md]),o("div",jd,[o("div",Bd,[o("div",Td,[b(o("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":n[2]||(n[2]=i=>s.formData.work_with_nds=i),name:"flexRadioDefault",id:"work-with-nds"},null,512),[[z,s.formData.work_with_nds]]),Ld])]),o("div",Od,[o("div",Sd,[b(o("input",{class:"form-check-input",type:"radio",value:"0",name:"flexRadioDefault","onUpdate:modelValue":n[3]||(n[3]=i=>s.formData.work_with_nds=i),id:"work-without-nds"},null,512),[[z,s.formData.work_with_nds]]),Fd])])]),s.timer?(e(),d("div",Id,[Nd,a(" Отправляем... ")])):l("",!0),o("button",{type:"submit",disabled:s.timer,class:"btn btn-dark p-3 w-100 rounded-0"},"Сформировать договор",8,Pd)],32)):l("",!0)])],64))}});export{Gd as _};
