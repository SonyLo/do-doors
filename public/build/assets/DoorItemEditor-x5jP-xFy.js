import{o as n,c as a,b as t,p as k,e as u,n as E,t as _,F as y,r as F,k as le,g,h as M,m as Z,f as b,C as oe,v as $,a as N,j as re,i as I,d as H,w as R}from"./app-CR8M4Iym.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as pe}from"./RalColorSelector-CemWbJoK.js";import{H as _e}from"./HandleDetail-ByZw1T0M.js";const fe={key:0,class:"row"},me={class:"col-12 mb-2"},ve={key:1,class:"row"},ge={class:"col-12 col-md-8"},ye={key:0,class:"upper-jumper d-flex justify-content-center align-items-center"},be=t("div",{class:"door-upper-jumper d-flex justify-content-center align-items-center"},[t("p",{class:"text-center",style:{"font-size":"12px"}},"1")],-1),Fe=[be],ke={style:{position:"relative","z-index":"5"}},we={class:"door-header"},$e={class:"door"},Ce=["src"],Ve={class:"height"},De={class:"width"},Se={class:"door-but"},ze={class:"height"},Ie={class:"depth"},Ue={class:"door-backstage"},Me={key:0,class:"skirting-board",style:{"font-size":"12px"}},je=t("p",null,"3",-1),He=[je],Ee=t("div",{class:"center"},null,-1),Re={key:1,class:"skirting-board",style:{"font-size":"12px"}},Le=t("p",null,"3",-1),Te=[Le],Pe={class:"door-footer"},Ae={key:0,class:"doorstep d-flex justify-content-center align-items-center",style:{"font-size":"12px"}},qe={class:"col-md-4 col-12"},Oe={class:"list-group list-group-numbered rounded-0 cursor-pointer"},Be=t("li",{class:"list-group-item bg-dark text-white"},"Петли",-1),Ne={props:["modelValue","disabled"],data(){return{side:0,door:null}},watch:{door:{handler(s){this.$emit("update:modelValue",this.door)},deep:!0}},mounted(){this.door=this.modelValue},computed:{sideColor(){return this.side===0?this.door.front_side_finish_color.code:this.door.back_side_finish_color.code},selectedSideFinishImageForDoor(){let s=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[s].door_variants)return null;let e=this.door[s].door_variants.findIndex(o=>o.selected);return e===-1?null:this.door[s].door_variants[e].image},selectedSideFinishImageForWrapper(){let s=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[s].wrapper_variants)return null;let e=this.door[s].wrapper_variants.findIndex(o=>o.selected);return e===-1?null:this.door[s].wrapper_variants[e].image}}},We=Object.assign(Ne,{__name:"DoorPreview",setup(s){return(e,o)=>{var i;return n(),a(y,null,[e.door?(n(),a("div",fe,[t("div",me,[t("button",{type:"button",class:k(["btn mr-2 rounded-0",{"btn-dark":e.side===0,"btn-outline-secondary":e.side!==0}]),onClick:o[0]||(o[0]=r=>e.side=0)}," Лицевая сторона ",2),t("button",{class:k(["btn rounded-0",{"btn-dark":e.side===1,"btn-outline-secondary":e.side!==1}]),type:"button",onClick:o[1]||(o[1]=r=>e.side=1)}," Внутренняя сторона ",2)])])):u("",!0),e.door?(n(),a("div",ve,[t("div",ge,[t("div",{class:"stage w-100",style:E({"background-image":"url("+e.selectedSideFinishImageForWrapper+")"})},[e.door.need_upper_jumper?(n(),a("div",ye,Fe)):u("",!0),t("div",ke,[t("div",we,[e.door.need_hidden_door_closer?(n(),a("div",{key:0,class:k(["door-closer d-flex justify-content-center align-items-center",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 5 ",2)):u("",!0)]),t("div",$e,[t("img",{src:e.doorImage?e.doorImage:"/images/door-1.jpg",class:"w-100 h-100",style:{"object-fit":"cover"},alt:""},null,8,Ce),t("div",{class:"door-color",style:E({"background-color":e.sideColor||"transparent"})},null,4),t("div",Ve,[t("span",null,_(e.door.height),1)]),t("div",De,[t("span",null,_(e.door.width),1)]),e.side===0?(n(),a(y,{key:0},[e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(n(),a("div",{key:0,class:k(["handle",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:E([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(../images/handle-left.png)":"url(../images/handle-right.png)"}])},"6 ",6)):u("",!0),e.door.loops.type?(n(),a("div",{key:1,class:k(["loops",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}])},[(n(!0),a(y,null,F(e.door.loops_count,r=>(n(),a("span",null,"7"))),256))],2)):u("",!0)],64)):u("",!0),e.side===1?(n(),a(y,{key:1},[e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(n(),a("div",{key:0,class:k(["handle",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:E([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(../images/handle-right.png)":"url(../images/handle-left.png)"}])},"6 ",6)):u("",!0),e.door.loops.type?(n(),a("div",{key:1,class:k(["loops",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}])},[(n(!0),a(y,null,F(e.door.loops_count,r=>(n(),a("span",null,"7"))),256))],2)):u("",!0)],64)):u("",!0)]),t("div",Se,[t("div",ze,[t("span",null,_(e.door.height),1)]),t("div",Ie,[t("span",null,_(((i=e.door.opening_type)==null?void 0:i.depth)||0),1)])])]),t("div",Ue,[e.door.need_hidden_skirting_board?(n(),a("div",Me,He)):u("",!0),Ee,e.door.need_hidden_skirting_board?(n(),a("div",Re,Te)):u("",!0)]),t("div",Pe,[e.door.need_automatic_doorstep?(n(),a("div",Ae," 2 ")):u("",!0),e.door.need_hidden_stopper?(n(),a("div",{key:1,class:k(["stopper d-flex justify-content-center align-items-center",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 4 ",2)):u("",!0)])],4)]),t("div",qe,[t("ul",Oe,[t("li",{onClick:o[2]||(o[2]=r=>s.disabled?null:e.door.need_upper_jumper=!e.door.need_upper_jumper),class:k([{"bg-dark text-white":e.door.need_upper_jumper},"list-group-item"])},"Верхняя перемычка ",2),t("li",{onClick:o[3]||(o[3]=r=>s.disabled?null:e.door.need_automatic_doorstep=!e.door.need_automatic_doorstep),class:k([{"bg-dark text-white":e.door.need_automatic_doorstep},"list-group-item"])},"Скрытый порог ",2),t("li",{onClick:o[4]||(o[4]=r=>s.disabled?null:e.door.need_hidden_skirting_board=!e.door.need_hidden_skirting_board),class:k([{"bg-dark text-white":e.door.need_hidden_skirting_board},"list-group-item"])},"Скрытый плинтус ",2),t("li",{onClick:o[5]||(o[5]=r=>s.disabled?null:e.door.need_hidden_stopper=!e.door.need_hidden_stopper),class:k([{"bg-dark text-white":e.door.need_hidden_stopper},"list-group-item"])},"Скрытый стопор ",2),t("li",{onClick:o[6]||(o[6]=r=>s.disabled?null:e.door.need_hidden_door_closer=!e.door.need_hidden_door_closer),class:k([{"bg-dark text-white":e.door.need_hidden_door_closer},"list-group-item"])},"Скрытый доводчик ",2),t("li",{onClick:o[7]||(o[7]=r=>s.disabled?null:e.door.need_handle_holes=!e.door.need_handle_holes),class:k([{"bg-dark text-white":e.door.need_handle_holes&&e.door.loops.type},"list-group-item"])},"Дверная ручка ",2),Be])])])):u("",!0)],64)}}}),Qe={props:["item"],data(){return{need_select_door_variant:!0,need_select_wrapper_variant:!0}},watch:{need_select_door_variant:{handler(s){this.need_select_door_variant||(this.item.door_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0},need_select_wrapper_variant:{handler(s){this.need_select_wrapper_variant||(this.item.wrapper_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0}},methods:{selectSideFinish(s,e){this.item[s][e].selected||!1||this.item[s].forEach(i=>{i.selected&&delete i.selected}),this.item[s][e].selected=!this.item[s][e].selected,this.$emit("update:item",this.item)}}},Ge={class:"font-bold my-2"},Je={class:"row"},Ke={class:"col-12"},Xe={class:"form-check form-switch"},Ye=t("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру дверей ",-1),Ze={key:0,class:"row mb-2"},xe=t("div",{class:"col-12"},[t("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов дверей")],-1),eo={class:"col-lg-4 col-md-4 col-12 mb-2"},oo=["onClick"],to={class:"card-img-top",alt:"..."},so={class:"card-body"},lo={key:0,class:"font-bold"},ro={key:1,class:"card-text"},io={class:"row"},no={class:"col-12"},ao={class:"form-check form-switch"},co=t("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру материала вокруг двери ",-1),ho={key:1,class:"row mb-2"},uo=t("div",{class:"col-12"},[t("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов текстуры материала вокруг дверей")],-1),po={class:"col-lg-4 col-md-4 col-12 mb-2"},_o=["onClick"],fo={class:"card-img-top",alt:"..."},mo={class:"card-body"},vo={key:0,class:"font-bold"},go={key:1,class:"card-text"};function yo(s,e,o,i,r,d){const c=le("lazy");return n(),a(y,null,[t("h3",Ge,'Выбранный материал "'+_(o.item.title||"не указан")+'"',1),t("div",Je,[t("div",Ke,[t("div",Xe,[g(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=p=>r.need_select_door_variant=p),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[M,r.need_select_door_variant]]),Ye])])]),o.item.door_variants&&r.need_select_door_variant?(n(),a("div",Ze,[xe,(n(!0),a(y,null,F(o.item.door_variants,(p,f)=>(n(),a("div",eo,[t("div",{class:k(["card cursor-pointer",{"border-secondary shadow-lg":p.selected}]),onClick:h=>d.selectSideFinish("door_variants",f)},[g(t("img",to,null,512),[[c,p.image]]),t("div",so,[p.title?(n(),a("h6",lo,_(p.title||"не указано"),1)):u("",!0),p.description?(n(),a("p",ro,_(p.description||"не указано"),1)):u("",!0)])],10,oo)]))),256))])):u("",!0),t("div",io,[t("div",no,[t("div",ao,[g(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=p=>r.need_select_wrapper_variant=p),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[M,r.need_select_wrapper_variant]]),co])])]),o.item.wrapper_variants&&r.need_select_wrapper_variant?(n(),a("div",ho,[uo,(n(!0),a(y,null,F(o.item.wrapper_variants,(p,f)=>(n(),a("div",po,[t("div",{class:k(["card cursor-pointer",{"border-secondary shadow-lg":p.selected}]),onClick:h=>d.selectSideFinish("wrapper_variants",f)},[g(t("img",fo,null,512),[[c,p.image]]),t("div",mo,[p.title?(n(),a("h6",vo,_(p.title||"не указано"),1)):u("",!0),p.description?(n(),a("p",go,_(p.description||"не указано"),1)):u("",!0)])],10,_o)]))),256))])):u("",!0)],64)}const te=ie(Qe,[["render",yo]]);var B,bo=new Uint8Array(16);function de(){if(!B&&(B=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(bo)}const Fo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ne(s){return typeof s=="string"&&Fo.test(s)}var w=[];for(var G=0;G<256;++G)w.push((G+256).toString(16).substr(1));function x(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(w[s[e+0]]+w[s[e+1]]+w[s[e+2]]+w[s[e+3]]+"-"+w[s[e+4]]+w[s[e+5]]+"-"+w[s[e+6]]+w[s[e+7]]+"-"+w[s[e+8]]+w[s[e+9]]+"-"+w[s[e+10]]+w[s[e+11]]+w[s[e+12]]+w[s[e+13]]+w[s[e+14]]+w[s[e+15]]).toLowerCase();if(!ne(o))throw TypeError("Stringified UUID is invalid");return o}var se,J,K=0,X=0;function ko(s,e,o){var i=e&&o||0,r=e||new Array(16);s=s||{};var d=s.node||se,c=s.clockseq!==void 0?s.clockseq:J;if(d==null||c==null){var p=s.random||(s.rng||de)();d==null&&(d=se=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),c==null&&(c=J=(p[6]<<8|p[7])&16383)}var f=s.msecs!==void 0?s.msecs:Date.now(),h=s.nsecs!==void 0?s.nsecs:X+1,m=f-K+(h-X)/1e4;if(m<0&&s.clockseq===void 0&&(c=c+1&16383),(m<0||f>K)&&s.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");K=f,X=h,J=c,f+=122192928e5;var l=((f&268435455)*1e4+h)%4294967296;r[i++]=l>>>24&255,r[i++]=l>>>16&255,r[i++]=l>>>8&255,r[i++]=l&255;var v=f/4294967296*1e4&268435455;r[i++]=v>>>8&255,r[i++]=v&255,r[i++]=v>>>24&15|16,r[i++]=v>>>16&255,r[i++]=c>>>8|128,r[i++]=c&255;for(var C=0;C<6;++C)r[i+C]=d[C];return e||x(r)}function wo(s){if(!ne(s))throw TypeError("Invalid UUID");var e,o=new Uint8Array(16);return o[0]=(e=parseInt(s.slice(0,8),16))>>>24,o[1]=e>>>16&255,o[2]=e>>>8&255,o[3]=e&255,o[4]=(e=parseInt(s.slice(9,13),16))>>>8,o[5]=e&255,o[6]=(e=parseInt(s.slice(14,18),16))>>>8,o[7]=e&255,o[8]=(e=parseInt(s.slice(19,23),16))>>>8,o[9]=e&255,o[10]=(e=parseInt(s.slice(24,36),16))/1099511627776&255,o[11]=e/4294967296&255,o[12]=e>>>24&255,o[13]=e>>>16&255,o[14]=e>>>8&255,o[15]=e&255,o}function $o(s){s=unescape(encodeURIComponent(s));for(var e=[],o=0;o<s.length;++o)e.push(s.charCodeAt(o));return e}var Co="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ae(s,e,o){function i(r,d,c,p){if(typeof r=="string"&&(r=$o(r)),typeof d=="string"&&(d=wo(d)),d.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+r.length);if(f.set(d),f.set(r,d.length),f=o(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,c){p=p||0;for(var h=0;h<16;++h)c[p+h]=f[h];return c}return x(f)}try{i.name=s}catch{}return i.DNS=Co,i.URL=Vo,i}function Do(s){if(typeof s=="string"){var e=unescape(encodeURIComponent(s));s=new Uint8Array(e.length);for(var o=0;o<e.length;++o)s[o]=e.charCodeAt(o)}return So(zo(Io(s),s.length*8))}function So(s){for(var e=[],o=s.length*32,i="0123456789abcdef",r=0;r<o;r+=8){var d=s[r>>5]>>>r%32&255,c=parseInt(i.charAt(d>>>4&15)+i.charAt(d&15),16);e.push(c)}return e}function ce(s){return(s+64>>>9<<4)+14+1}function zo(s,e){s[e>>5]|=128<<e%32,s[ce(e)-1]=e;for(var o=1732584193,i=-271733879,r=-1732584194,d=271733878,c=0;c<s.length;c+=16){var p=o,f=i,h=r,m=d;o=V(o,i,r,d,s[c],7,-680876936),d=V(d,o,i,r,s[c+1],12,-389564586),r=V(r,d,o,i,s[c+2],17,606105819),i=V(i,r,d,o,s[c+3],22,-1044525330),o=V(o,i,r,d,s[c+4],7,-176418897),d=V(d,o,i,r,s[c+5],12,1200080426),r=V(r,d,o,i,s[c+6],17,-1473231341),i=V(i,r,d,o,s[c+7],22,-45705983),o=V(o,i,r,d,s[c+8],7,1770035416),d=V(d,o,i,r,s[c+9],12,-1958414417),r=V(r,d,o,i,s[c+10],17,-42063),i=V(i,r,d,o,s[c+11],22,-1990404162),o=V(o,i,r,d,s[c+12],7,1804603682),d=V(d,o,i,r,s[c+13],12,-40341101),r=V(r,d,o,i,s[c+14],17,-1502002290),i=V(i,r,d,o,s[c+15],22,1236535329),o=D(o,i,r,d,s[c+1],5,-165796510),d=D(d,o,i,r,s[c+6],9,-1069501632),r=D(r,d,o,i,s[c+11],14,643717713),i=D(i,r,d,o,s[c],20,-373897302),o=D(o,i,r,d,s[c+5],5,-701558691),d=D(d,o,i,r,s[c+10],9,38016083),r=D(r,d,o,i,s[c+15],14,-660478335),i=D(i,r,d,o,s[c+4],20,-405537848),o=D(o,i,r,d,s[c+9],5,568446438),d=D(d,o,i,r,s[c+14],9,-1019803690),r=D(r,d,o,i,s[c+3],14,-187363961),i=D(i,r,d,o,s[c+8],20,1163531501),o=D(o,i,r,d,s[c+13],5,-1444681467),d=D(d,o,i,r,s[c+2],9,-51403784),r=D(r,d,o,i,s[c+7],14,1735328473),i=D(i,r,d,o,s[c+12],20,-1926607734),o=S(o,i,r,d,s[c+5],4,-378558),d=S(d,o,i,r,s[c+8],11,-2022574463),r=S(r,d,o,i,s[c+11],16,1839030562),i=S(i,r,d,o,s[c+14],23,-35309556),o=S(o,i,r,d,s[c+1],4,-1530992060),d=S(d,o,i,r,s[c+4],11,1272893353),r=S(r,d,o,i,s[c+7],16,-155497632),i=S(i,r,d,o,s[c+10],23,-1094730640),o=S(o,i,r,d,s[c+13],4,681279174),d=S(d,o,i,r,s[c],11,-358537222),r=S(r,d,o,i,s[c+3],16,-722521979),i=S(i,r,d,o,s[c+6],23,76029189),o=S(o,i,r,d,s[c+9],4,-640364487),d=S(d,o,i,r,s[c+12],11,-421815835),r=S(r,d,o,i,s[c+15],16,530742520),i=S(i,r,d,o,s[c+2],23,-995338651),o=z(o,i,r,d,s[c],6,-198630844),d=z(d,o,i,r,s[c+7],10,1126891415),r=z(r,d,o,i,s[c+14],15,-1416354905),i=z(i,r,d,o,s[c+5],21,-57434055),o=z(o,i,r,d,s[c+12],6,1700485571),d=z(d,o,i,r,s[c+3],10,-1894986606),r=z(r,d,o,i,s[c+10],15,-1051523),i=z(i,r,d,o,s[c+1],21,-2054922799),o=z(o,i,r,d,s[c+8],6,1873313359),d=z(d,o,i,r,s[c+15],10,-30611744),r=z(r,d,o,i,s[c+6],15,-1560198380),i=z(i,r,d,o,s[c+13],21,1309151649),o=z(o,i,r,d,s[c+4],6,-145523070),d=z(d,o,i,r,s[c+11],10,-1120210379),r=z(r,d,o,i,s[c+2],15,718787259),i=z(i,r,d,o,s[c+9],21,-343485551),o=j(o,p),i=j(i,f),r=j(r,h),d=j(d,m)}return[o,i,r,d]}function Io(s){if(s.length===0)return[];for(var e=s.length*8,o=new Uint32Array(ce(e)),i=0;i<e;i+=8)o[i>>5]|=(s[i/8]&255)<<i%32;return o}function j(s,e){var o=(s&65535)+(e&65535),i=(s>>16)+(e>>16)+(o>>16);return i<<16|o&65535}function Uo(s,e){return s<<e|s>>>32-e}function W(s,e,o,i,r,d){return j(Uo(j(j(e,s),j(i,d)),r),o)}function V(s,e,o,i,r,d,c){return W(e&o|~e&i,s,e,r,d,c)}function D(s,e,o,i,r,d,c){return W(e&i|o&~i,s,e,r,d,c)}function S(s,e,o,i,r,d,c){return W(e^o^i,s,e,r,d,c)}function z(s,e,o,i,r,d,c){return W(o^(e|~i),s,e,r,d,c)}var Mo=ae("v3",48,Do);const jo=Mo;function Ho(s,e,o){s=s||{};var i=s.random||(s.rng||de)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){o=o||0;for(var r=0;r<16;++r)e[o+r]=i[r];return e}return x(i)}function Eo(s,e,o,i){switch(s){case 0:return e&o^~e&i;case 1:return e^o^i;case 2:return e&o^e&i^o&i;case 3:return e^o^i}}function Y(s,e){return s<<e|s>>>32-e}function Ro(s){var e=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var i=unescape(encodeURIComponent(s));s=[];for(var r=0;r<i.length;++r)s.push(i.charCodeAt(r))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var d=s.length/4+2,c=Math.ceil(d/16),p=new Array(c),f=0;f<c;++f){for(var h=new Uint32Array(16),m=0;m<16;++m)h[m]=s[f*64+m*4]<<24|s[f*64+m*4+1]<<16|s[f*64+m*4+2]<<8|s[f*64+m*4+3];p[f]=h}p[c-1][14]=(s.length-1)*8/Math.pow(2,32),p[c-1][14]=Math.floor(p[c-1][14]),p[c-1][15]=(s.length-1)*8&4294967295;for(var l=0;l<c;++l){for(var v=new Uint32Array(80),C=0;C<16;++C)v[C]=p[l][C];for(var U=16;U<80;++U)v[U]=Y(v[U-3]^v[U-8]^v[U-14]^v[U-16],1);for(var T=o[0],P=o[1],A=o[2],q=o[3],Q=o[4],O=0;O<80;++O){var ee=Math.floor(O/20),ue=Y(T,5)+Eo(ee,P,A,q)+Q+e[ee]+v[O]>>>0;Q=q,q=A,A=Y(P,30)>>>0,P=T,T=ue}o[0]=o[0]+T>>>0,o[1]=o[1]+P>>>0,o[2]=o[2]+A>>>0,o[3]=o[3]+q>>>0,o[4]=o[4]+Q>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,o[0]&255,o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,o[1]&255,o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,o[2]&255,o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,o[3]&255,o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,o[4]&255]}var Lo=ae("v5",80,Ro);const To=Lo;var he={v1:ko,v3:jo,v4:Ho,v5:To};const Po={key:0,class:"mb-2"},Ao={key:0,class:"dropdown-center"},qo=t("i",{class:"fa-solid fa-palette"},null,-1),Oo={key:0,class:"mb-0"},Bo={class:"dropdown-menu rounded-0"},No=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Wo=["onClick"],Qo=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Go={key:1,class:"input-group mb-3"},Jo={class:"form-floating"},Ko={for:"select-color-input"},Xo=t("i",{class:"fa-solid fa-palette"},null,-1),Yo=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-auto-close":"true","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Zo={class:"dropdown-menu dropdown-menu-end rounded-0"},xo=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),et=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ot=["onClick"],tt=["id"],st={class:"modal-dialog"},lt={class:"modal-content rounded-0"},rt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор цвета RAL"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),it={class:"modal-body"},dt={props:["modelValue","filter"],data(){return{id:null,color:null,colorModal:null,colors:[]}},watch:{getRalColors:{handler(s){this.colors=this.getRalColors},deep:!0},color:{handler(s){let e=(this.color.title||"").toLowerCase();e.indexOf("ral")!==-1&&(e=e.substring(e.indexOf("ral")+3).trim()),e.length===4&&Object.keys(this.colors).forEach(o=>{this.colors[o].code===e&&(this.color.code=this.colors[o].color.hex,this.color.title=this.colors[o].names.en)})},deep:!0}},computed:{...Z(["getDictionary","getRalColors"]),filteredColors(){return this.getDictionary.color_variants.filter(e=>e.type===this.filter||e.type==="all")}},mounted(){this.id=he.v4(),this.color=this.modelValue},methods:{invertHex(s){if(!s)return"#000000";var e=s.replace(/#/,""),o=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16),d=(.2126*o+.7152*i+.0722*r)/255;return d>.5?"#000000":"#ffffff"},isHex(s){return/^#[0-9A-F]{6}$/i.test(s)},alert(s){this.$emit("invalid",s)},callbackSelectColor(s){this.color.title=s.names.en,this.color.code=s.color.hex,this.colorModal.hide()},loadRalColors(){this.$store.dispatch("loadRalColors")},openRalModal(){this.loadRalColors(),this.colorModal=new bootstrap.Modal(document.getElementById("select-ral-color-"+this.id),{}),this.colorModal.show()},selectColor(s){let e=null;s!=null&&(e={title:s.title||s.code,code:s.code||null,sizes:s.sizes,is_ral:!1,excludes:s.excludes||[],type:s.type||"all",assign_with_size:s.assign_with_size||!1},s.title.toLowerCase()==="ral"&&(this.loadRalColors(),e={title:"RAL",code:"RAL",is_ral:!0,sizes:s.sizes,excludes:s.excludes||[],type:s.type||"all",assign_with_size:s.assign_with_size||!1})),this.color=e||{title:null},document.querySelectorAll(".dropdown-menu").forEach(i=>{i.classList.remove("show")}),this.$emit("change",this.color),this.$emit("update:modelValue",this.color)}}},L=Object.assign(dt,{__name:"ColorSelector",setup(s){return(e,o)=>(n(),a(y,null,[e.color?(n(),a("div",Po,[(e.color.code||null)!=="RAL"?(n(),a("div",Ao,[t("button",{style:E({"background-color":e.color.code,color:e.invertHex(e.color.code)}),class:"btn btn-outline-secondary w-100 rounded-0 custom-dropdown-btn text-left",type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},[t("span",{class:k([{"font-size-10":e.color.title},"mr-2"])},[qo,b(),oe(e.$slots,"name")],2),e.color.title?(n(),a("p",Oo,_(e.color.title),1)):u("",!0)],4),t("ul",Bo,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[0]||(o[0]=i=>e.selectColor(null))},"Не выбрано")]),No,t("li",null,[(n(!0),a(y,null,F(e.filteredColors,i=>(n(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.color.title===i.title}]),onClick:r=>e.selectColor(i),href:"javascript:void(0)"},_(i.title),11,Wo))),256))]),Qo,t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[1]||(o[1]=(...i)=>e.openRalModal&&e.openRalModal(...i))},"Справочник цветов")])])])):u("",!0),(e.color.code||"").toLowerCase()==="ral"?(n(),a("div",Go,[e.isHex(e.color.title)?(n(),a("span",{key:0,class:"input-group-text border-secondary",style:E([{"background-color":e.color.title},{width:"40px","border-radius":"0px"}]),id:"basic-addon1"},null,4)):u("",!0),t("div",Jo,[g(t("input",{type:"text",onInvalid:o[2]||(o[2]=i=>e.alert("Вы не выбрали цвет")),"onUpdate:modelValue":o[3]||(o[3]=i=>e.color.title=i),class:"form-control",id:"select-color-input",required:""},null,544),[[$,e.color.title]]),t("label",Ko,[Xo,oe(e.$slots,"name")])]),Yo,t("ul",Zo,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[4]||(o[4]=i=>e.color={title:null})},"Не выбрано")]),xo,t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[5]||(o[5]=(...i)=>e.openRalModal&&e.openRalModal(...i))},"Выбор цвета RAL")]),et,t("li",null,[(n(!0),a(y,null,F(e.filteredColors,i=>(n(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.color.title===i.title}]),onClick:r=>e.selectColor(i),href:"javascript:void(0)"},_(i.title),11,ot))),256))])])])):u("",!0)])):u("",!0),t("div",{class:"modal fade",id:"select-ral-color-"+e.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",st,[t("div",lt,[rt,t("div",it,[N(pe,{onSelect:e.callbackSelectColor},null,8,["onSelect"])])])])],8,tt)],64))}}),nt={props:["modelValue"],data(){return{door:null,edit_loading:!1,edited_handle:null,success_added:[],filter_modal:null,new_handles:[],searchQuery:""}},watch:{door:{handler(s){this.$emit("update:modelValue",this.door)},deep:!0}},computed:{...Z(["getDictionary"]),filteredItems(){return this.getDictionary.handle_holes_type_variants.filter(s=>s.title?s.title.toLowerCase().includes(this.searchQuery.toLowerCase()):"").reverse()}},mounted(){this.filter_modal=new bootstrap.Modal(document.getElementById("handlers-filter-modal")),this.door=this.modelValue},methods:{reloadHandles(){this.$store.dispatch("updatedFormattedSizes").then(s=>{window.dispatchEvent(new CustomEvent("load-sizes",{detail:null})),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})})},saveEditedHandle(){this.edited_handle&&(this.edit_loading=!0,this.$store.dispatch("fastEditHandle",{handle:this.edited_handle}).then(s=>{this.$notify({title:"DoDoors",text:"Вы сохранили данные по ручке"}),this.edit_loading=!1,this.edited_handle=null,this.reloadHandles()}).catch(s=>{this.edit_loading=!1,this.$notify({title:"DoDoors",text:"Ошибка сохранения ручки",type:"error"})}))},removeSelectedHandle(){this.edited_handle&&(this.edit_loading=!0,this.$store.dispatch("removeHandle",{handleId:this.edited_handle.id}).then(()=>{this.edit_loading=!1,this.reloadHandles()}).catch(()=>{this.edit_loading=!1}))},showFilterModal(){this.edited_handle=null,this.filter_modal.show()},selectHandle(s){let e=this.success_added.findIndex(o=>o===s.title);e!=-1&&this.success_added.splice(e,1),this.door.handle_holes_type=s.id==null?{title:null}:s,this.edited_handle=null,this.filter_modal.hide()},editHandle(s){var e;if(this.edited_handle&&((e=this.edited_handle)==null?void 0:e.id)===s.id){this.edited_handle=null;return}this.edited_handle=null,this.$nextTick(()=>{this.edited_handle=s})},saveHandles(){this.$store.dispatch("fastStoreHandles",{handles:this.new_handles}).then(s=>{this.$notify({title:"DoDoors",text:"Вы сохранили данные по ручкам"}),this.new_handles.forEach(e=>{this.success_added.push(e.title),this.$store.dispatch("pushHandles",{title:e.title,price:e.price})}),this.new_handles=[],this.$store.dispatch("updatedFormattedSizes").then(e=>{window.dispatchEvent(new CustomEvent("load-sizes",{detail:null})),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибка сохранения ручек",type:"error"})})},removeHandle(s){this.new_handles.splice(s,1)},addNewHandle(){this.new_handles.push({title:"",price:0})},reset(){this.edited_handle=null,this.filter_modal.hide(),this.door.handle_holes_type={title:null},this.searchQuery=""}}},at={class:"card-body px-2 py-1"},ct=t("label",{class:"font-size-10"},[t("i",{class:"fa-solid fa-ruler-vertical"}),b(" Выбор ручки")],-1),ht={key:0},ut={class:"modal fade",id:"handlers-filter-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},pt={class:"modal-dialog modal-lg"},_t={class:"modal-content"},ft=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Варианты ручек"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),mt={key:0,class:"modal-body"},vt={class:"form-floating mb-3"},gt=t("label",{for:"searchInput"},"Поиск...",-1),yt={key:0,class:"fw-bold mb-2"},bt={class:"small text-secondary"},Ft={class:"form-floating"},kt=["id","onUpdate:modelValue"],wt=["for"],$t={class:"form-floating"},Ct=["id","onUpdate:modelValue"],Vt=["for"],Dt=["onClick"],St={class:"d-flex flex-start"},zt=t("i",{class:"fa-solid fa-floppy-disk"},null,-1),It=["disabled"],Ut=t("i",{class:"fa-solid fa-plus"},null,-1),Mt={class:"list-group"},jt=["onClick"],Ht={key:0,class:"fa-solid fa-pen-to-square text-success"},Et={key:1,class:"fa-solid fa-xmark text-danger"},Rt=["onClick"],Lt={class:"form-floating mb-2"},Tt=["id"],Pt=["for"],At={class:"input-group mb-2"},qt={class:"form-floating"},Ot=["id"],Bt=["for"],Nt={class:"form-floating"},Wt=["id"],Qt=["for"],Gt={class:"form-floating"},Jt=["id"],Kt=["for"],Xt={class:"form-floating"},Yt=["id"],Zt=["for"],xt={class:"d-flex justify-content-between"},es=["disabled"],os={key:0,class:"fa-solid fa-floppy-disk mr-2"},ts={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},ss=t("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")],-1),ls=[ss],rs=["disabled"],is={key:0,class:"fa-solid fa-trash-can mr-2"},ds={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},ns=t("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")],-1),as=[ns];function cs(s,e,o,i,r,d){var c;return n(),a(y,null,[t("div",{onClick:e[0]||(e[0]=(...p)=>d.showFilterModal&&d.showFilterModal(...p)),class:"card rounded-0 border-black cursor-pointer"},[t("div",at,[ct,r.door?(n(),a("p",ht,_(((c=r.door.handle_holes_type)==null?void 0:c.title)||"не выбрано"),1)):u("",!0)])]),t("div",ut,[t("div",pt,[t("div",_t,[ft,r.door?(n(),a("div",mt,[t("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0 p-3 mb-2",onClick:e[1]||(e[1]=(...p)=>d.reset&&d.reset(...p))},"Не выбрано "),t("div",vt,[g(t("input",{type:"search",class:"form-control",id:"searchInput",placeholder:"Поиск...","onUpdate:modelValue":e[2]||(e[2]=p=>r.searchQuery=p)},null,512),[[$,r.searchQuery]]),gt]),r.new_handles.length>0?(n(),a("h6",yt,[b("Добавленные ручки "),t("span",bt,_(r.new_handles.length)+"/10",1)])):u("",!0),(n(!0),a(y,null,F(r.new_handles,(p,f)=>(n(),a("div",{key:"handle"+f,class:"input-group mb-2"},[t("div",Ft,[g(t("input",{type:"text",class:"form-control",id:"fast-new-handle-title-"+f,"onUpdate:modelValue":h=>r.new_handles[f].title=h},null,8,kt),[[$,r.new_handles[f].title]]),t("label",{for:"fast-new-handle-title-"+f},"Название",8,wt)]),t("div",$t,[g(t("input",{type:"number",class:"form-control",id:"fast-new-handle-price-"+f,"onUpdate:modelValue":h=>r.new_handles[f].price=h},null,8,Ct),[[$,r.new_handles[f].price]]),t("label",{for:"fast-new-handle-price-"+f},"Цена, руб",8,Vt)]),t("button",{onClick:h=>d.removeHandle(f),class:"btn btn-dark rounded-0",type:"button"},"Удалить ",8,Dt)]))),128)),t("div",St,[r.new_handles.length>0?(n(),a("button",{key:0,type:"button",onClick:e[3]||(e[3]=(...p)=>d.saveHandles&&d.saveHandles(...p)),class:"btn btn-dark rounded-0 mb-3 mr-2"},[zt,b(" Сохранить ")])):u("",!0),t("button",{type:"button",disabled:r.new_handles.length>=10,onClick:e[4]||(e[4]=(...p)=>d.addNewHandle&&d.addNewHandle(...p)),class:k([{"btn-outline-dark":r.new_handles.length>0,"btn-dark":r.new_handles.length===0},"btn rounded-0 mb-3"])},[Ut,b(" Добавить новую ручку ")],10,It)]),t("div",Mt,[(n(!0),a(y,null,F(d.filteredItems,(p,f)=>{var h,m;return n(),a("div",{key:p.title,class:k(["list-group-item cursor-pointer",{"list-group-item-primary":r.door.handle_holes_type===p,"list-group-item-success":r.success_added.indexOf(p.title)!=-1&&p.id!=null,"list-group-item-warning":r.success_added.indexOf(p.title)!=-1&&p.id==null}])},[t("a",{href:"javascript:void(0)",onClick:l=>d.editHandle(p),class:"mr-2"},[((h=r.edited_handle)==null?void 0:h.id)!==p.id?(n(),a("i",Ht)):(n(),a("i",Et))],8,jt),t("span",{onClick:l=>d.selectHandle(p)},_(p.title),9,Rt),((m=r.edited_handle)==null?void 0:m.id)===p.id?(n(),a("form",{key:0,onSubmit:e[11]||(e[11]=re((...l)=>d.saveEditedHandle&&d.saveEditedHandle(...l),["prevent"]))},[t("div",Lt,[g(t("input",{type:"text",class:"form-control",id:"edit-fast-new-handle-title-"+p.id,"onUpdate:modelValue":e[5]||(e[5]=l=>r.edited_handle.title=l),required:""},null,8,Tt),[[$,r.edited_handle.title]]),t("label",{for:"edit-fast-new-handle-title-"+p.id},"Название",8,Pt)]),t("div",At,[t("div",qt,[g(t("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-wholesale-"+p.id,"onUpdate:modelValue":e[6]||(e[6]=l=>r.edited_handle.price.wholesale=l),required:""},null,8,Ot),[[$,r.edited_handle.price.wholesale]]),t("label",{for:"edit-fast-new-handle-price-wholesale-"+p.id},"Оптовая цена, руб",8,Bt)]),t("div",Nt,[g(t("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-dealer-"+p.id,"onUpdate:modelValue":e[7]||(e[7]=l=>r.edited_handle.price.dealer=l),required:""},null,8,Wt),[[$,r.edited_handle.price.dealer]]),t("label",{for:"edit-fast-new-handle-price-dealer-"+p.id},"Цена дилера, руб",8,Qt)]),t("div",Gt,[g(t("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-retail-"+p.id,"onUpdate:modelValue":e[8]||(e[8]=l=>r.edited_handle.price.retail=l),required:""},null,8,Jt),[[$,r.edited_handle.price.retail]]),t("label",{for:"edit-fast-new-handle-price-retail-"+p.id},"Розничная цена, руб",8,Kt)]),t("div",Xt,[g(t("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-cost-"+p.id,"onUpdate:modelValue":e[9]||(e[9]=l=>r.edited_handle.price.cost=l),required:""},null,8,Yt),[[$,r.edited_handle.price.cost]]),t("label",{for:"edit-fast-new-handle-price-cost-"+p.id},"Себестоимость, руб",8,Zt)])]),t("div",xt,[t("button",{disabled:r.edit_loading,class:"btn btn-dark rounded-0",type:"submit"},[r.edit_loading?u("",!0):(n(),a("i",os)),r.edit_loading?(n(),a("div",ts,ls)):u("",!0),b(" Сохранить ")],8,es),t("button",{disabled:r.edit_loading,onClick:e[10]||(e[10]=(...l)=>d.removeSelectedHandle&&d.removeSelectedHandle(...l)),class:"btn bg-danger text-white rounded-0",type:"button"},[r.edit_loading?u("",!0):(n(),a("i",is)),r.edit_loading?(n(),a("div",ds,as)):u("",!0),b(" Удалить ручку ")],8,rs)])],32)):u("",!0)],2)}),128))])])):u("",!0)])])])],64)}const hs=ie(nt,[["render",cs]]),us={class:"col-md-6"},ps={class:"row"},_s={class:"col-md-6 col-12 mb-2"},fs={class:"col-md-6 col-12"},ms={class:"input-group mb-2"},vs={class:"form-floating"},gs=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-signs-post"}),b(" Назначение двери")],-1),ys=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),bs={class:"dropdown-menu dropdown-menu-end rounded-0"},Fs=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),ks=["onClick"],ws={class:"col-md-6 col-12"},$s={class:"input-group mb-2"},Cs={class:"form-floating"},Vs=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-ruler-vertical"}),b(" Высота, мм")],-1),Ds=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Ss={class:"dropdown-menu dropdown-menu-end rounded-0"},zs=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Is={class:"p-1"},Us={class:"form-floating"},Ms=t("label",{for:"filtered-height"},"Фильтр высоты",-1),js=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Hs={class:"scrollable-menu p-2"},Es=["onClick"],Rs={key:0,class:"text-center"},Ls={class:"col-md-6 col-12"},Ts={class:"input-group mb-2"},Ps={class:"form-floating"},As=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-ruler-horizontal"}),b(" Ширина, мм")],-1),qs=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Os={class:"dropdown-menu dropdown-menu-end rounded-0"},Bs=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Ns={class:"p-1"},Ws={class:"form-floating"},Qs=t("label",{for:"filtered-height"},"Фильтр ширины",-1),Gs=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),Js={class:"scrollable-menu p-2"},Ks=["onClick"],Xs={key:0,class:"text-center"},Ys={class:"col-md-6 col-12"},Zs={class:"form-floating mb-2"},xs=t("option",{value:{title:null}},"Выберите один из вариантов",-1),el=["value"],ol=t("label",{for:"floatingSelect"},[t("i",{class:"fa-brands fa-openid"}),b(" Тип открытия двери и толщина")],-1),tl={class:"col-md-6 col-12"},sl={class:"form-floating mb-2"},ll=["value"],rl=t("label",{for:"door-type"},[t("i",{class:"fa-solid fa-door-open"}),b(" Выберите тип двери")],-1),il={class:"col-md-6 col-12"},dl={class:"form-floating mb-2"},nl=["value"],al=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-industry"}),b(" Производитель петель")],-1),cl={class:"col-md-6 col-12"},hl={class:"form-floating mb-2"},ul=["value"],pl=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-angles-left"}),b(" Сторона петель")],-1),_l={class:"col-md-6 col-12 mb-2"},fl={class:"input-group"},ml={class:"form-floating"},vl=t("option",{value:{title:null}},"Выберите один из вариантов",-1),gl=["value"],yl=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-paint-roller"}),b(" Отделка первой стороны ")],-1),bl=t("i",{class:"fa-solid fa-images"},null,-1),Fl=[bl],kl={key:0,style:{"line-height":"100%"}},wl=t("small",null,[t("em",null,[t("strong",{class:"text-danger"},"Внимание!"),b(" сочетание размера и материала не доступно для заказа!")])],-1),$l=[wl],Cl={class:"col-md-6 col-12 mb-2"},Vl={key:1,class:"card rounded-0"},Dl=t("div",{class:"card-body p-3 disabled-element"},[t("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Sl=[Dl],zl={class:"col-md-6 col-12 mb-2"},Il={class:"input-group"},Ul={class:"form-floating"},Ml=t("option",{value:{title:null}},"Выберите один из вариантов",-1),jl=["value"],Hl=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-paint-roller"}),b(" Отделка второй стороны")],-1),El=t("i",{class:"fa-solid fa-images"},null,-1),Rl=[El],Ll={key:0,style:{"line-height":"100%"}},Tl=t("small",null,[t("em",null,[t("strong",{class:"text-danger"},"Внимание!"),b(" сочетание размера и материала не доступно для заказа!")])],-1),Pl=[Tl],Al={class:"col-md-6 col-12 mb-2"},ql={key:1,class:"card rounded-0"},Ol=t("div",{class:"card-body p-3 disabled-element"},[t("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Bl=[Ol],Nl={class:"col-md-6 col-12"},Wl={class:"col-md-6 col-12"},Ql={class:"col-md-6 col-12"},Gl={key:0,class:"col-md-6 col-12"},Jl={class:"form-floating w-100"},Kl=["value"],Xl=t("label",{for:"door-service-painting"},"Выберите вариант",-1),Yl={class:"col-12"},Zl={class:"form-floating"},xl=t("label",{for:"door-comment"},"Комментарий к двери",-1),er={key:0,class:"row py-3"},or={class:"col-12 d-flex align-items-center"},tr={class:"form-check form-switch"},sr=t("label",{class:"form-check-label",for:"need-handle-holes"}," Нужна ручка \\ не нужна ручка ",-1),lr={key:0,class:"col-md-6 col-12"},rr={class:"form-floating mb-2"},ir=["value"],dr=t("label",{for:"floatingSelect"},"Отверстия под ручку",-1),nr={key:1,class:"col-md-6 col-12"},ar={key:2,class:"col-12 d-flex align-items-center"},cr={key:3,class:"col-12"},hr={class:"row"},ur={class:"col-12 d-flex justify-content-between"},pr={class:"mb-2"},_r={class:"col-lg-3 col-md-3 col-12 mb-2"},fr=["href"],mr={style:{"min-height":"200px",display:"flex","justify-content":"center","align-items":"center"},class:"card-img-top object-fit-contain",alt:"..."},vr={key:0,class:"card-body"},gr={key:0,class:"font-bold"},yr={key:1,class:"card-text"},br={key:4,class:"col-12"},Fr=t("div",{class:"alert alert-warning rounded-0 mb-2",role:"alert"},[t("p",null,"Вариантов изображений ручки нет")],-1),kr=[Fr],wr={class:"col-12 d-flex align-items-center"},$r={class:"form-check form-switch"},Cr=t("label",{class:"form-check-label",for:"need-upper-jumper"}," Нужна верхняя перемычка ",-1),Vr={class:"col-12 d-flex align-items-center"},Dr={class:"form-check form-switch"},Sr=t("label",{class:"form-check-label",for:"need-automatic-doorstep"}," Нужен автоматический порог \\ не нужен ",-1),zr={key:5,class:"col-12 d-flex align-items-center"},Ir={class:"form-floating w-100 my-3"},Ur=["value"],Mr=t("label",{for:"door-service-doorstep"},"Выберите вариант",-1),jr={class:"col-12 d-flex align-items-center"},Hr={class:"form-check form-switch"},Er=t("label",{class:"form-check-label",for:"need-hidden-stopper"}," Нужен скрытый стопор \\ не нужен ",-1),Rr={key:6,class:"col-12 d-flex align-items-center"},Lr={class:"form-floating w-100 my-3"},Tr=["value"],Pr=t("label",{for:"door-service-stopper"},"Выберите вариант",-1),Ar={class:"col-12 d-flex align-items-center"},qr={class:"form-check form-switch"},Or=t("label",{class:"form-check-label",for:"need-hidden-door-closer"}," Нужен скрытый доводчик \\ не нужен ",-1),Br={key:7,class:"col-12 d-flex align-items-center"},Nr={class:"form-floating w-100 my-3"},Wr=["value"],Qr=t("label",{for:"door-service-door_closer"},"Выберите вариант",-1),Gr={class:"col-12 d-flex align-items-center"},Jr={class:"form-check form-switch"},Kr=t("label",{class:"form-check-label",for:"need-hidden-skirting-board"}," Нужен скрытый плинтус \\ не нужен ",-1),Xr={class:"col-12 d-flex align-items-center"},Yr={class:"form-check form-switch"},Zr=t("label",{class:"form-check-label",for:"need-door-install"}," Нужна установка двери \\ не нужна ",-1),xr={class:"col-12 d-flex align-items-center"},ei={class:"form-check form-switch"},oi=t("label",{class:"form-check-label",for:"need-door-wrapper"}," Нужна упаковка двери \\ не нужна ",-1),ti={class:"col-md-6"},si={class:"preview"},li={class:"card rounded-0 mt-3"},ri={class:"card-body"},ii=t("h6",null,"Характеристики ",-1),di={class:"text-muted font-bold"},ni={class:"text-black mb-0"},ai={key:0,class:"mr-1"},ci={key:1,class:"mr-1"},hi={key:2,class:"mr-1"},ui={key:3,class:"mr-1"},pi={key:4,class:"mr-1"},_i={key:5,class:"mr-1"},fi={key:6,class:"mr-1"},mi={key:7,class:"mr-1"},vi={key:8,class:"mr-1"},gi={key:9,class:"mr-1"},yi={key:10,class:"mr-1"},bi={key:11,class:"mr-1"},Fi={key:12,class:"mr-1"},ki={key:13,class:"mr-1"},wi={key:1,class:"card rounded-0 mt-3"},$i={class:"card-body"},Ci={class:"table"},Vi=t("br",null,null,-1),Di={key:0},Si=t("br",null,null,-1),zi={class:"col-12 mt-2"},Ii={class:"row bg-white"},Ui={class:"form-floating"},Mi=["value"],ji=t("label",{for:"door-type"},"Тип цены",-1),Hi={key:0,class:"col-md-2"},Ei={class:"form-floating"},Ri=t("label",{for:"floatingInput"},"Процент дилера",-1),Li={class:"col-md-4 d-flex justify-between"},Ti=t("i",{class:"fa-solid fa-minus"},null,-1),Pi=[Ti],Ai={class:"input-group"},qi=t("i",{class:"fa-solid fa-plus"},null,-1),Oi=[qi],Bi={class:"col-md-2 d-flex justify-center align-items-center"},Ni={class:"text-center text-primary font-bold text-black",style:{"font-size":"16px"}},Wi={class:"col-md-2 d-flex"},Qi=["disabled"],Gi=t("i",{class:"fa-solid fa-floppy-disk"},null,-1),Ji={class:"col-12"},Ki=["onClick"],Xi=t("strong",null,"Внимание!",-1),Yi={key:1,class:"row"},Zi=t("div",{class:"col-12"},[t("div",{class:"d-flex justify-content-center align-items-center flex-column",style:{"min-height":"500px"}},[t("h5",null,"Загружаем страничку...."),t("div",{class:"spinner-border my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])],-1),xi=[Zi],ed={class:"modal fade",id:"editor-confirm-dialog-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},od={class:"modal-dialog modal-dialog-centered"},td={class:"modal-content rounded-0"},sd={class:"modal-body"},ld=t("div",{class:"d-flex justify-center p-3"},[t("img",{src:"/images/logo.png",style:{width:"100px"},alt:""})],-1),rd={class:"font-bold text-center py-3"},id={class:"text-center pb-3"},dd={class:"row"},nd={class:"col-6"},ad={class:"col-6"},cd=["id"],hd={class:"modal-dialog modal-lg"},ud={class:"modal-content"},pd=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для первый стороны"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),_d={class:"modal-body"},fd=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),md=["id"],vd={class:"modal-dialog modal-lg"},gd={class:"modal-content"},yd=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для второй стороны"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})])],-1),bd={class:"modal-body"},Fd=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),kd={class:"modal fade",id:"show-current-handle-details",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},wd={class:"modal-dialog"},$d={class:"modal-content"},Cd=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Просмотр деталей"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Vd={class:"modal-body"},Dd={name:"MyComponent",props:["door","editOrder"],data(){return{loaded:!1,selectedHandle:null,type_dictionary:{size:"Петли",handle_holes_type:"Ручка",opening_type:"Тип открытия двери и толщина",box_and_frame_color:"Цвет короба и каркаса",door_type:"Тип двери",front_side_finish_color:"Цвет отделки внешней стороны",back_side_finish_color:"Цвет отделки внутренней стороны",seal_color:"Цвет уплотнителя",fittings_color:"Цвет фурнитуры",hinge_manufacturer:"Производитель петель",front_side_finish:"Отделка внешней стороны",back_side_finish:"Отделка внутренней стороны",base:"База (под покраску)",service_doorstep:"Работа с порогом",service_painting:"Покраска фурнитуры",service_door_closer:"Работа с доводчиком",service_handle:"Услуги по монтажу ручки",service_stopper:"Работа со стопором"},tmp_prices:[],need_addition:!0,messages:[],filterHeight:null,filterWidth:null,selectedColorParam:null,loadedParams:!0,confirmModal:null,finishFrontVariantModal:null,finishBackVariantModal:null,colors:[],confirm:{title:null,message:null},color_sync_update:!1,doorForm:{id:null,width:0,height:0,depth:0,count:1,price:0,size:null,purpose:null,comment:null,dealer_percent:0,opening_type:{title:null},box_and_frame_color:{title:null},door_type:{title:null},front_side_finish:{title:null},back_side_finish:{title:null},front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:{title:null},loops_count:0,price_type:{title:null},hinge_manufacturer:{title:null},handle_holes:{title:null},handle_holes_type:{title:null},need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}}}},computed:{...Z(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"]),resultPrice(){return this.doorForm.price_type.id!==3?this.summaryPrice:this.summaryPriceWithDealer},summaryPriceWithDealer(){return Math.round((this.summaryPrice||0)*(1+(this.doorForm.dealer_percent||0)/100))},shortDoorTitle(){var o;let s=((o=this.doorForm.door_type)==null?void 0:o.title)||"КДС";return{"Комплект двери скрытого монтажа":"КДС"}[s]||s},summaryPrice(){let s=0,e=null;this.tmp_prices=[];let o=this.doorForm.price_type.key;Object.keys(this.doorForm).forEach(h=>{let m=!1;if(h&&typeof this.doorForm[h]=="object"&&this.doorForm[h]!=null&&h!=="door_type"){if(h==="opening_type"&&this.doorForm[h].sizes){m=!0;let l=this.doorForm[h].sizes.findIndex(C=>C.width==this.doorForm.width&&C.height==this.doorForm.height),v=l===-1?0:this.doorForm[h].sizes[l].price[o];s+=parseInt(v||0),console.log("opening_type",v,h),this.tmp_prices.push({type:h,price:v})}if(h.indexOf("_color")!==-1&&this.doorForm[h].sizes&&!m){m=!0;let l=(this.doorForm[h]||{excludes:[]}).excludes.indexOf(h.substring(0,h.indexOf("_color")))!==-1,v=0;if(!this.doorForm[h].assign_with_size)v=l?0:this.doorForm[h].sizes[0].price[o];else{let C=this.doorForm[h].sizes.findIndex(U=>U.width==this.doorForm.width&&U.height==this.doorForm.height);v=C===-1||l?0:this.doorForm[h].sizes[C].price[o]}s+=parseInt(v||0),this.tmp_prices.push({type:h,price:v})}if(h==="hinge_manufacturer"&&this.doorForm[h].title!=null&&!m){m=!0;let l=this.doorForm[h].price[o],v=0;this.doorForm.size&&(v=this.doorForm.size.loops.count*l),s+=parseInt(v||0),this.tmp_prices.push({type:h,price:l,full_price:v})}if(h==="size"&&this.doorForm[h].loops.price&&!m){m=!0;let l=this.doorForm[h].loops.price[o];s+=parseInt(l||0),this.tmp_prices.push({type:h,price:l})}if(h==="service_painting"&&this.doorForm[h].title!=null&&!m){m=!0;let l=this.doorForm.fittings_color.is_ral?this.doorForm[h].price[o]:0,v=0;this.doorForm.size&&(v=(this.doorForm.size.loops.count+1)*l),s+=v||0,this.tmp_prices.push({type:h,price:l,full_price:v})}if(this.doorForm[h].price&&!m){let l=typeof this.doorForm[h].price=="object"?this.doorForm[h].price[o]||0:this.doorForm[h].price||0;s+=parseInt(l||0),this.tmp_prices.push({type:h,price:l})}}});let i=this.getDictionary.prices,r=0,d=!1,c=null;i.forEach(h=>{h.width===this.doorForm.width&&h.height===this.doorForm.height&&(d=!0,c=h)});let p=h=>{let m=typeof this.doorForm.door_type.price=="object"?this.doorForm.door_type.price[o]:this.doorForm.door_type.price,l=this.doorForm.door_type.id!==3?1:.8,v=this.doorForm.door_type.need_percent_price?h*m/100:h*l+m;return this.tmp_prices.push({type:"door_type",price:(v||0)>0?v:h}),(v||0)>0?v:h};if(d){e=c.materials.find(m=>m.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let h=typeof e.price=="object"?e.price[o]:e.price;this.tmp_prices.push({type:"base",price:h}),r=parseInt(p(h)),c.materials.forEach(m=>{if(m.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let l=typeof m.price=="object"?m.price[o]:m.price;r+=l,this.tmp_prices.push({type:"front_side_finish",price:l})}if(m.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let l=typeof m.price=="object"?m.price[o]:m.price;r+=l,this.tmp_prices.push({type:"back_side_finish",price:l})}})}else for(let h=0;h<i.length;h++)if(i[h].width>=this.doorForm.width&&i[h].height>=this.doorForm.height){e=i[h].materials.find(l=>l.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let m=typeof e.price=="object"?e.price[o]:e.price;this.tmp_prices.push({type:"base",price:m}),r=parseInt(p(m)),i[h].materials.forEach(l=>{if(l.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let v=typeof l.price=="object"?l.price[o]:l.price;r+=v,this.tmp_prices.push({type:"front_side_finish",price:v})}}),i[h].materials.forEach(l=>{if(l.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let v=typeof l.price=="object"?l.price[o]:l.price;r+=v,this.tmp_prices.push({type:"back_side_finish",price:v})}});break}return(h=>Math.round(parseInt(h)/10)*10)(s+r)},filteredHeight(){return this.getDictionary?this.filterHeight?this.getDictionary.size_variants.filter(s=>(""+s.height).indexOf(this.filterHeight)!==-1):this.getDictionary.size_variants:[]},filteredWidth(){return this.getDictionary?this.filterWidth?this.getDictionary.size_variants.filter(s=>(""+s.width).indexOf(this.filterWidth)!==-1):this.getDictionary.size_variants:[]}},watch:{doorForm:{handler(s){console.log("doorForm",this.doorForm),this.loadedParams=!1,this.$nextTick(()=>{this.loadedParams=!0})},deep:!0},"doorForm.fittings_color":{handler(s){if(this.doorForm.fittings_color.title==null)this.doorForm.service_painting={title:null};else{let e=this.getServiceByType("service_painting");this.doorForm.service_painting=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_stopper":{handler(s){if(!this.doorForm.need_hidden_stopper)this.doorForm.service_stopper={title:null};else{let e=this.getServiceByType("service_stopper");this.doorForm.service_stopper=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_door_closer":{handler(s){if(!this.doorForm.need_hidden_door_closer)this.doorForm.service_door_closer={title:null};else{let e=this.getServiceByType("service_door_closer");this.doorForm.service_door_closer=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_automatic_doorstep":{handler(s){if(!this.doorForm.need_automatic_doorstep)this.doorForm.service_doorstep={title:null};else{let e=this.getServiceByType("service_doorstep");this.doorForm.service_doorstep=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_handle_holes":{handler(s){this.doorForm.need_handle_holes||(this.doorForm.handle_holes=this.getDictionary.handle_holes_variants[0],this.doorForm.handle_holes_type={title:null})},deep:!0},"doorForm.opening_type":{handler(s){if(this.doorForm.opening_type){let e=this.getDictionary.opening_variants.find(o=>o.id===this.doorForm.opening_type.id);e&&(this.doorForm.depth=e.depth||0)}},deep:!0},summaryPriceWithDealer:{handler(s){this.doorForm.price=this.summaryPriceWithDealer},deep:!0},summaryPrice:{handler(s){var o;let e=((o=this.tmp_prices.find(i=>i.type==="door_type"))==null?void 0:o.price)||0;this.doorForm.price=this.summaryPrice,this.doorForm.base_price=e},deep:!0}},mounted(){this.detailsModal=new bootstrap.Modal(document.getElementById("show-current-handle-details"),{}),window.addEventListener("clear-cart",s=>{this.$store.dispatch("loadFormattedSizes").then(e=>{this.clearForm(),this.loaded=!0}).catch(()=>{})}),this.confirmModal=new bootstrap.Modal(document.getElementById("editor-confirm-dialog-modal"),{}),this.door?this.$store.dispatch("loadFormattedSizes").then(s=>{this.loaded=!1,this.$nextTick(()=>{let e=this.door.product?this.door.product:this.door.door;console.log(e),this.doorForm.id=this.editOrder?this.door.id:this.door.product.id,this.doorForm.width=e.width,this.doorForm.height=e.height,this.doorForm.depth=e.depth,this.doorForm.count=this.editOrder?this.door.count:e.quantity,this.doorForm.size=e.size,this.doorForm.purpose=e.purpose||"Входная",this.doorForm.handle_holes=e.handle_holes||{title:null},this.doorForm.handle_holes_type=e.handle_holes_type||{title:null},this.doorForm.opening_type=e.opening_type||{title:null},this.doorForm.box_and_frame_color=e.box_and_frame_color||{title:null},this.doorForm.door_type=e.door_type||{title:null},this.doorForm.front_side_finish=e.front_side_finish||{title:null},this.doorForm.back_side_finish=e.back_side_finish||{title:null},this.doorForm.front_side_finish_color=e.front_side_finish_color||{title:null},this.doorForm.back_side_finish_color=e.back_side_finish_color||{title:null},this.doorForm.seal_color=e.seal_color||{title:null},this.doorForm.fittings_color=e.fittings_color||{title:null},this.doorForm.loops=e.loops||{title:null},this.doorForm.loops_count=e.loops_count||0,this.doorForm.price_type=e.price_type||{title:null},this.doorForm.hinge_manufacturer=e.hinge_manufacturer||{title:null},this.doorForm.need_handle_holes=e.need_handle_holes||!0,this.doorForm.need_upper_jumper=e.need_upper_jumper||!0,this.doorForm.need_automatic_doorstep=e.need_automatic_doorstep||!1,this.doorForm.need_hidden_stopper=e.need_hidden_stopper||!1,this.doorForm.need_hidden_door_closer=e.need_hidden_door_closer||!1,this.doorForm.need_hidden_skirting_board=e.need_hidden_skirting_board||!1,this.doorForm.need_door_install=e.need_door_install||!1,this.doorForm.need_wrapper=e.need_wrapper||!0,this.doorForm.service_doorstep=e.service_doorstep||{title:null},this.doorForm.service_painting=e.service_painting||{title:null},this.doorForm.service_stopper=e.service_stopper||{title:null},this.doorForm.service_door_closer=e.service_door_closer||{title:null},this.doorForm.service_handle=e.service_handle||{title:null},this.loaded=!0})}).catch(()=>{}):this.$store.dispatch("loadFormattedSizes").then(s=>{this.clearForm(),this.loaded=!0}).catch(()=>{})},methods:{showDetails(s){this.selectedHandle=null,this.$nextTick(()=>{this.selectedHandle=s,this.detailsModal.show()})},loadRalColors(){this.$store.dispatch("loadRalColors")},openConfirmModal(s,e){this.confirm.title=s||null,this.confirm.message=e||null,this.confirmModal.show()},selectSideFinish(s,e,o){this.doorForm[s][e][o].selected||!1||this.doorForm[s][e].forEach(r=>{r.selected&&delete r.selected}),this.doorForm[s][e][o].selected=!this.doorForm[s][e][o].selected},priceForSide(s){let e=this.doorForm.price_type.key,o=0,i=null,r=this.getDictionary.prices;return this.doorForm.width===0&&this.doorForm.height===0?0:(r.forEach(d=>{this.doorForm.width===d.width&&this.doorForm.height===d.height&&(i=d)}),i&&i.materials&&i.materials.forEach(d=>{d.id===this.doorForm[s].id&&(d.price,o=typeof d.price=="object"?d.price[e]:d.price)}),o)},clearForm(){this.loaded=!1,this.confirmModal.hide(),this.$nextTick(()=>{const s={purpose:"Дверь "+(this.cartProducts.length+1),id:he.v1(),count:1,width:this.getDictionary.size_variants[0].width,height:this.getDictionary.size_variants[0].height,size:this.getDictionary.size_variants[0],loops_count:this.getDictionary.size_variants[0].loops.count,handle_holes:this.getDictionary.handle_holes_variants[0],handle_holes_type:{title:null},opening_type:this.getDictionary.opening_variants[0],box_and_frame_color:{title:null},door_type:this.getDictionary.door_variants[0],front_side_finish:this.getDictionary.finishes_variants[0],back_side_finish:this.getDictionary.finishes_variants[0],front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:this.getDictionary.loops_variants[0],price_type:this.getDictionary.price_type_variants[1],hinge_manufacturer:this.getDictionary.hinge_manufacturer_variants[0],need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}};this.doorForm=s,this.loaded=!0})},selectDoorSize(s){if(s==null){this.doorForm.width=0,this.doorForm.height=0,this.doorForm.size=null,this.doorForm.loops_count=0;return}this.doorForm.width=s.width,this.doorForm.height=s.height,this.doorForm.size=s,this.doorForm.loops_count=s.loops.count},changeDoorCount(s){s==="add"&&this.doorForm.count++,s==="sub"&&this.doorForm.count>0&&this.doorForm.count--},selectFrontSideFinish(){(this.doorForm.front_side_finish.door_variants||[]).length!==0&&(this.finishFrontVariantModal=new bootstrap.Modal(document.getElementById("finish-front-variant-modal-"+this.doorForm.id),{}),this.finishFrontVariantModal.show())},selectBackSideFinish(){(this.doorForm.back_side_finish.door_variants||[]).length!==0&&(this.finishBackVariantModal=new bootstrap.Modal(document.getElementById("finish-back-variant-modal-"+this.doorForm.id),{}),this.finishBackVariantModal.show())},getServiceByType(s){if((this.getDictionary.services||[]).length===0)return[];let e=this.getDictionary.services.filter(o=>o.type===s&&o.is_active);return e.length>0?e.sort((o,i)=>i.order_position-o.order_position):[]},alert(s){this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},syncColors(s,e){if(e.title=="RAL")return;const o=[{color:"Silver",box_and_frame_color:{title:"Серебро",code:"#c0c0c0"},seal_color:{title:"Серый",code:"#808080"},fittings_color:{title:"Серебро",code:"#c0c0c0"}},{color:"Black",box_and_frame_color:{title:"Черный",code:"#000000"},seal_color:{title:"Черный",code:"#000000"},fittings_color:{title:"Черный",code:"#000000"}},{color:"Gold",box_and_frame_color:{title:"Золотой",code:"#ffd700"},seal_color:{title:"Бежевый",code:"#f5f5dc"},fittings_color:{title:"Золотой",code:"#ffd700"}}];this.color_sync_update=!0,this.$nextTick(()=>{this.color_sync_update=!1;let i=o.find(r=>r.color===e.title);this.doorForm.box_and_frame_color={assign_with_size:e.assign_with_size,code:i?i.box_and_frame_color.code:e.code,title:i?i.box_and_frame_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.seal_color={assign_with_size:e.assign_with_size,code:i?i.seal_color.code:e.code,title:i?i.seal_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.fittings_color={assign_with_size:e.assign_with_size,code:i?i.fittings_color.code:e.code,title:i?i.fittings_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type}})},submitForm(){if(this.messages=[],this.editOrder){let s=new FormData;Object.keys(this.doorForm).forEach(e=>{const o=this.doorForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("editDoorInOrder",{doorForm:s}).then(e=>{this.$emit("callback"),this.resetForm()}).catch(e=>{});return}this.$store.dispatch("addProductToCart",{product:this.doorForm,price:this.summaryPrice}).then(()=>{this.confirm.title="Товар успешно добавлен в корзину",this.confirm.message="Очистить форму?",this.confirmModal.show(),this.$notify({title:"DoDoors",text:"Дверь успешно добавлена в корзину",type:"success"})})}}},Md=Object.assign(Dd,{setup(s){return(e,o)=>{var r,d,c,p,f,h,m;const i=le("lazy");return n(),a(y,null,[e.loaded?(n(),a("form",{key:0,class:"row",onSubmit:o[62]||(o[62]=re((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[t("div",us,[t("div",ps,[t("div",_s,[t("button",{type:"button",onClick:o[0]||(o[0]=l=>e.openConfirmModal("Внимание!","Вы очищает текущую работу в калькуляторе! Продолжить?")),class:"btn rounded-0 w-100 btn-dark p-3"},"Очистить форму ")]),t("div",fs,[t("div",ms,[t("div",vs,[g(t("input",{type:"text",min:"0","onUpdate:modelValue":o[1]||(o[1]=l=>e.doorForm.purpose=l),class:"form-control",id:"floatingInput"},null,512),[[$,e.doorForm.purpose]]),gs]),ys,t("ul",bs,[t("li",null,[t("a",{class:"dropdown-item",onClick:o[2]||(o[2]=l=>e.doorForm.purpose=null),href:"javascript:void(0)"},"Не выбрано")]),Fs,t("li",null,[(n(!0),a(y,null,F(e.getDictionary.purpose_variants,l=>(n(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.doorForm.purpose===l}]),onClick:v=>e.doorForm.purpose=l,href:"javascript:void(0)"},_(l),11,ks))),256))])])])]),t("div",ws,[t("div",$s,[t("div",Cs,[g(t("input",{type:"number",min:"0",onInvalid:o[3]||(o[3]=l=>e.alert("Вы не выбрали  ввели высоту двери!")),"onUpdate:modelValue":o[4]||(o[4]=l=>e.doorForm.height=l),class:"form-control",id:"floatingInput",required:""},null,544),[[$,e.doorForm.height]]),Vs]),Ds,t("ul",Ss,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[5]||(o[5]=l=>e.selectDoorSize(null))},"Не выбрано")]),zs,t("li",Is,[t("div",Us,[g(t("input",{type:"search","onUpdate:modelValue":o[6]||(o[6]=l=>e.filterHeight=l),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[$,e.filterHeight]]),Ms])]),js,t("li",Hs,[(n(!0),a(y,null,F(e.filteredHeight,l=>(n(),a("a",{class:k(["dropdown-item",{"bg-primary":e.doorForm.width===l.width&&e.doorForm.width===l.height}]),onClick:v=>e.selectDoorSize(l),href:"javascript:void(0)"},_(l.height)+"x"+_(l.width),11,Es))),256)),e.filteredHeight.length===0?(n(),a("p",Rs,"Ничего не найдено")):u("",!0)])])])]),t("div",Ls,[t("div",Ts,[t("div",Ps,[g(t("input",{type:"number",min:"0",onInvalid:o[7]||(o[7]=l=>e.alert("Вы не выбрали  ввели ширину двери!")),"onUpdate:modelValue":o[8]||(o[8]=l=>e.doorForm.width=l),class:"form-control",id:"floatingInput",required:""},null,544),[[$,e.doorForm.width]]),As]),qs,t("ul",Os,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:o[9]||(o[9]=l=>e.selectDoorSize(null))},"Не выбрано")]),Bs,t("li",Ns,[t("div",Ws,[g(t("input",{type:"search","onUpdate:modelValue":o[10]||(o[10]=l=>e.filterWidth=l),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[$,e.filterWidth]]),Qs])]),Gs,t("li",Js,[(n(!0),a(y,null,F(e.filteredWidth,l=>(n(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.doorForm.width===l.width&&e.doorForm.width===l.height}]),onClick:v=>e.selectDoorSize(l),href:"javascript:void(0)"},_(l.height)+"x"+_(l.width),11,Ks))),256)),e.filteredWidth.length===0?(n(),a("p",Xs,"Ничего не найдено")):u("",!0)])])])]),t("div",Ys,[t("div",Zs,[g(t("select",{class:"form-select","onUpdate:modelValue":o[11]||(o[11]=l=>e.doorForm.opening_type=l),onInvalid:o[12]||(o[12]=l=>e.alert("Вы не выбрали вариант открывания и толщину двери!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[xs,(n(!0),a(y,null,F(e.getDictionary.opening_variants,l=>(n(),a("option",{value:l},_(l.title)+" (толщина "+_(l.depth)+" мм) ",9,el))),256))],544),[[I,e.doorForm.opening_type]]),ol])]),t("div",tl,[t("div",sl,[g(t("select",{class:"form-select","onUpdate:modelValue":o[13]||(o[13]=l=>e.doorForm.door_type=l),onInvalid:o[14]||(o[14]=l=>e.alert("Вы не выбрали тип двери!")),id:"door-type","aria-label":"door-type",required:""},[(n(!0),a(y,null,F(e.getDictionary.door_variants,l=>(n(),a("option",{value:l},_(l.title),9,ll))),256))],544),[[I,e.doorForm.door_type]]),rl])]),t("div",il,[t("div",dl,[g(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=l=>e.doorForm.hinge_manufacturer=l),onInvalid:o[16]||(o[16]=l=>e.alert("Вы не выбрали расположение петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(n(!0),a(y,null,F(e.getDictionary.hinge_manufacturer_variants,l=>(n(),a("option",{value:l},_(l.title),9,nl))),256))],544),[[I,e.doorForm.hinge_manufacturer]]),al])]),t("div",cl,[t("div",hl,[g(t("select",{class:"form-select","onUpdate:modelValue":o[17]||(o[17]=l=>e.doorForm.loops=l),onInvalid:o[18]||(o[18]=l=>e.alert("Вы не выбрали сторону петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(n(!0),a(y,null,F(e.getDictionary.loops_variants,l=>(n(),a("option",{value:l},_(l.title),9,ul))),256))],544),[[I,e.doorForm.loops]]),pl])]),t("div",_l,[t("div",fl,[t("div",ml,[g(t("select",{class:"form-select",onInvalid:o[19]||(o[19]=l=>e.alert("Вы не выбрали отделку первой стороны двери!")),"onUpdate:modelValue":o[20]||(o[20]=l=>e.doorForm.front_side_finish=l),id:"floatingSelect","aria-label":"Floating label select example",required:""},[vl,(n(!0),a(y,null,F(e.getDictionary.finishes_variants,l=>(n(),a("option",{value:l},_(l.title),9,gl))),256))],544),[[I,e.doorForm.front_side_finish]]),yl]),(e.doorForm.front_side_finish.door_variants||[]).length!==0?(n(),a("button",{key:0,onClick:o[21]||(o[21]=(...l)=>e.selectFrontSideFinish&&e.selectFrontSideFinish(...l)),class:"btn btn-outline-secondary rounded-0",type:"button"},Fl)):u("",!0)]),e.priceForSide("front_side_finish")===0?(n(),a("p",kl,$l)):u("",!0)]),t("div",Cl,[e.doorForm.front_side_finish.title!=="Под покраску"?(n(),H(L,{key:0,filter:"front_side_finish_color",onInvalid:o[22]||(o[22]=l=>e.alert("Вы не выбрали цвет отделки первой стороны")),modelValue:e.doorForm.front_side_finish_color,"onUpdate:modelValue":o[23]||(o[23]=l=>e.doorForm.front_side_finish_color=l)},{name:R(()=>[b(" Цвет отделки первой стороны ")]),_:1},8,["modelValue"])):(n(),a("div",Vl,Sl))]),t("div",zl,[t("div",Il,[t("div",Ul,[g(t("select",{class:"form-select",onInvalid:o[24]||(o[24]=l=>e.alert("Вы не выбрали отделку второй стороны двери!")),"onUpdate:modelValue":o[25]||(o[25]=l=>e.doorForm.back_side_finish=l),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Ml,(n(!0),a(y,null,F(e.getDictionary.finishes_variants,l=>(n(),a("option",{value:l},_(l.title),9,jl))),256))],544),[[I,e.doorForm.back_side_finish]]),Hl]),(e.doorForm.back_side_finish.door_variants||[]).length!==0?(n(),a("button",{key:0,onClick:o[26]||(o[26]=(...l)=>e.selectBackSideFinish&&e.selectBackSideFinish(...l)),class:"btn btn-outline-secondary rounded-0",type:"button"},Rl)):u("",!0)]),e.priceForSide("back_side_finish")===0?(n(),a("p",Ll,Pl)):u("",!0)]),t("div",Al,[e.doorForm.back_side_finish.title!=="Под покраску"?(n(),H(L,{key:0,filter:"back_side_finish_color",onInvalid:o[27]||(o[27]=l=>e.alert("Вы не выбрали цвет отделки второй стороны")),modelValue:e.doorForm.back_side_finish_color,"onUpdate:modelValue":o[28]||(o[28]=l=>e.doorForm.back_side_finish_color=l)},{name:R(()=>[b(" Цвет отделки второй стороны ")]),_:1},8,["modelValue"])):(n(),a("div",ql,Bl))]),t("div",Nl,[e.color_sync_update?u("",!0):(n(),H(L,{key:0,filter:"box_and_frame_color",onChange:o[29]||(o[29]=l=>e.syncColors("box_and_frame_color",l)),onInvalid:o[30]||(o[30]=l=>e.alert("Вы не выбрали цвет короба и каркаса")),modelValue:e.doorForm.box_and_frame_color,"onUpdate:modelValue":o[31]||(o[31]=l=>e.doorForm.box_and_frame_color=l)},{name:R(()=>[b(" Цвет короба и каркаса ")]),_:1},8,["modelValue"]))]),t("div",Wl,[e.color_sync_update?u("",!0):(n(),H(L,{key:0,filter:"seal_color",onInvalid:o[32]||(o[32]=l=>e.alert("Вы не выбрали цвет уплотнителя")),modelValue:e.doorForm.seal_color,"onUpdate:modelValue":o[33]||(o[33]=l=>e.doorForm.seal_color=l)},{name:R(()=>[b(" Цвет уплотнителя ")]),_:1},8,["modelValue"]))]),t("div",Ql,[e.color_sync_update?u("",!0):(n(),H(L,{key:0,filter:"fittings_color",onInvalid:o[34]||(o[34]=l=>e.alert("Вы не выбрали цвет фурнитуры")),modelValue:e.doorForm.fittings_color,"onUpdate:modelValue":o[35]||(o[35]=l=>e.doorForm.fittings_color=l)},{name:R(()=>[b(" Цвет фурнитуры ")]),_:1},8,["modelValue"]))]),e.doorForm.fittings_color.title!=null&&e.doorForm.fittings_color.is_ral?(n(),a("div",Gl,[t("div",Jl,[g(t("select",{class:"form-select","onUpdate:modelValue":o[36]||(o[36]=l=>e.doorForm.service_painting=l),id:"door-service-painting","aria-label":"Floating label select example"},[(n(!0),a(y,null,F(e.getServiceByType("service_painting"),l=>(n(),a("option",{value:l},_(l.title||"-"),9,Kl))),256))],512),[[I,e.doorForm.service_painting]]),Xl])])):u("",!0),t("div",Yl,[t("div",Zl,[g(t("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":o[37]||(o[37]=l=>e.doorForm.comment=l),style:{"min-height":"100px"},placeholder:"Оставьте комментарий",id:"door-comment"},null,512),[[$,e.doorForm.comment]]),xl])])]),e.need_addition?(n(),a("div",er,[t("div",or,[t("div",tr,[g(t("input",{class:"form-check-input","onUpdate:modelValue":o[38]||(o[38]=l=>e.doorForm.need_handle_holes=l),type:"checkbox",role:"switch",id:"need-handle-holes",checked:""},null,512),[[M,e.doorForm.need_handle_holes]]),sr])]),e.doorForm.need_handle_holes?(n(),a("div",lr,[t("div",rr,[g(t("select",{class:"form-select",onInvalid:o[39]||(o[39]=l=>e.alert("Вы не выбрали отверстие под ручку!")),"onUpdate:modelValue":o[40]||(o[40]=l=>e.doorForm.handle_holes=l),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(n(!0),a(y,null,F(e.getDictionary.handle_holes_variants,l=>(n(),a("option",{value:l},_(l.title),9,ir))),256))],544),[[I,e.doorForm.handle_holes]]),dr])])):u("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(n(),a("div",nr,[N(hs,{modelValue:e.doorForm,"onUpdate:modelValue":o[41]||(o[41]=l=>e.doorForm=l)},null,8,["modelValue"])])):u("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(n(),a("div",ar)):u("",!0),(e.doorForm.handle_holes_type.variants||[]).length>0&&e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(n(),a("div",cr,[t("div",hr,[t("div",ur,[t("p",pr,[b('Цвет ручки "'+_(e.doorForm.handle_holes_type.color||"не указан")+'" ',1),e.doorForm.handle_holes_type.color?(n(),a("span",{key:0,class:"d-inline-block",style:E([{"background-color":e.doorForm.handle_holes_type.color},{width:"50px",height:"10px"}])},null,4)):u("",!0)]),t("a",{onClick:o[42]||(o[42]=l=>e.showDetails(e.doorForm.handle_holes_type)),href:"javascript:void(0)",class:"fst-italic cursor-pointer btn btn-link p-0"},"Дополнительные параметры ручки")]),(n(!0),a(y,null,F(e.doorForm.handle_holes_type.variants,(l,v)=>(n(),a("div",_r,[t("div",{class:k(["card rounded-0 border-black",{"border-secondary shadow-lg":l.selected}])},[t("a",{href:l.image,target:"_blank"},[g(t("img",mr,null,512),[[i,l.image]])],8,fr),l.title||l.description?(n(),a("div",vr,[l.title?(n(),a("h6",gr,_(l.title||"не указано"),1)):u("",!0),l.description?(n(),a("p",yr,_(l.description||"не указано"),1)):u("",!0)])):u("",!0)],2)]))),256))])])):u("",!0),(e.doorForm.handle_holes_type.variants||[]).length===0&&e.doorForm.need_handle_holes?(n(),a("div",br,kr)):u("",!0),t("div",wr,[t("div",$r,[g(t("input",{class:"form-check-input","onUpdate:modelValue":o[43]||(o[43]=l=>e.doorForm.need_upper_jumper=l),type:"checkbox",role:"switch",id:"need-upper-jumper",checked:""},null,512),[[M,e.doorForm.need_upper_jumper]]),Cr])]),t("div",Vr,[t("div",Dr,[g(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[44]||(o[44]=l=>e.doorForm.need_automatic_doorstep=l),role:"switch",id:"need-automatic-doorstep",checked:""},null,512),[[M,e.doorForm.need_automatic_doorstep]]),Sr])]),e.doorForm.need_automatic_doorstep?(n(),a("div",zr,[t("div",Ir,[g(t("select",{class:"form-select","onUpdate:modelValue":o[45]||(o[45]=l=>e.doorForm.service_doorstep=l),id:"door-service-doorstep","aria-label":"Floating label select example"},[(n(!0),a(y,null,F(e.getServiceByType("service_doorstep"),l=>(n(),a("option",{value:l},_(l.title||"-"),9,Ur))),256))],512),[[I,e.doorForm.service_doorstep]]),Mr])])):u("",!0),t("div",jr,[t("div",Hr,[g(t("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":o[46]||(o[46]=l=>e.doorForm.need_hidden_stopper=l),id:"need-hidden-stopper",checked:""},null,512),[[M,e.doorForm.need_hidden_stopper]]),Er])]),e.doorForm.need_hidden_stopper?(n(),a("div",Rr,[t("div",Lr,[g(t("select",{class:"form-select","onUpdate:modelValue":o[47]||(o[47]=l=>e.doorForm.service_stopper=l),id:"door-service-stopper","aria-label":"Floating label select example"},[(n(!0),a(y,null,F(e.getServiceByType("service_stopper"),l=>(n(),a("option",{value:l},_(l.title||"-"),9,Tr))),256))],512),[[I,e.doorForm.service_stopper]]),Pr])])):u("",!0),t("div",Ar,[t("div",qr,[g(t("input",{class:"form-check-input","onUpdate:modelValue":o[48]||(o[48]=l=>e.doorForm.need_hidden_door_closer=l),type:"checkbox",role:"switch",id:"need-hidden-door-closer",checked:""},null,512),[[M,e.doorForm.need_hidden_door_closer]]),Or])]),e.doorForm.need_hidden_door_closer?(n(),a("div",Br,[t("div",Nr,[g(t("select",{class:"form-select","onUpdate:modelValue":o[49]||(o[49]=l=>e.doorForm.service_door_closer=l),id:"door-service-door_closer","aria-label":"Floating label select example"},[(n(!0),a(y,null,F(e.getServiceByType("service_door_closer"),l=>(n(),a("option",{value:l},_(l.title||"-"),9,Wr))),256))],512),[[I,e.doorForm.service_door_closer]]),Qr])])):u("",!0),t("div",Gr,[t("div",Jr,[g(t("input",{class:"form-check-input","onUpdate:modelValue":o[50]||(o[50]=l=>e.doorForm.need_hidden_skirting_board=l),type:"checkbox",role:"switch",id:"need-hidden-skirting-board",checked:""},null,512),[[M,e.doorForm.need_hidden_skirting_board]]),Kr])]),t("div",Xr,[t("div",Yr,[g(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[51]||(o[51]=l=>e.doorForm.need_door_install=l),role:"switch",id:"need-door-install",checked:""},null,512),[[M,e.doorForm.need_door_install]]),Zr])]),t("div",xr,[t("div",ei,[g(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[52]||(o[52]=l=>e.doorForm.need_wrapper=l),role:"switch",id:"need-door-wrapper",checked:""},null,512),[[M,e.doorForm.need_wrapper]]),oi])])])):u("",!0)]),t("div",ti,[t("div",si,[e.loadedParams?(n(),H(We,{key:0,modelValue:e.doorForm,"onUpdate:modelValue":o[53]||(o[53]=l=>e.doorForm=l)},null,8,["modelValue"])):u("",!0),t("div",li,[t("div",ri,[ii,t("h6",di,_(e.shortDoorTitle)+" "+_(e.doorForm.width||0)+"x"+_(e.doorForm.height||0)+"x"+_(((r=e.doorForm.opening_type)==null?void 0:r.depth)||0),1),t("h6",ni,[(d=e.doorForm.box_and_frame_color)!=null&&d.title?(n(),a("span",ai,"("+_(e.doorForm.box_and_frame_color.title)+"),",1)):u("",!0),(c=e.doorForm.front_side_finish_color)!=null&&c.title?(n(),a("span",ci,"первая сторона "+_(e.doorForm.front_side_finish_color.title)+",",1)):u("",!0),(p=e.doorForm.back_side_finish_color)!=null&&p.title?(n(),a("span",hi,"/вторая сторона "+_(e.doorForm.back_side_finish_color.title)+",",1)):u("",!0),(f=e.doorForm.loops)!=null&&f.title?(n(),a("span",ui,"петли "+_(e.doorForm.loops.title),1)):u("",!0),(h=e.doorForm.fittings_color)!=null&&h.title?(n(),a("span",pi,"("+_(e.doorForm.fittings_color.title)+"),",1)):u("",!0),(m=e.doorForm.opening_type)!=null&&m.title?(n(),a("span",_i,_(e.doorForm.opening_type.title)+",",1)):u("",!0),e.doorForm.depth?(n(),a("span",fi,"Толщина профиля "+_(e.doorForm.depth)+" мм,",1)):u("",!0),e.doorForm.need_upper_jumper!=="true"?(n(),a("span",mi,"без верх. перемычки,")):u("",!0),e.doorForm.need_automatic_doorstep==="true"?(n(),a("span",vi,"Автоматический порог,")):u("",!0),e.doorForm.need_hidden_stopper==="true"?(n(),a("span",gi,"Скрытый стопор,")):u("",!0),e.doorForm.need_hidden_door_closer==="true"?(n(),a("span",yi,"Скрытый доводчик,")):u("",!0),e.doorForm.need_hidden_skirting_board==="true"?(n(),a("span",bi,"Скрытый плинтус,")):u("",!0),e.doorForm.need_door_install==="true"?(n(),a("span",Fi,"Установка двери,")):u("",!0),e.doorForm.need_handle_holes==="true"?(n(),a("span",ki,"Ручка в комплекте")):u("",!0)])])]),e.tmp_prices.length>0?(n(),a("div",wi,[t("div",$i,[t("table",Ci,[t("tbody",null,[(n(!0),a(y,null,F(e.tmp_prices,l=>(n(),a("tr",null,[t("td",null,[b(_(e.type_dictionary[l.type]||l.type)+" ",1),e.doorForm[l.type]?(n(),a(y,{key:0},[Vi,e.doorForm[l.type].description?(n(),a("small",Di,"("+_(e.doorForm[l.type].description)+")",1)):u("",!0)],64)):u("",!0)]),t("td",null,[b(_(l.price||0)+" руб. ",1),l.full_price?(n(),a(y,{key:0},[Si,t("small",null,"("+_(l.full_price||0)+" руб.)",1)],64)):u("",!0)])]))),256))])])])])):u("",!0)])]),t("div",zi,[t("div",Ii,[t("div",{class:k({"col-md-2":e.doorForm.price_type.id===3,"col-md-4":e.doorForm.price_type.id!==3})},[t("div",Ui,[g(t("select",{class:"form-select","onUpdate:modelValue":o[54]||(o[54]=l=>e.doorForm.price_type=l),onInvalid:o[55]||(o[55]=l=>e.alert("Вы не выбрали тип цены!")),id:"door-type","aria-label":"door-type",required:""},[(n(!0),a(y,null,F(e.getDictionary.price_type_variants,l=>(n(),a("option",{value:l},_(l.title),9,Mi))),256))],544),[[I,e.doorForm.price_type]]),ji])],2),e.doorForm.price_type.id===3?(n(),a("div",Hi,[t("div",Ei,[g(t("input",{type:"number",min:"0",onInvalid:o[56]||(o[56]=l=>e.alert("Вы не ввели процент дилера!")),"onUpdate:modelValue":o[57]||(o[57]=l=>e.doorForm.dealer_percent=l),class:"form-control text-center",id:"floatingInput",required:""},null,544),[[$,e.doorForm.dealer_percent]]),Ri])])):u("",!0),t("div",Li,[t("button",{type:"button",onClick:o[58]||(o[58]=l=>e.changeDoorCount("sub")),class:"btn btn-dark rounded-0 mr-2 px-3"},Pi),t("div",Ai,[g(t("input",{type:"number",onInvalid:o[59]||(o[59]=l=>e.alert("Вы не указали количество дверей")),"onUpdate:modelValue":o[60]||(o[60]=l=>e.doorForm.count=l),min:"1",value:"1",class:"form-control rounded-0 text-center"},null,544),[[$,e.doorForm.count]])]),t("button",{type:"button",onClick:o[61]||(o[61]=l=>e.changeDoorCount("add")),class:"btn btn-dark rounded-0 ml-2 px-3"},Oi)]),t("div",Bi,[t("p",Ni,_(e.resultPrice)+"х"+_(e.doorForm.count)+"="+_(e.resultPrice*e.doorForm.count)+"₽",1)]),t("div",Wi,[t("button",{disabled:!e.doorForm.price_type.key,class:"btn btn-dark rounded-0 w-100"},[Gi,b(" Сохранить ")],8,Qi)])])]),t("div",Ji,[e.messages.length>0?(n(!0),a(y,{key:0},F(e.messages,(l,v)=>(n(),a("div",{onClick:C=>e.removeMessage(v),class:"alert alert-danger alert-dismissible fade show my-2",role:"alert"},[Xi,b(" "+_(l||"Ошибка"),1)],8,Ki))),256)):u("",!0)])],32)):(n(),a("div",Yi,xi)),t("div",ed,[t("div",od,[t("div",td,[t("div",sd,[ld,t("h3",rd,_(e.confirm.title||"-"),1),t("p",id,_(e.confirm.message||"-"),1),t("div",dd,[t("div",nd,[t("button",{class:"btn btn-dark rounded-0 w-100",type:"button",onClick:o[63]||(o[63]=(...l)=>e.clearForm&&e.clearForm(...l))},"Да, очистить ")]),t("div",ad,[t("button",{class:"btn btn-outline-secondary rounded-0 w-100",onClick:o[64]||(o[64]=l=>e.confirmModal.hide())},"Нет, не очищать ")])])])])])]),t("div",{class:"modal fade",id:"finish-front-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",hd,[t("div",ud,[pd,t("div",_d,[N(te,{item:e.doorForm.front_side_finish,"onUpdate:item":o[65]||(o[65]=l=>e.doorForm.front_side_finish=l)},null,8,["item"])]),fd])])],8,cd),t("div",{class:"modal fade",id:"finish-back-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",vd,[t("div",gd,[yd,t("div",bd,[N(te,{item:e.doorForm.back_side_finish,"onUpdate:item":o[66]||(o[66]=l=>e.doorForm.back_side_finish=l)},null,8,["item"])]),Fd])])],8,md),t("div",kd,[t("div",wd,[t("div",$d,[Cd,t("div",Vd,[e.selectedHandle?(n(),H(_e,{key:0,"selected-handle":e.selectedHandle},null,8,["selected-handle"])):u("",!0)])])])])],64)}}});export{We as _,Md as a,he as u};
