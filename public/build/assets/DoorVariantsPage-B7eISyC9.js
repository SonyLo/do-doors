import{_ as y}from"./AuthenticatedLayout-DsbX7nKY.js";import{m as V,o as e,c as i,a as t,b as m,v as p,d as u,e as r,F as _,r as v,f,t as h,w as $,g,u as D,k as b,Z as w}from"./app-18_fjooi.js";import{P as C}from"./Pagination-CxuXhhjE.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-4aOqyZwU.js";const F={class:"row"},L={class:"col-12"},A={class:"input-group mb-3"},I={class:"form-floating"},O=t("label",{for:"search-door-variants"},"Поиск по производителям петель",-1),P=t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),T=[P],N={style:{"overflow-y":"auto"}},S={key:0,class:"table"},B={key:0},M=t("i",{class:"fa-solid fa-caret-down"},null,-1),U=[M],q={key:1},E=t("i",{class:"fa-solid fa-caret-up"},null,-1),G=[E],J={key:0},Z=t("i",{class:"fa-solid fa-caret-down"},null,-1),z=[Z],H={key:1},K=t("i",{class:"fa-solid fa-caret-up"},null,-1),Q=[K],R={key:0},W=t("i",{class:"fa-solid fa-caret-down"},null,-1),X=[W],Y={key:1},x=t("i",{class:"fa-solid fa-caret-up"},null,-1),tt=[x],st={key:0},et=t("i",{class:"fa-solid fa-caret-down"},null,-1),ot=[et],it={key:1},nt=t("i",{class:"fa-solid fa-caret-up"},null,-1),rt=[nt],at=t("th",{scope:"col",class:"text-center"},"Действие",-1),lt={scope:"row"},dt=["onClick"],ct={class:"text-center"},ut={class:"text-center"},ht={class:"text-center"},_t={class:"dropdown"},mt=t("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),pt={class:"dropdown-menu"},ft=["onClick"],gt=t("i",{class:"fa-solid fa-pen mr-2"},null,-1),bt=["onClick"],vt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),kt={key:0,class:"alert alert-success",role:"alert"},yt=t("h4",{class:"alert-heading"},"Варианты дверей",-1),Vt=t("p",null,"К сожалению, раздел Варианты дверей пуст. Вы еще не добавили ни одного варианта дверей, которые можно отобразить на этой странице.",-1),$t=t("hr",null,null,-1),Dt=t("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый вариант дверей",-1),wt=[yt,Vt,$t,Dt],Ct={key:1,class:"row mb-3"},jt={class:"col-12"},Ft={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0}]}},computed:{...V(["getDoorVariants","getDoorVariantsPaginateObject"])},mounted(){this.loadDoorVariants()},methods:{sortAndLoad(o){this.sort.column=o,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadDoorVariants(this.current_page)},loadDoorVariants(o=0){this.current_page=o,this.$store.dispatch("loadDoorVariants",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(s=>{this.items=this.getDoorVariants,this.paginate_object=this.getDoorVariantsPaginateObject}).catch(()=>{this.loading=!1})},selectItem(o){this.$emit("select",o)},duplicateItem(o){this.$store.dispatch("duplicateDoorVariant",{doorVariantId:o}).then(()=>{this.sortAndLoad("id")})},removeItem(o){this.$store.dispatch("removeDoorVariant",{doorVariantId:o}).then(()=>{this.sortAndLoad("id")})}}},Lt=Object.assign(Ft,{__name:"DoorVariantTable",setup(o){return(s,n)=>(e(),i(_,null,[t("form",F,[t("div",L,[t("div",A,[t("div",I,[m(t("input",{type:"search","onUpdate:modelValue":n[0]||(n[0]=a=>s.search=a),class:"form-control",id:"search-door-variants"},null,512),[[p,s.search]]),O]),t("button",{type:"button",onClick:n[1]||(n[1]=a=>s.sortAndLoad("id")),class:"btn btn-outline-primary"},T)])])]),t("div",N,[s.items.length>0?(e(),i("table",S,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:n[2]||(n[2]=a=>s.sortAndLoad("id"))},[u("# "),s.sort.direction==="desc"&&s.sort.column==="id"?(e(),i("span",B,U)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="id"?(e(),i("span",q,G)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[3]||(n[3]=a=>s.sortAndLoad("title"))},[u("Название "),s.sort.direction==="desc"&&s.sort.column==="title"?(e(),i("span",J,z)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="title"?(e(),i("span",H,Q)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[4]||(n[4]=a=>s.sortAndLoad("price"))},[u("Цена "),s.sort.direction==="desc"&&s.sort.column==="price"?(e(),i("span",R,X)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="price"?(e(),i("span",Y,tt)):r("",!0)]),t("th",{scope:"col",class:"text-center cursor-pointer",onClick:n[5]||(n[5]=a=>s.sortAndLoad("updated_at"))},[u(" Дата изменения "),s.sort.direction==="desc"&&s.sort.column==="updated_at"?(e(),i("span",st,ot)):r("",!0),s.sort.direction==="asc"&&s.sort.column==="updated_at"?(e(),i("span",it,rt)):r("",!0)]),at])]),t("tbody",null,[(e(!0),i(_,null,v(s.items,(a,l)=>(e(),i("tr",null,[t("th",lt,h(a.id||l),1),t("td",{class:"text-center",onClick:d=>s.selectItem(a)},h(a.title||"-"),9,dt),t("td",ct,h(a.price||0),1),t("td",ut,h(a.updated_at||"-"),1),t("td",ht,[t("div",_t,[mt,t("ul",pt,[t("li",null,[t("a",{class:"dropdown-item",onClick:d=>s.selectItem(a),href:"javascript:void(0)"},[gt,u("Редактировать")],8,ft)]),t("li",null,[t("a",{class:"dropdown-item text-danger",onClick:d=>s.removeItem(a.id),href:"javascript:void(0)"},[vt,u("Удалить")],8,bt)])])])])]))),256))])])):r("",!0)]),s.items.length===0?(e(),i("div",kt,wt)):r("",!0),s.items.length>0?(e(),i("div",Ct,[t("div",jt,[s.paginate_object?(e(),f(C,{key:0,onPagination_page:s.loadDoorVariants,pagination:s.paginate_object},null,8,["onPagination_page","pagination"])):r("",!0)])])):r("",!0)],64))}}),At={props:["item"],data(){return{messages:[],loading:!1,form:{id:null,title:null,price:null}}},computed:{needClearForm(){return this.form.id||this.form.title||this.form.price}},mounted(){this.item&&this.$nextTick(()=>{this.form={id:this.item.id||null,title:this.item.title||null,price:this.item.price||0}})},methods:{alert(o){this.messages.push(o)},resetForm(){this.form.id=null,this.form.title=null,this.form.price=0,this.$emit("callback")},removeMessage(o){this.messages.splice(o,1)},submit(){let o=new FormData;Object.keys(this.form).forEach(s=>{const n=this.form[s]||"";typeof n=="object"?o.append(s,JSON.stringify(n)):o.append(s,n)}),this.$store.dispatch("storeDoorVariant",{doorVariantForm:o}).then(s=>{this.$emit("callback"),this.resetForm()}).catch(s=>{})}}},It={class:"form-floating mb-3"},Ot=t("label",{for:"door-variant-title"},"Наименование варианта двери",-1),Pt={class:"form-floating mb-3"},Tt=t("label",{for:"door-variant-title"},"Цена варианта двери",-1),Nt={class:"row"},St={class:"col-12"},Bt={class:"alert alert-danger alert-dismissible fade show",role:"alert"},Mt=t("strong",null,"Внимание!",-1),Ut=["onClick"],qt={class:"row mt-5"},Et={class:"col-12 d-flex justify-content-center"},Gt=["disabled"],Jt={key:0,class:"fa-regular fa-floppy-disk mr-1"},Zt={key:1,class:"spinner-border spinner-border-sm text-success",role:"status"},zt=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1);function Ht(o,s,n,a,l,d){return e(),i("form",{action:"",onSubmit:s[3]||(s[3]=$((...c)=>d.submit&&d.submit(...c),["prevent"]))},[t("div",It,[m(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=c=>l.form.title=c),class:"form-control",id:"door-variant-title",required:""},null,512),[[p,l.form.title]]),Ot]),t("div",Pt,[m(t("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=c=>l.form.price=c),class:"form-control",id:"door-variant-price",required:""},null,512),[[p,l.form.price]]),Tt]),t("div",Nt,[t("div",St,[l.messages.length>0?(e(!0),i(_,{key:0},v(l.messages,(c,k)=>(e(),i("div",Bt,[Mt,u(" "+h(c||"Ошибка")+" ",1),t("button",{type:"button",class:"btn-close",onClick:ss=>d.removeMessage(k)},null,8,Ut)]))),256)):r("",!0)])]),t("div",qt,[t("div",Et,[t("button",{disabled:!d.needClearForm,class:"btn btn-outline-success rounded-5"},[l.loading?(e(),i("span",Zt)):(e(),i("i",Jt)),u(" Сохранить производителя петель ")],8,Gt),d.needClearForm&&!l.loading?(e(),i("button",{key:0,type:"button",onClick:s[2]||(s[2]=(...c)=>d.resetForm&&d.resetForm(...c)),class:"btn btn-outline-danger rounded-5 ml-2"},[zt,u(" Очистить форму ")])):r("",!0)])])],32)}const Kt=j(At,[["render",Ht]]),Qt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Варианты дверей",-1),Rt={class:"py-12"},Wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Xt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Yt={class:"p-6 text-gray-900"},xt=t("hr",{class:"hr my-5"},null,-1),ts={data(){return{loading:!1,selectedDoorVariant:null}},methods:{selectDoorVariant(o){this.selectedDoorVariant=o,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackDoorVariantForm(){this.loading=!0,this.selectedDoorVariant=null,this.$nextTick(()=>{this.loading=!1})}}},as=Object.assign(ts,{__name:"DoorVariantsPage",setup(o){return(s,n)=>(e(),i(_,null,[g(D(w),{title:"Варианты дверей"}),g(y,null,{header:b(()=>[Qt]),default:b(()=>[t("div",Rt,[t("div",Wt,[t("div",Xt,[t("div",Yt,[s.loading?r("",!0):(e(),f(Kt,{key:0,item:s.selectedDoorVariant,onCallback:s.callbackDoorVariantForm},null,8,["item","onCallback"])),xt,s.loading?r("",!0):(e(),f(Lt,{key:1,onSelect:s.selectDoorVariant},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{as as default};
