import{_ as m}from"./AuthenticatedLayout-DfRFp9Mc.js";import{m as f,o as e,c as o,b as s,d as g,v,e as d,f as i,F as _,r as b,g as k,t as r,a as c,u as y,w as u,Z as w}from"./app-roUIETiH.js";import{P as $}from"./Pagination-DcN5bgZl.js";import"./ApplicationLogo-DRTYoO9u.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"row"},C={class:"col-12"},j={class:"input-group mb-3"},L={class:"form-floating"},A=s("label",{for:"search-users"},"Поиск пользователя",-1),I=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),P=[I],O={style:{"overflow-y":"auto"}},V={key:0,class:"table"},B={key:0},N=s("i",{class:"fa-solid fa-caret-down"},null,-1),T=[N],D={key:1},F=s("i",{class:"fa-solid fa-caret-up"},null,-1),E=[F],G={key:0},M=s("i",{class:"fa-solid fa-caret-down"},null,-1),S=[M],Z={key:1},q=s("i",{class:"fa-solid fa-caret-up"},null,-1),z=[q],H={key:0},J=s("i",{class:"fa-solid fa-caret-down"},null,-1),K=[J],Q={key:1},R=s("i",{class:"fa-solid fa-caret-up"},null,-1),W=[R],X={key:0},Y=s("i",{class:"fa-solid fa-caret-down"},null,-1),x=[Y],ss={key:1},ts=s("i",{class:"fa-solid fa-caret-up"},null,-1),es=[ts],os=s("th",{scope:"col",class:"text-center"},"Действие",-1),ns={scope:"row"},as=["onClick"],is={class:"text-center"},ls={class:"text-center"},ds={class:"text-center"},rs={class:"dropdown"},cs=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),_s={class:"dropdown-menu"},hs=["onClick"],us=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),ps=["onClick"],ms=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),fs={key:0,class:"alert alert-success",role:"alert"},gs=s("h4",{class:"alert-heading"},"Ручки",-1),vs=s("p",null,"К сожалению, раздел ручек пуст. Вы еще не добавили ни одной ручки, которые можно отобразить на этой странице.",-1),bs=s("hr",null,null,-1),ks=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свою первую ручку",-1),ys=[gs,vs,bs,ks],ws={key:1,class:"row mb-3"},$s={class:"col-12"},Us={data(){return{sort:{column:null,direction:"desc"},search:null,current_page:0,paginate_object:null,items:[{id:null,title:null,price:0,variants:[]}]}},computed:{...f(["getUsers","getUsersPaginateObject"])},mounted(){this.loadUsers()},methods:{sortAndLoad(l){this.sort.column=l,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadUsers(this.current_page)},loadUsers(l=0){this.current_page=l,this.$store.dispatch("loadUsers",{dataObject:{search:this.search,order:this.sort.column,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getUsers,this.paginate_object=this.getUsersPaginateObject}).catch(()=>{this.loading=!1})},selectItem(l){this.$emit("select",l)},duplicateItem(l){this.$store.dispatch("duplicateUser",{materialId:l}).then(()=>{this.sortAndLoad("id")})},removeItem(l){this.$store.dispatch("removeUser",{materialId:l}).then(()=>{this.sortAndLoad("id")})}}},Cs=Object.assign(Us,{__name:"UserTable",setup(l){return(t,a)=>(e(),o(_,null,[s("form",U,[s("div",C,[s("div",j,[s("div",L,[g(s("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=n=>t.search=n),class:"form-control",id:"search-users"},null,512),[[v,t.search]]),A]),s("button",{type:"button",onClick:a[1]||(a[1]=n=>t.sortAndLoad("id")),class:"btn btn-outline-primary"},P)])])]),s("div",O,[t.items.length>0?(e(),o("table",V,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:a[2]||(a[2]=n=>t.sortAndLoad("id"))},[d("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(e(),o("span",B,T)):i("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(e(),o("span",D,E)):i("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[3]||(a[3]=n=>t.sortAndLoad("email"))},[d("Почта "),t.sort.direction==="desc"&&t.sort.column==="email"?(e(),o("span",G,S)):i("",!0),t.sort.direction==="asc"&&t.sort.column==="email"?(e(),o("span",Z,z)):i("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[4]||(a[4]=n=>t.sortAndLoad("name"))},[d("Имя "),t.sort.direction==="desc"&&t.sort.column==="name"?(e(),o("span",H,K)):i("",!0),t.sort.direction==="asc"&&t.sort.column==="name"?(e(),o("span",Q,W)):i("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:a[5]||(a[5]=n=>t.sortAndLoad("updated_at"))},[d(" Дата изменения "),t.sort.direction==="desc"&&t.sort.column==="updated_at"?(e(),o("span",X,x)):i("",!0),t.sort.direction==="asc"&&t.sort.column==="updated_at"?(e(),o("span",ss,es)):i("",!0)]),os])]),s("tbody",null,[(e(!0),o(_,null,b(t.items,(n,p)=>(e(),o("tr",null,[s("th",ns,r(n.id||p),1),s("td",{class:"text-center",onClick:h=>t.selectItem(n)},r(n.email||"-"),9,as),s("td",is,r(n.name||0),1),s("td",ls,r(n.updated_at||"-"),1),s("td",ds,[s("div",rs,[cs,s("ul",_s,[s("li",null,[s("a",{class:"dropdown-item",onClick:h=>t.selectItem(n),href:"javascript:void(0)"},[us,d("Редактировать")],8,hs)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:h=>t.removeItem(n.id),href:"javascript:void(0)"},[ms,d("Удалить")],8,ps)])])])])]))),256))])])):i("",!0)]),t.items.length===0?(e(),o("div",fs,ys)):i("",!0),t.items.length>0?(e(),o("div",ws,[s("div",$s,[t.paginate_object?(e(),k($,{key:0,onPagination_page:t.loadUsers,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):i("",!0)])])):i("",!0)],64))}}),js=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Пользователи",-1),Ls={class:"py-12"},As={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Is={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ps={class:"p-6 text-gray-900"},Os={data(){return{loading:!1}},methods:{}},Fs=Object.assign(Os,{__name:"UsersPage",setup(l){return(t,a)=>(e(),o(_,null,[c(y(w),{title:"Пользователи"}),c(m,null,{header:u(()=>[js]),default:u(()=>[s("div",Ls,[s("div",As,[s("div",Is,[s("div",Ps,[c(Cs)])])])])]),_:1})],64))}});export{Fs as default};
